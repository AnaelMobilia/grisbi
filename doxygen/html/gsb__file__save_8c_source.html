<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Grisbi:  Fichier source de gsb_file_save.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&nbsp;associées</span></a></li>
      <li><a href="annotated.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
    </ul>
  </div>
<h1>gsb_file_save.c</h1><a href="gsb__file__save_8c.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ************************************************************************** */</span>
<a name="l00002"></a>00002 <span class="comment">/*                                                                            */</span>
<a name="l00003"></a>00003 <span class="comment">/*     Copyright (C)    2000-2008 Cédric Auger (cedric@grisbi.org)            */</span>
<a name="l00004"></a>00004 <span class="comment">/*          2003-2009 Benjamin Drieu (bdrieu@april.org)                       */</span>
<a name="l00005"></a>00005 <span class="comment">/*          http://www.grisbi.org                                             */</span>
<a name="l00006"></a>00006 <span class="comment">/*                                                                            */</span>
<a name="l00007"></a>00007 <span class="comment">/*  This program is free software; you can redistribute it and/or modify      */</span>
<a name="l00008"></a>00008 <span class="comment">/*  it under the terms of the GNU General Public License as published by      */</span>
<a name="l00009"></a>00009 <span class="comment">/*  the Free Software Foundation; either version 2 of the License, or         */</span>
<a name="l00010"></a>00010 <span class="comment">/*  (at your option) any later version.                                       */</span>
<a name="l00011"></a>00011 <span class="comment">/*                                                                            */</span>
<a name="l00012"></a>00012 <span class="comment">/*  This program is distributed in the hope that it will be useful,           */</span>
<a name="l00013"></a>00013 <span class="comment">/*  but WITHOUT ANY WARRANTY; without even the implied warranty of            */</span>
<a name="l00014"></a>00014 <span class="comment">/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             */</span>
<a name="l00015"></a>00015 <span class="comment">/*  GNU General Public License for more details.                              */</span>
<a name="l00016"></a>00016 <span class="comment">/*                                                                            */</span>
<a name="l00017"></a>00017 <span class="comment">/*  You should have received a copy of the GNU General Public License         */</span>
<a name="l00018"></a>00018 <span class="comment">/*  along with this program; if not, write to the Free Software               */</span>
<a name="l00019"></a>00019 <span class="comment">/*  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */</span>
<a name="l00020"></a>00020 <span class="comment">/*                                                                            */</span>
<a name="l00021"></a>00021 <span class="comment">/* ************************************************************************** */</span>
<a name="l00022"></a>00022 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#       include &lt;io.h&gt;</span> <span class="comment">// for _chmod()</span>
<a name="l00031"></a>00031 <span class="preprocessor">#endif </span><span class="comment">/*_MSC_VER */</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;zlib.h&gt;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">/*START_INCLUDE*/</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="gsb__file__save_8h.html">gsb_file_save.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="bet__data_8h.html">bet_data.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="dialog_8h.html">dialog.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__account_8h.html">gsb_data_account.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__archive_8h.html">gsb_data_archive.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__bank_8h.html">gsb_data_bank.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__budget_8h.html">gsb_data_budget.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__category_8h.html">gsb_data_category.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__currency_8h.html">gsb_data_currency.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__currency__link_8h.html">gsb_data_currency_link.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__form_8h.html">gsb_data_form.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__fyear_8h.html">gsb_data_fyear.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__import__rule_8h.html">gsb_data_import_rule.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__partial__balance_8h.html">gsb_data_partial_balance.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__payee_8h.html">gsb_data_payee.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__payment_8h.html">gsb_data_payment.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__print__config_8h.html">gsb_data_print_config.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__reconcile_8h.html">gsb_data_reconcile.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__report__amout__comparison_8h.html">gsb_data_report_amout_comparison.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__report_8h.html">gsb_data_report.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__report__text__comparison_8h.html">gsb_data_report_text_comparison.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__scheduled_8h.html">gsb_data_scheduled.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__transaction_8h.html">gsb_data_transaction.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="gsb__file_8h.html">gsb_file.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="utils__dates_8h.html">utils_dates.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="navigation_8h.html">navigation.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="gsb__plugins_8h.html">gsb_plugins.h</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="gsb__real_8h.html">gsb_real.h</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="gsb__select__icon_8h.html">gsb_select_icon.h</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="utils__str_8h.html">utils_str.h</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="structures_8h.html">structures.h</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="custom__list_8h.html">custom_list.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__form_8h.html">gsb_data_form.h</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="utils__str_8h.html">utils_str.h</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="gsb__scheduler__list_8h.html">gsb_scheduler_list.h</a>&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="gsb__calendar_8h.html">gsb_calendar.h</a>&quot;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="erreur_8h.html">erreur.h</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="gsb__plugins_8h.html">gsb_plugins.h</a>&quot;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__report_8h.html">gsb_data_report.h</a>&quot;</span>
<a name="l00075"></a>00075 <span class="comment">/*END_INCLUDE*/</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">/*START_STATIC*/</span>
<a name="l00078"></a>00078 <span class="keyword">static</span> gulong gsb_file_save_account_icon_part ( gulong iterator,
<a name="l00079"></a>00079                         gulong *length_calculated,
<a name="l00080"></a>00080                         gchar **file_content );
<a name="l00081"></a>00081 <span class="keyword">static</span> gulong gsb_file_save_account_part ( gulong iterator,
<a name="l00082"></a>00082                         gulong *length_calculated,
<a name="l00083"></a>00083                         gchar **file_content );
<a name="l00084"></a>00084 <span class="keyword">static</span> gulong gsb_file_save_archive_part ( gulong iterator,
<a name="l00085"></a>00085                         gulong *length_calculated,
<a name="l00086"></a>00086                         gchar **file_content );
<a name="l00087"></a>00087 <span class="keyword">static</span> gulong gsb_file_save_bank_part ( gulong iterator,
<a name="l00088"></a>00088                         gulong *length_calculated,
<a name="l00089"></a>00089                         gchar **file_content );
<a name="l00090"></a>00090 <span class="keyword">static</span> gulong gsb_file_save_bet_part ( gulong iterator,
<a name="l00091"></a>00091                         gulong *length_calculated,
<a name="l00092"></a>00092                         gchar **file_content );
<a name="l00093"></a>00093 <span class="keyword">static</span> gulong gsb_file_save_color_part ( gulong iterator,
<a name="l00094"></a>00094                         gulong *length_calculated,
<a name="l00095"></a>00095                         gchar **file_content,
<a name="l00096"></a>00096                         gint archive_number );
<a name="l00097"></a>00097 <span class="keyword">static</span> gulong gsb_file_save_currency_link_part ( gulong iterator,
<a name="l00098"></a>00098                         gulong *length_calculated,
<a name="l00099"></a>00099                         gchar **file_content );
<a name="l00100"></a>00100 <span class="keyword">static</span> gulong gsb_file_save_currency_part ( gulong iterator,
<a name="l00101"></a>00101                         gulong *length_calculated,
<a name="l00102"></a>00102                         gchar **file_content );
<a name="l00103"></a>00103 <span class="keyword">static</span> gulong gsb_file_save_financial_year_part ( gulong iterator,
<a name="l00104"></a>00104                         gulong *length_calculated,
<a name="l00105"></a>00105                         gchar **file_content );
<a name="l00106"></a>00106 <span class="keyword">static</span> gulong gsb_file_save_general_part ( gulong iterator,
<a name="l00107"></a>00107                         gulong *length_calculated,
<a name="l00108"></a>00108                         gchar **file_content,
<a name="l00109"></a>00109                         gint archive_number );
<a name="l00110"></a>00110 <span class="keyword">static</span> gulong gsb_file_save_import_rule_part ( gulong iterator,
<a name="l00111"></a>00111                         gulong *length_calculated,
<a name="l00112"></a>00112                         gchar **file_content );
<a name="l00113"></a>00113 <span class="keyword">static</span> gulong gsb_file_save_logo_part ( gulong iterator,
<a name="l00114"></a>00114                         gulong *length_calculated,
<a name="l00115"></a>00115                         gchar **file_content );
<a name="l00116"></a>00116 <span class="keyword">static</span> gulong gsb_file_save_partial_balance_part ( gulong iterator,
<a name="l00117"></a>00117                         gulong *length_calculated,
<a name="l00118"></a>00118                         gchar **file_content );
<a name="l00119"></a>00119 <span class="keyword">static</span> gulong gsb_file_save_party_part ( gulong iterator,
<a name="l00120"></a>00120                         gulong *length_calculated,
<a name="l00121"></a>00121                         gchar **file_content );
<a name="l00122"></a>00122 <span class="keyword">static</span> gulong gsb_file_save_payment_part ( gulong iterator,
<a name="l00123"></a>00123                         gulong *length_calculated,
<a name="l00124"></a>00124                         gchar **file_content );
<a name="l00125"></a>00125 <span class="keyword">static</span> gulong gsb_file_save_print_part ( gulong iterator,
<a name="l00126"></a>00126                         gulong *length_calculated,
<a name="l00127"></a>00127                         gchar **file_content,
<a name="l00128"></a>00128                         gint archive_number );
<a name="l00129"></a>00129 <span class="keyword">static</span> gulong gsb_file_save_reconcile_part ( gulong iterator,
<a name="l00130"></a>00130                         gulong *length_calculated,
<a name="l00131"></a>00131                         gchar **file_content );
<a name="l00132"></a>00132 <span class="keyword">static</span> gulong gsb_file_save_scheduled_part ( gulong iterator,
<a name="l00133"></a>00133                         gulong *length_calculated,
<a name="l00134"></a>00134                         gchar **file_content );
<a name="l00135"></a>00135 <span class="keyword">static</span> gulong gsb_file_save_transaction_part ( gulong iterator,
<a name="l00136"></a>00136                         gulong *length_calculated,
<a name="l00137"></a>00137                         gchar **file_content,
<a name="l00138"></a>00138                         gint archive_number );
<a name="l00139"></a>00139 <span class="comment">/*END_STATIC*/</span>
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">/*START_EXTERN*/</span>
<a name="l00143"></a>00143 <span class="keyword">extern</span> gchar *<a class="code" href="affichage_8c.html#ab7ec5b8a1b4dca10b71bfe0364eb7248">adresse_commune</a>;
<a name="l00144"></a>00144 <span class="keyword">extern</span> gchar *<a class="code" href="affichage_8c.html#a5495a13fee46daf1634623fe4e63f99a">adresse_secondaire</a>;
<a name="l00145"></a>00145 <span class="keyword">extern</span> gint <a class="code" href="gsb__calendar_8c.html#ab762c5bee8904fe3e83e8c2dfdecd94d">affichage_echeances</a>;
<a name="l00146"></a>00146 <span class="keyword">extern</span> gint <a class="code" href="gsb__calendar_8c.html#aa8e493eac3d096f6914e1551552c590a">affichage_echeances_perso_nb_libre</a>;
<a name="l00147"></a>00147 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a881db8e6c000ad504ff0183a674cb196">archive_background_color</a>;
<a name="l00148"></a>00148 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#aa809fea280ab9cef6e16774b54a573ae">calendar_entry_color</a>;
<a name="l00149"></a>00149 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a9c6b0a0f3037804c43aa435dbb98f7ec">couleur_bet_division</a>;
<a name="l00150"></a>00150 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#af7f95b1eb6717e97b624b506258fd893">couleur_bet_future</a>;
<a name="l00151"></a>00151 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#abf473d007a5860d19e62be3c33654a48">couleur_bet_transfert</a>;
<a name="l00152"></a>00152 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[2];
<a name="l00153"></a>00153 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a4119417896b5652f640ead3795baac52">couleur_grise</a>;
<a name="l00154"></a>00154 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a668e8ab17ed4a22af1464c091c2668c2">couleur_jour</a>;
<a name="l00155"></a>00155 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a35e437a6db69c9160eeb81674971108b">couleur_selection</a>;
<a name="l00156"></a>00156 <span class="keyword">extern</span> gint <a class="code" href="affichage__liste_8c.html#a36eb372c7727c89f6ed96a3756a28740">display_one_line</a>;
<a name="l00157"></a>00157 <span class="keyword">extern</span> gint <a class="code" href="affichage__liste_8c.html#aa74165188c76a0e2ba64239b2236841c">display_three_lines</a>;
<a name="l00158"></a>00158 <span class="keyword">extern</span> gint <a class="code" href="affichage__liste_8c.html#a420ccd553ba703004c7415ba8ee25630">display_two_lines</a>;
<a name="l00159"></a>00159 <span class="keyword">extern</span> gchar *<a class="code" href="affichage_8c.html#ac7526506154f32a987a2cd923aba4d7c">initial_file_title</a>;
<a name="l00160"></a>00160 <span class="keyword">extern</span> gint <a class="code" href="categories__onglet_8c.html#a8f609654dcfbbcaa6791bcee83d6473d">no_devise_totaux_categ</a>;
<a name="l00161"></a>00161 <span class="keyword">extern</span> gint <a class="code" href="gsb__currency__config_8c.html#a2f4b5073521c582e1bc8941533026556">no_devise_totaux_ib</a>;
<a name="l00162"></a>00162 <span class="keyword">extern</span> gint <a class="code" href="gsb__currency__config_8c.html#a3add720d0e0b25caa37589bcfb879c6f">no_devise_totaux_tiers</a>;
<a name="l00163"></a>00163 <span class="keyword">extern</span> gint <a class="code" href="gsb__file__load_8c.html#a8278ca506ea616623cd8cdc764188ee9">scheduler_col_width</a>[<a class="code" href="gsb__scheduler__list_8h.html#af73ad30e2c80f3dc63b6f3495ce5ed26">SCHEDULER_COL_VISIBLE_COLUMNS</a>];
<a name="l00164"></a>00164 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#abc4f631d953e2be68189a6fbcf55cd1d">split_background</a>;
<a name="l00165"></a>00165 <span class="keyword">extern</span> gint <a class="code" href="affichage__liste_8c.html#a0c444565adac369ff42631d4b7b7e6bb">tab_affichage_ope</a>[<a class="code" href="custom__list_8h.html#a738de041650943c6854c2fa523b2e2e5">TRANSACTION_LIST_ROWS_NB</a>][<a class="code" href="custom__list_8h.html#a94bc00a237b4803e1096242436b77bcf">CUSTOM_MODEL_VISIBLE_COLUMNS</a>];
<a name="l00166"></a>00166 <span class="keyword">extern</span> GdkColor <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[2];
<a name="l00167"></a>00167 <span class="keyword">extern</span> gint <a class="code" href="gsb__file__load_8c.html#a6e5e85a5f63608656ce9709950bb08e6">transaction_col_width</a>[<a class="code" href="custom__list_8h.html#a5120df6c303afc3c01e77218f39b80b5">CUSTOM_MODEL_N_VISIBLES_COLUMN</a>];
<a name="l00168"></a>00168 <span class="keyword">extern</span> gint <a class="code" href="bet__tab_8c.html#abd82865835fd6c5fcfe97283dbfd0648">valeur_echelle_recherche_date_import</a>;
<a name="l00169"></a>00169 <span class="comment">/*END_EXTERN*/</span>
<a name="l00170"></a>00170 
<a name="l00185"></a><a class="code" href="gsb__file__save_8h.html#a07b27e36f7166f5eae93c162039a78a7">00185</a> gboolean <a class="code" href="gsb__file__save_8c.html#a07b27e36f7166f5eae93c162039a78a7">gsb_file_save_save_file</a> ( <span class="keyword">const</span> gchar *filename,
<a name="l00186"></a>00186                         gboolean compress,
<a name="l00187"></a>00187                         gint archive_number )
<a name="l00188"></a>00188 {
<a name="l00189"></a>00189     gint do_chmod;
<a name="l00190"></a>00190     gulong iterator;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     gulong length_calculated;
<a name="l00193"></a>00193     gchar *file_content;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     gint <a class="code" href="gsb__file__load_8c.html#ab34360bda14f29e99791e67f236b7d91">general_part</a>;
<a name="l00196"></a>00196     gint <a class="code" href="gsb__file__load_8c.html#a614e01231c829ffc54059d7d1c6f7798">account_part</a>;
<a name="l00197"></a>00197     gint transaction_part;
<a name="l00198"></a>00198     gint party_part;
<a name="l00199"></a>00199     gint category_part;
<a name="l00200"></a>00200     gint budgetary_part;
<a name="l00201"></a>00201     gint currency_part;
<a name="l00202"></a>00202     gint currency_link_part;
<a name="l00203"></a>00203     gint bank_part;
<a name="l00204"></a>00204     gint financial_year_part;
<a name="l00205"></a>00205     gint archive_part;
<a name="l00206"></a>00206     gint reconcile_part;
<a name="l00207"></a>00207     gint <a class="code" href="gsb__file__load_8c.html#abb7c9a52142faa6ab5fd6c514f834058">report_part</a>;
<a name="l00208"></a>00208     gint import_rule_part;
<a name="l00209"></a>00209     gint partial_balance_part;
<a name="l00210"></a>00210     gint logo_part;
<a name="l00211"></a>00211     gint account_icon_part;
<a name="l00212"></a>00212     gint bet_part;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     <span class="keyword">struct </span>stat buf;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     <a class="code" href="structgsb__plugin.html">gsb_plugin</a> * plugin;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     <a class="code" href="erreur_8h.html#a17bfffc4306bc76edd79e060a8947dc4">devel_debug</a> (filename);
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="keywordflow">if</span> (g_file_test ( filename,
<a name="l00221"></a>00221                       G_FILE_TEST_EXISTS ))
<a name="l00222"></a>00222     {
<a name="l00223"></a>00223         <span class="comment">/* the file exists, we need to get the chmod values</span>
<a name="l00224"></a>00224 <span class="comment">         * because gtk will overwrite it */</span>
<a name="l00225"></a>00225         <span class="keywordflow">if</span> (stat (filename, &amp;buf) == -1)
<a name="l00226"></a>00226             <span class="comment">/* stat couldn&#39;t get the information, so do as a new file</span>
<a name="l00227"></a>00227 <span class="comment">             * and we will set the good chmod */</span>
<a name="l00228"></a>00228             do_chmod = TRUE;
<a name="l00229"></a>00229         <span class="keywordflow">else</span>
<a name="l00230"></a>00230             do_chmod = FALSE;
<a name="l00231"></a>00231     }
<a name="l00232"></a>00232     <span class="keywordflow">else</span>
<a name="l00233"></a>00233         <span class="comment">/* the file doesn&#39;t exist, so we will set the only user chmod */</span>
<a name="l00234"></a>00234         do_chmod = TRUE;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236     <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a1e291fdcb0a4837a3e7f5ced3dae2fce">en_train_de_sauvegarder</a> = 1;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="comment">/* we begin to try to reserve enough memory to make the entire file</span>
<a name="l00239"></a>00239 <span class="comment">     * if not enough, we will make it growth later</span>
<a name="l00240"></a>00240 <span class="comment">     * the data below are about the memory to take for each part and for 1 of this part</span>
<a name="l00241"></a>00241 <span class="comment">     * with that i think we will allocate enough memory in one time but not too much */</span>
<a name="l00242"></a>00242 
<a name="l00243"></a>00243     general_part = 900;
<a name="l00244"></a>00244     account_part = 1200;
<a name="l00245"></a>00245     transaction_part = 350;
<a name="l00246"></a>00246     party_part = 100;
<a name="l00247"></a>00247     category_part = 500;
<a name="l00248"></a>00248     budgetary_part = 500;
<a name="l00249"></a>00249     currency_part = 100;
<a name="l00250"></a>00250     currency_link_part = 100;
<a name="l00251"></a>00251     bank_part = 300;
<a name="l00252"></a>00252     financial_year_part = 100;
<a name="l00253"></a>00253     archive_part = 120;
<a name="l00254"></a>00254     reconcile_part = 50;
<a name="l00255"></a>00255     report_part = 2500;
<a name="l00256"></a>00256     import_rule_part = 50;
<a name="l00257"></a>00257     partial_balance_part = 50;
<a name="l00258"></a>00258     logo_part = 65536;
<a name="l00259"></a>00259     account_icon_part = 4048;
<a name="l00260"></a>00260     bet_part = 250;
<a name="l00261"></a>00261     
<a name="l00262"></a>00262     length_calculated = general_part
<a name="l00263"></a>00263         + account_part * <a class="code" href="gsb__data__account_8c.html#a56c9a589563db8c15800e41378908b27">gsb_data_account_get_accounts_amount</a> ()
<a name="l00264"></a>00264         + transaction_part * g_slist_length ( <a class="code" href="gsb__data__transaction_8c.html#aa54aeb205f29c2272154b2998fea490b">gsb_data_transaction_get_complete_transactions_list</a> ())
<a name="l00265"></a>00265         + party_part * g_slist_length ( <a class="code" href="gsb__data__payee_8c.html#a2fe0b4b22dcae74be865456e5f7c9995">gsb_data_payee_get_payees_list</a> ())
<a name="l00266"></a>00266         + category_part * g_slist_length ( <a class="code" href="gsb__data__category_8c.html#a818774b4775a516ebcffe7bbea3fbaeb">gsb_data_category_get_categories_list</a> ())
<a name="l00267"></a>00267         + budgetary_part * g_slist_length ( <a class="code" href="gsb__data__budget_8c.html#a5c36c8f11ed3cd9c03a97c89a27fbc5b">gsb_data_budget_get_budgets_list</a> ())
<a name="l00268"></a>00268         + currency_part * g_slist_length ( <a class="code" href="gsb__data__currency_8c.html#a147d01fc4583c3c4c34189cff9611db1">gsb_data_currency_get_currency_list</a> () )
<a name="l00269"></a>00269         + currency_link_part * g_slist_length ( <a class="code" href="gsb__data__currency__link_8c.html#afabcb6dbde8dd4e991d69acf4c515ff6">gsb_data_currency_link_get_currency_link_list</a> ())
<a name="l00270"></a>00270         + bank_part * g_slist_length ( <a class="code" href="gsb__data__bank_8c.html#a0e4a0af8810f138e45e0965d99f17f31">gsb_data_bank_get_bank_list</a> ())
<a name="l00271"></a>00271         + financial_year_part * g_slist_length (<a class="code" href="gsb__data__fyear_8c.html#a981e70c384f682f93195b489ca06e7f5">gsb_data_fyear_get_fyears_list</a> ())
<a name="l00272"></a>00272         + archive_part * g_slist_length (<a class="code" href="gsb__data__archive_8c.html#a7d5b3a8b5e99a9bbe14f526ab3d1936b">gsb_data_archive_get_archives_list</a> ())
<a name="l00273"></a>00273         + reconcile_part * g_list_length (<a class="code" href="gsb__data__reconcile_8c.html#aa78fc612a3b6c450f074b879633c6db3">gsb_data_reconcile_get_reconcile_list</a> ())
<a name="l00274"></a>00274         + report_part * g_slist_length ( <a class="code" href="gsb__data__report_8c.html#a7a55a8189e9f34c587309954e2acbfb7">gsb_data_report_get_report_list</a> ())
<a name="l00275"></a>00275         + import_rule_part * g_slist_length ( <a class="code" href="gsb__data__import__rule_8c.html#a5fecbacee14cb68d5e2dfa19cd5b0247">gsb_data_import_rule_get_list</a> ())
<a name="l00276"></a>00276     + partial_balance_part * g_slist_length ( <a class="code" href="gsb__data__partial__balance_8c.html#a09c15eba9140e6063aeaeb754481da19">gsb_data_partial_balance_get_list</a> ())
<a name="l00277"></a>00277     + logo_part
<a name="l00278"></a>00278     + account_icon_part * g_slist_length ( <a class="code" href="gsb__select__icon_8c.html#a7072d49b909a1b5b537eacfaae4eed60">gsb_select_icon_list_accounts_icon</a> () )
<a name="l00279"></a>00279     + bet_part;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     iterator = 0;
<a name="l00282"></a>00282     file_content = g_malloc0 ( length_calculated );
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     <span class="comment">/* begin the file whith xml markup */</span>
<a name="l00285"></a>00285     iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l00286"></a>00286                                            &amp;length_calculated,
<a name="l00287"></a>00287                                            &amp;file_content,
<a name="l00288"></a>00288                                            <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (<span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;\n&lt;Grisbi&gt;\n&quot;</span>));
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     iterator = gsb_file_save_general_part ( iterator,
<a name="l00291"></a>00291                                             &amp;length_calculated,
<a name="l00292"></a>00292                                             &amp;file_content,
<a name="l00293"></a>00293                                             archive_number );
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     iterator = gsb_file_save_color_part ( iterator,
<a name="l00296"></a>00296                                           &amp;length_calculated,
<a name="l00297"></a>00297                                           &amp;file_content,
<a name="l00298"></a>00298                                           archive_number );
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     iterator = gsb_file_save_print_part ( iterator,
<a name="l00301"></a>00301                                           &amp;length_calculated,
<a name="l00302"></a>00302                                           &amp;file_content,
<a name="l00303"></a>00303                                           archive_number );
<a name="l00304"></a>00304 
<a name="l00305"></a>00305      iterator = gsb_file_save_currency_part ( iterator,
<a name="l00306"></a>00306                                              &amp;length_calculated,
<a name="l00307"></a>00307                                              &amp;file_content );
<a name="l00308"></a>00308 
<a name="l00309"></a>00309     iterator = gsb_file_save_account_part ( iterator,
<a name="l00310"></a>00310                                             &amp;length_calculated,
<a name="l00311"></a>00311                                             &amp;file_content );
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     iterator = gsb_file_save_payment_part ( iterator,
<a name="l00314"></a>00314                                             &amp;length_calculated,
<a name="l00315"></a>00315                                             &amp;file_content );
<a name="l00316"></a>00316 
<a name="l00317"></a>00317     iterator = gsb_file_save_transaction_part ( iterator,
<a name="l00318"></a>00318                                                 &amp;length_calculated,
<a name="l00319"></a>00319                                                 &amp;file_content,
<a name="l00320"></a>00320                                                 archive_number );
<a name="l00321"></a>00321 
<a name="l00322"></a>00322     <span class="comment">/* if we export an archive, no scheduled transactions */</span>
<a name="l00323"></a>00323     <span class="keywordflow">if</span> (!archive_number)
<a name="l00324"></a>00324         iterator = gsb_file_save_scheduled_part ( iterator,
<a name="l00325"></a>00325                                                   &amp;length_calculated,
<a name="l00326"></a>00326                                                   &amp;file_content );
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     iterator = gsb_file_save_party_part ( iterator,
<a name="l00329"></a>00329                                           &amp;length_calculated,
<a name="l00330"></a>00330                                           &amp;file_content );
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     iterator = <a class="code" href="gsb__file__save_8c.html#af255442e956aa95c1b2c223b4cd07481">gsb_file_save_category_part</a> ( iterator,
<a name="l00333"></a>00333                                              &amp;length_calculated,
<a name="l00334"></a>00334                                              &amp;file_content );
<a name="l00335"></a>00335 
<a name="l00336"></a>00336     iterator = <a class="code" href="gsb__file__save_8c.html#a46e773fc842889454bd36ed6e93ac4af">gsb_file_save_budgetary_part</a> ( iterator,
<a name="l00337"></a>00337                                               &amp;length_calculated,
<a name="l00338"></a>00338                                               &amp;file_content );
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     iterator = gsb_file_save_currency_link_part ( iterator,
<a name="l00341"></a>00341                                                   &amp;length_calculated,
<a name="l00342"></a>00342                                                   &amp;file_content );
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     iterator = gsb_file_save_bank_part ( iterator,
<a name="l00345"></a>00345                                          &amp;length_calculated,
<a name="l00346"></a>00346                                          &amp;file_content );
<a name="l00347"></a>00347 
<a name="l00348"></a>00348     iterator = gsb_file_save_financial_year_part ( iterator,
<a name="l00349"></a>00349                                                    &amp;length_calculated,
<a name="l00350"></a>00350                                                    &amp;file_content );
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="comment">/* if we export an archive, no archive information */</span>
<a name="l00353"></a>00353     <span class="keywordflow">if</span> (!archive_number)
<a name="l00354"></a>00354         iterator = gsb_file_save_archive_part ( iterator,
<a name="l00355"></a>00355                                                 &amp;length_calculated,
<a name="l00356"></a>00356                                                 &amp;file_content );
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     iterator = gsb_file_save_reconcile_part ( iterator,
<a name="l00359"></a>00359                                               &amp;length_calculated,
<a name="l00360"></a>00360                                               &amp;file_content );
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     iterator = gsb_file_save_import_rule_part ( iterator,
<a name="l00363"></a>00363                                                 &amp;length_calculated,
<a name="l00364"></a>00364                                                 &amp;file_content );
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     iterator = gsb_file_save_partial_balance_part ( iterator,
<a name="l00367"></a>00367                                                 &amp;length_calculated,
<a name="l00368"></a>00368                                                 &amp;file_content );
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     iterator = gsb_file_save_bet_part ( iterator,
<a name="l00371"></a>00371                         &amp;length_calculated,
<a name="l00372"></a>00372                         &amp;file_content );
<a name="l00373"></a>00373 
<a name="l00374"></a>00374     iterator = <a class="code" href="gsb__file__save_8c.html#a3699f6e4d341e96824d32c5df54f6e8a">gsb_file_save_report_part</a> ( iterator,
<a name="l00375"></a>00375                                            &amp;length_calculated,
<a name="l00376"></a>00376                                            &amp;file_content,
<a name="l00377"></a>00377                                            FALSE );
<a name="l00378"></a>00378 
<a name="l00379"></a>00379     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a2228cfa5b20058093f1a82e9c50d1b0a">utilise_logo</a> &amp;&amp; <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#abfc8db076ca582b5323f585f21698ca8">is_pixmaps_dir</a> == FALSE )
<a name="l00380"></a>00380         iterator = gsb_file_save_logo_part ( iterator,
<a name="l00381"></a>00381                                            &amp;length_calculated,
<a name="l00382"></a>00382                                            &amp;file_content );
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     <span class="keywordflow">if</span> ( g_slist_length ( <a class="code" href="gsb__select__icon_8c.html#a7072d49b909a1b5b537eacfaae4eed60">gsb_select_icon_list_accounts_icon</a> () ) &gt; 0 )
<a name="l00385"></a>00385         iterator = gsb_file_save_account_icon_part ( iterator,
<a name="l00386"></a>00386                                            &amp;length_calculated,
<a name="l00387"></a>00387                                            &amp;file_content );
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <span class="comment">/* finish the file */</span>
<a name="l00390"></a>00390     iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l00391"></a>00391                                            &amp;length_calculated,
<a name="l00392"></a>00392                                            &amp;file_content,
<a name="l00393"></a>00393                                            <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (<span class="stringliteral">&quot;&lt;/Grisbi&gt;&quot;</span>));
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <span class="comment">/* crypt the file if asked */</span>
<a name="l00396"></a>00396     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a5d00886877a537e1acf2ca7eb8d247f6">crypt_file</a> )
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398         <span class="keywordflow">if</span> ( ( plugin = <a class="code" href="gsb__plugins_8c.html#ae8e42c4d6f667c7e023e555d604f42cf">gsb_plugin_find</a> ( <span class="stringliteral">&quot;openssl&quot;</span> ) ) )
<a name="l00399"></a>00399         {
<a name="l00400"></a>00400             gint (*crypt_function) ( <span class="keyword">const</span> gchar *, gchar **, gboolean, gulong );
<a name="l00401"></a>00401             
<a name="l00402"></a>00402             crypt_function = (gpointer) plugin -&gt; plugin_run;
<a name="l00403"></a>00403             iterator = crypt_function ( filename, &amp;file_content, TRUE, iterator );      
<a name="l00404"></a>00404             <span class="keywordflow">if</span> ( ! iterator )
<a name="l00405"></a>00405                 <span class="keywordflow">return</span> FALSE;
<a name="l00406"></a>00406         }
<a name="l00407"></a>00407         <span class="keywordflow">else</span>
<a name="l00408"></a>00408         {
<a name="l00409"></a>00409             <a class="code" href="dialog_8c.html#a194ffa6e8e89cc8fb7fbfbc41109fe1e">dialogue_error_hint</a> ( _(<span class="stringliteral">&quot;Grisbi was unable to load required plugin to &quot;</span>
<a name="l00410"></a>00410                                     <span class="stringliteral">&quot;handle that file.\n\n&quot;</span>
<a name="l00411"></a>00411                                     <span class="stringliteral">&quot;Please make sure if is installed (i.e. check &quot;</span>
<a name="l00412"></a>00412                                     <span class="stringliteral">&quot;that &#39;grisbi-ssl&#39; package is installed) and &quot;</span>
<a name="l00413"></a>00413                                     <span class="stringliteral">&quot;try again.&quot;</span>),
<a name="l00414"></a>00414                                   _(<span class="stringliteral">&quot;Encryption plugin not found.&quot;</span> ) );
<a name="l00415"></a>00415             <span class="keywordflow">return</span> FALSE;
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418     
<a name="l00419"></a>00419     <span class="comment">/* the file is in memory, we can save it */</span>
<a name="l00420"></a>00420     <span class="comment">/* i didn&#39;t succeed to save a &quot;proper&quot; file with zlib without compression,</span>
<a name="l00421"></a>00421 <span class="comment">     * it always append some extra characters, so use glib without compression, and</span>
<a name="l00422"></a>00422 <span class="comment">     * zlib if compression */</span>
<a name="l00423"></a>00423     <span class="keywordflow">if</span> (compress)
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         gzFile grisbi_file;
<a name="l00426"></a>00426         grisbi_file = gzopen (filename, <span class="stringliteral">&quot;wb9&quot;</span>);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428         <span class="keywordflow">if</span> ( !grisbi_file
<a name="l00429"></a>00429              ||
<a name="l00430"></a>00430              !gzwrite ( grisbi_file,
<a name="l00431"></a>00431                         file_content,
<a name="l00432"></a>00432                         iterator ))
<a name="l00433"></a>00433         {
<a name="l00434"></a>00434             gchar* tmpstr = g_strdup_printf ( _(<span class="stringliteral">&quot;Cannot save file &#39;%s&#39;: %s&quot;</span>),
<a name="l00435"></a>00435                                               filename,
<a name="l00436"></a>00436                                               g_strerror(errno) );
<a name="l00437"></a>00437             <a class="code" href="dialog_8c.html#aa88d9d93c78818a177e9a14eff15f360">dialogue_error</a> ( tmpstr );
<a name="l00438"></a>00438             g_free ( tmpstr );
<a name="l00439"></a>00439             g_free ( file_content);
<a name="l00440"></a>00440             <span class="keywordflow">return</span> ( FALSE );
<a name="l00441"></a>00441         }
<a name="l00442"></a>00442         gzclose (grisbi_file);
<a name="l00443"></a>00443     }
<a name="l00444"></a>00444     <span class="keywordflow">else</span>
<a name="l00445"></a>00445     {
<a name="l00446"></a>00446         GError *error = NULL;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448         <span class="keywordflow">if</span> (!g_file_set_contents ( filename,
<a name="l00449"></a>00449                                    file_content,
<a name="l00450"></a>00450                                    iterator, &amp;error ))
<a name="l00451"></a>00451         {
<a name="l00452"></a>00452             gchar* tmpstr = g_strdup_printf ( _(<span class="stringliteral">&quot;Cannot save file &#39;%s&#39;: %s&quot;</span>),
<a name="l00453"></a>00453                                               filename,
<a name="l00454"></a>00454                                               error -&gt; message);
<a name="l00455"></a>00455             <a class="code" href="dialog_8c.html#aa88d9d93c78818a177e9a14eff15f360">dialogue_error</a> ( tmpstr );
<a name="l00456"></a>00456             g_free ( tmpstr );
<a name="l00457"></a>00457             g_free ( file_content);
<a name="l00458"></a>00458             g_error_free (error);
<a name="l00459"></a>00459             <span class="keywordflow">return</span> ( FALSE );
<a name="l00460"></a>00460         }
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463     <span class="comment">/* if it&#39;s a new file, we set the permission */</span>
<a name="l00464"></a>00464     <span class="keywordflow">if</span> ( do_chmod )
<a name="l00465"></a>00465         {
<a name="l00466"></a>00466         <span class="comment">/* it&#39;s a new file or stat couldn&#39;t find the permissions,</span>
<a name="l00467"></a>00467 <span class="comment">         * so set only user can see the file by default */</span>
<a name="l00468"></a>00468 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>        _chmod ( filename, _S_IREAD | _S_IWRITE );
<a name="l00470"></a>00470 <span class="preprocessor">#else</span>
<a name="l00471"></a>00471 <span class="preprocessor"></span>        chmod ( filename, S_IRUSR | S_IWUSR );
<a name="l00472"></a>00472 <span class="preprocessor">#endif </span><span class="comment">/*_MSC_VER */</span>
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474     <span class="keywordflow">else</span>
<a name="l00475"></a>00475     {
<a name="l00476"></a>00476         <span class="comment">/* it&#39;s not a new file but gtk overwrite the permissions</span>
<a name="l00477"></a>00477 <span class="comment">         * so need to re-set the good permissions saved before */</span>
<a name="l00478"></a>00478 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00479"></a>00479 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (_chmod (filename, buf.st_mode) == -1)
<a name="l00480"></a>00480         {
<a name="l00481"></a>00481             <span class="comment">/* we couldn&#39;t set the chmod, set the default permission */</span>
<a name="l00482"></a>00482                 _chmod ( filename, _S_IREAD | _S_IWRITE );
<a name="l00483"></a>00483         }
<a name="l00484"></a>00484 <span class="preprocessor">#else</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (chmod (filename, buf.st_mode) == -1)
<a name="l00486"></a>00486         {
<a name="l00487"></a>00487             <span class="comment">/* we couldn&#39;t set the chmod, set the default permission */</span>
<a name="l00488"></a>00488                 chmod ( filename, S_IRUSR | S_IWUSR );
<a name="l00489"></a>00489         }
<a name="l00490"></a>00490 <span class="preprocessor">#endif </span><span class="comment">/*_MSC_VER */</span>
<a name="l00491"></a>00491     }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493     <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a1e291fdcb0a4837a3e7f5ced3dae2fce">en_train_de_sauvegarder</a> = 0;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <span class="keywordflow">return</span> ( TRUE );
<a name="l00496"></a>00496 }
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 
<a name="l00511"></a><a class="code" href="gsb__file__save_8h.html#a53abd581b16b2e5974e4b7b8cbfbd321">00511</a> gulong <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( gulong iterator,
<a name="l00512"></a>00512                         gulong *length_calculated,
<a name="l00513"></a>00513                         gchar **file_content,
<a name="l00514"></a>00514                         gchar *new_string )
<a name="l00515"></a>00515 {
<a name="l00516"></a>00516     <span class="keywordflow">if</span> ( !new_string )
<a name="l00517"></a>00517         <span class="keywordflow">return</span> iterator;
<a name="l00518"></a>00518     
<a name="l00519"></a>00519     <span class="comment">/* we check first if we don&#39;t go throw the upper limit */</span>
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     <span class="keywordflow">while</span> ( (iterator + strlen (new_string)) &gt;= *length_calculated )
<a name="l00522"></a>00522     {
<a name="l00523"></a>00523         <span class="comment">/* we change the size by adding half of length_calculated */</span>
<a name="l00524"></a>00524 
<a name="l00525"></a>00525         *length_calculated = 1.5 * *length_calculated;
<a name="l00526"></a>00526         *file_content = g_realloc ( *file_content,
<a name="l00527"></a>00527                                   *length_calculated );
<a name="l00528"></a>00528 
<a name="l00529"></a>00529         <a class="code" href="erreur_8h.html#a4538fd4861a4ef0fdec1e42edd2ebf2b">notice_debug</a> ( <span class="stringliteral">&quot;The length calculated for saving file should be bigger?&quot;</span> );
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531 
<a name="l00532"></a>00532     memcpy ( *file_content + iterator,
<a name="l00533"></a>00533              new_string,
<a name="l00534"></a>00534              strlen (new_string));
<a name="l00535"></a>00535     iterator = iterator + strlen (new_string);
<a name="l00536"></a>00536     g_free (new_string);
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     <span class="keywordflow">return</span> iterator;
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 
<a name="l00542"></a>00542 
<a name="l00553"></a><a class="code" href="gsb__file__save_8h.html#afab094df64a133cffdeb914484e1e52d">00553</a> <span class="keyword">const</span> gchar *<a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( <span class="keyword">const</span> gchar *<span class="keywordtype">string</span> )
<a name="l00554"></a>00554 {
<a name="l00555"></a>00555     <span class="keywordflow">if</span> ( <span class="keywordtype">string</span> &amp;&amp; strlen ( <span class="keywordtype">string</span> ) )
<a name="l00556"></a>00556         <span class="keywordflow">return</span> string;
<a name="l00557"></a>00557     <span class="keywordflow">else</span>
<a name="l00558"></a>00558         <span class="keywordflow">return</span> <span class="stringliteral">&quot;(null)&quot;</span>;
<a name="l00559"></a>00559 }
<a name="l00560"></a>00560 
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 
<a name="l00573"></a>00573 gulong gsb_file_save_general_part ( gulong iterator,
<a name="l00574"></a>00574                         gulong *length_calculated,
<a name="l00575"></a>00575                         gchar **file_content,
<a name="l00576"></a>00576                         gint archive_number )
<a name="l00577"></a>00577 {
<a name="l00578"></a>00578     gchar *first_string_to_free;
<a name="l00579"></a>00579     gchar *second_string_to_free;
<a name="l00580"></a>00580     gint i,j;
<a name="l00581"></a>00581     gchar *transactions_view;
<a name="l00582"></a>00582     gchar *scheduler_column_width_write;
<a name="l00583"></a>00583     gchar *transaction_column_width_write;
<a name="l00584"></a>00584     gchar *new_string;
<a name="l00585"></a>00585     gchar *tmpstr;
<a name="l00586"></a>00586     gchar *skipped_lines_string;
<a name="l00587"></a>00587     gboolean is_archive = FALSE;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589     <span class="comment">/* prepare stuff to save general information */</span>
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="comment">/* prepare transactions_view */</span>
<a name="l00592"></a>00592     transactions_view = NULL;
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="keywordflow">for</span> ( i=0 ; i&lt;<a class="code" href="custom__list_8h.html#a738de041650943c6854c2fa523b2e2e5">TRANSACTION_LIST_ROWS_NB</a> ; i++ )
<a name="l00595"></a>00595         <span class="keywordflow">for</span> ( j=0 ; j&lt; <a class="code" href="custom__list_8h.html#a94bc00a237b4803e1096242436b77bcf">CUSTOM_MODEL_VISIBLE_COLUMNS</a> ; j++ )
<a name="l00596"></a>00596             <span class="keywordflow">if</span> ( transactions_view )
<a name="l00597"></a>00597             {
<a name="l00598"></a>00598                 transactions_view = g_strconcat ( first_string_to_free = transactions_view,
<a name="l00599"></a>00599                                                   <span class="stringliteral">&quot;-&quot;</span>,
<a name="l00600"></a>00600                                                   second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="affichage__liste_8c.html#a0c444565adac369ff42631d4b7b7e6bb">tab_affichage_ope</a>[i][j] ),
<a name="l00601"></a>00601                                                   NULL );
<a name="l00602"></a>00602                 g_free (first_string_to_free);
<a name="l00603"></a>00603                 g_free (second_string_to_free);
<a name="l00604"></a>00604             }
<a name="l00605"></a>00605             <span class="keywordflow">else</span>
<a name="l00606"></a>00606                 transactions_view = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="affichage__liste_8c.html#a0c444565adac369ff42631d4b7b7e6bb">tab_affichage_ope</a>[i][j] );
<a name="l00607"></a>00607 
<a name="l00608"></a>00608     <span class="comment">/* prepare transaction_column_width_write */</span>
<a name="l00609"></a>00609     transaction_column_width_write = NULL;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611     <span class="keywordflow">for</span> ( i=0 ; i&lt;CUSTOM_MODEL_VISIBLE_COLUMNS ; i++ )
<a name="l00612"></a>00612         <span class="keywordflow">if</span> ( transaction_column_width_write )
<a name="l00613"></a>00613         {
<a name="l00614"></a>00614             transaction_column_width_write = g_strconcat ( first_string_to_free = transaction_column_width_write,
<a name="l00615"></a>00615                                                          <span class="stringliteral">&quot;-&quot;</span>,
<a name="l00616"></a>00616                                                          second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__file__load_8c.html#a6e5e85a5f63608656ce9709950bb08e6">transaction_col_width</a>[i] ),
<a name="l00617"></a>00617                                                          NULL );
<a name="l00618"></a>00618             g_free (first_string_to_free);
<a name="l00619"></a>00619             g_free (second_string_to_free);
<a name="l00620"></a>00620         }
<a name="l00621"></a>00621         <span class="keywordflow">else</span>
<a name="l00622"></a>00622             transaction_column_width_write  = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__file__load_8c.html#a6e5e85a5f63608656ce9709950bb08e6">transaction_col_width</a>[i] );
<a name="l00623"></a>00623 
<a name="l00624"></a>00624 
<a name="l00625"></a>00625     scheduler_column_width_write = NULL;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627     <span class="keywordflow">for</span> ( i=0 ; i&lt;<a class="code" href="gsb__scheduler__list_8h.html#af73ad30e2c80f3dc63b6f3495ce5ed26">SCHEDULER_COL_VISIBLE_COLUMNS</a> ; i++ )
<a name="l00628"></a>00628         <span class="keywordflow">if</span> ( scheduler_column_width_write )
<a name="l00629"></a>00629         {
<a name="l00630"></a>00630             scheduler_column_width_write = g_strconcat ( first_string_to_free = scheduler_column_width_write,
<a name="l00631"></a>00631                                                          <span class="stringliteral">&quot;-&quot;</span>,
<a name="l00632"></a>00632                                                          second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__file__load_8c.html#a8278ca506ea616623cd8cdc764188ee9">scheduler_col_width</a>[i] ),
<a name="l00633"></a>00633                                                          NULL );
<a name="l00634"></a>00634             g_free (first_string_to_free);
<a name="l00635"></a>00635             g_free (second_string_to_free);
<a name="l00636"></a>00636         }
<a name="l00637"></a>00637         <span class="keywordflow">else</span>
<a name="l00638"></a>00638             scheduler_column_width_write  = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__file__load_8c.html#a8278ca506ea616623cd8cdc764188ee9">scheduler_col_width</a>[i] );
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="comment">/* CSV skipped lines */</span>
<a name="l00642"></a>00642     skipped_lines_string = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a51653cc807d6160d6ad2f65666026a68">csv_skipped_lines</a>[0] );
<a name="l00643"></a>00643     <span class="keywordflow">for</span> ( i = 1; i &lt; <a class="code" href="structures_8h.html#a6579a0d80c7ece1e151b927eaf548f62">CSV_MAX_TOP_LINES</a> ; i ++ )
<a name="l00644"></a>00644     {
<a name="l00645"></a>00645         gchar* tmpstr = skipped_lines_string;
<a name="l00646"></a>00646         skipped_lines_string = g_strconcat ( tmpstr ,
<a name="l00647"></a>00647                                              <span class="stringliteral">&quot;-&quot;</span>, 
<a name="l00648"></a>00648                                              <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a51653cc807d6160d6ad2f65666026a68">csv_skipped_lines</a>[i] ),
<a name="l00649"></a>00649                                              NULL );
<a name="l00650"></a>00650         g_free ( tmpstr );
<a name="l00651"></a>00651     }
<a name="l00652"></a>00652 
<a name="l00653"></a>00653     <span class="comment">/* if we save an archive, we save it here */</span>
<a name="l00654"></a>00654     <span class="keywordflow">if</span> (archive_number
<a name="l00655"></a>00655         ||
<a name="l00656"></a>00656         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#ac9abb0586d6d0af26cfd09e1b99057d8">is_archive</a> )
<a name="l00657"></a>00657         is_archive = TRUE;
<a name="l00658"></a>00658 
<a name="l00659"></a>00659     <span class="comment">/* save the file_title or the initial_file_title */</span>
<a name="l00660"></a>00660     <span class="keywordflow">if</span> ( <a class="code" href="affichage_8c.html#ac7526506154f32a987a2cd923aba4d7c">initial_file_title</a> &amp;&amp; strlen (<a class="code" href="affichage_8c.html#ac7526506154f32a987a2cd923aba4d7c">initial_file_title</a>) )
<a name="l00661"></a>00661         tmpstr = <a class="code" href="affichage_8c.html#ac7526506154f32a987a2cd923aba4d7c">initial_file_title</a>;
<a name="l00662"></a>00662     <span class="keywordflow">else</span>
<a name="l00663"></a>00663         tmpstr = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     <span class="comment">/* save the general information */</span>
<a name="l00666"></a>00666     new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;General\n&quot;</span>
<a name="l00667"></a>00667                                            <span class="stringliteral">&quot;\t\tFile_version=\&quot;%s\&quot;\n&quot;</span>
<a name="l00668"></a>00668                                            <span class="stringliteral">&quot;\t\tGrisbi_version=\&quot;%s\&quot;\n&quot;</span>
<a name="l00669"></a>00669                                            <span class="stringliteral">&quot;\t\tCrypt_file=\&quot;%d\&quot;\n&quot;</span>
<a name="l00670"></a>00670                                            <span class="stringliteral">&quot;\t\tArchive_file=\&quot;%d\&quot;\n&quot;</span>
<a name="l00671"></a>00671                                            <span class="stringliteral">&quot;\t\tFile_title=\&quot;%s\&quot;\n&quot;</span>
<a name="l00672"></a>00672                                            <span class="stringliteral">&quot;\t\tGeneral_address=\&quot;%s\&quot;\n&quot;</span>
<a name="l00673"></a>00673                                            <span class="stringliteral">&quot;\t\tSecond_general_address=\&quot;%s\&quot;\n&quot;</span>
<a name="l00674"></a>00674                                            <span class="stringliteral">&quot;\t\tParty_list_currency_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l00675"></a>00675                                            <span class="stringliteral">&quot;\t\tCategory_list_currency_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l00676"></a>00676                                            <span class="stringliteral">&quot;\t\tBudget_list_currency_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l00677"></a>00677                                            <span class="stringliteral">&quot;\t\tScheduler_view=\&quot;%d\&quot;\n&quot;</span>
<a name="l00678"></a>00678                                            <span class="stringliteral">&quot;\t\tScheduler_custom_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l00679"></a>00679                                            <span class="stringliteral">&quot;\t\tScheduler_custom_menu=\&quot;%d\&quot;\n&quot;</span>
<a name="l00680"></a>00680                                            <span class="stringliteral">&quot;\t\tImport_interval_search=\&quot;%d\&quot;\n&quot;</span>
<a name="l00681"></a>00681                        <span class="stringliteral">&quot;\t\tImport_extract_number_for_check=\&quot;%d\&quot;\n&quot;</span>
<a name="l00682"></a>00682                                            <span class="stringliteral">&quot;\t\tImport_fusion_transactions=\&quot;%d\&quot;\n&quot;</span>
<a name="l00683"></a>00683                        <span class="stringliteral">&quot;\t\tImport_categorie_for_payee=\&quot;%d\&quot;\n&quot;</span>
<a name="l00684"></a>00684                                            <span class="stringliteral">&quot;\t\tImport_fyear_by_value_date=\&quot;%d\&quot;\n&quot;</span>
<a name="l00685"></a>00685                                            <span class="stringliteral">&quot;\t\tUse_logo=\&quot;%d\&quot;\n&quot;</span>
<a name="l00686"></a>00686                        <span class="stringliteral">&quot;\t\tIs_pixmaps_dir=\&quot;%d\&quot;\n&quot;</span>
<a name="l00687"></a>00687                        <span class="stringliteral">&quot;\t\tName_logo=\&quot;%s\&quot;\n&quot;</span>
<a name="l00688"></a>00688                                            <span class="stringliteral">&quot;\t\tRemind_display_per_account=\&quot;%d\&quot;\n&quot;</span>
<a name="l00689"></a>00689                                            <span class="stringliteral">&quot;\t\tTransactions_view=\&quot;%s\&quot;\n&quot;</span>
<a name="l00690"></a>00690                                            <span class="stringliteral">&quot;\t\tOne_line_showed=\&quot;%d\&quot;\n&quot;</span>
<a name="l00691"></a>00691                                            <span class="stringliteral">&quot;\t\tTwo_lines_showed=\&quot;%d\&quot;\n&quot;</span>
<a name="l00692"></a>00692                                            <span class="stringliteral">&quot;\t\tThree_lines_showed=\&quot;%d\&quot;\n&quot;</span>
<a name="l00693"></a>00693                                            <span class="stringliteral">&quot;\t\tRemind_form_per_account=\&quot;%d\&quot;\n&quot;</span>
<a name="l00694"></a>00694                                            <span class="stringliteral">&quot;\t\tTransaction_column_width=\&quot;%s\&quot;\n&quot;</span>
<a name="l00695"></a>00695                                            <span class="stringliteral">&quot;\t\tScheduler_column_width=\&quot;%s\&quot;\n&quot;</span>
<a name="l00696"></a>00696                                            <span class="stringliteral">&quot;\t\tCombofix_mixed_sort=\&quot;%d\&quot;\n&quot;</span>
<a name="l00697"></a>00697                                            <span class="stringliteral">&quot;\t\tCombofix_max_item=\&quot;%d\&quot;\n&quot;</span>
<a name="l00698"></a>00698                                            <span class="stringliteral">&quot;\t\tCombofix_case_sensitive=\&quot;%d\&quot;\n&quot;</span>
<a name="l00699"></a>00699                                            <span class="stringliteral">&quot;\t\tCombofix_force_payee=\&quot;%d\&quot;\n&quot;</span>
<a name="l00700"></a>00700                                            <span class="stringliteral">&quot;\t\tCombofix_force_category=\&quot;%d\&quot;\n&quot;</span>
<a name="l00701"></a>00701                                            <span class="stringliteral">&quot;\t\tAutomatic_amount_separator=\&quot;%d\&quot;\n&quot;</span>
<a name="l00702"></a>00702                                            <span class="stringliteral">&quot;\t\tCSV_separator=\&quot;%s\&quot;\n&quot;</span>
<a name="l00703"></a>00703                                            <span class="stringliteral">&quot;\t\tCSV_skipped_lines=\&quot;%s\&quot;\n&quot;</span>
<a name="l00704"></a>00704                                            <span class="stringliteral">&quot;\t\tMetatree_sort_transactions=\&quot;%d\&quot;\n&quot;</span>
<a name="l00705"></a>00705                                            <span class="stringliteral">&quot;\t\tAdd_archive_in_total_balance=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l00706"></a>00706         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="structures_8h.html#ab543f4bce79f29c3d34f92ebec03c9fe">VERSION_FICHIER</a>),
<a name="l00707"></a>00707         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(VERSION),
<a name="l00708"></a>00708         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a5d00886877a537e1acf2ca7eb8d247f6">crypt_file</a>,
<a name="l00709"></a>00709         is_archive,
<a name="l00710"></a>00710         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(tmpstr),
<a name="l00711"></a>00711         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="affichage_8c.html#ab7ec5b8a1b4dca10b71bfe0364eb7248">adresse_commune</a>),
<a name="l00712"></a>00712         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="affichage_8c.html#a5495a13fee46daf1634623fe4e63f99a">adresse_secondaire</a>),
<a name="l00713"></a>00713         <a class="code" href="gsb__currency__config_8c.html#a3add720d0e0b25caa37589bcfb879c6f">no_devise_totaux_tiers</a>,
<a name="l00714"></a>00714         <a class="code" href="categories__onglet_8c.html#a8f609654dcfbbcaa6791bcee83d6473d">no_devise_totaux_categ</a>,
<a name="l00715"></a>00715         <a class="code" href="gsb__currency__config_8c.html#a2f4b5073521c582e1bc8941533026556">no_devise_totaux_ib</a>,
<a name="l00716"></a>00716         <a class="code" href="gsb__calendar_8c.html#ab762c5bee8904fe3e83e8c2dfdecd94d">affichage_echeances</a>,
<a name="l00717"></a>00717         <a class="code" href="gsb__calendar_8c.html#aa8e493eac3d096f6914e1551552c590a">affichage_echeances_perso_nb_libre</a>,
<a name="l00718"></a>00718         <a class="code" href="gsb__calendar_8c.html#ab8c2018709e0110f2519d8233bb489d3">affichage_echeances_perso_j_m_a</a>,
<a name="l00719"></a>00719         <a class="code" href="bet__tab_8c.html#abd82865835fd6c5fcfe97283dbfd0648">valeur_echelle_recherche_date_import</a>,
<a name="l00720"></a>00720         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a628fdfc85cd4c1b52ca5f29b7cb7cd06">get_extract_number_for_check</a>,
<a name="l00721"></a>00721         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a57578c75cdb213a3320a587861a713ad">get_fusion_import_transactions</a>,
<a name="l00722"></a>00722         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a3fa0078d2f9783e00e473ee5a127f1f6">get_categorie_for_payee</a>,
<a name="l00723"></a>00723         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#af20e6f2e4e19db775dbd86405e877f09">get_fyear_by_value_date</a>,
<a name="l00724"></a>00724         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a2228cfa5b20058093f1a82e9c50d1b0a">utilise_logo</a>,
<a name="l00725"></a>00725     <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#abfc8db076ca582b5323f585f21698ca8">is_pixmaps_dir</a>,
<a name="l00726"></a>00726     <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a1c4f0ecde430510ed3cf0c68491268b1">name_logo</a> ),
<a name="l00727"></a>00727         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#ae45e10b2c70e5cc3844a13a052ad0d78">retient_affichage_par_compte</a>,
<a name="l00728"></a>00728         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(transactions_view),
<a name="l00729"></a>00729         <a class="code" href="affichage__liste_8c.html#a36eb372c7727c89f6ed96a3756a28740">display_one_line</a>,
<a name="l00730"></a>00730         <a class="code" href="affichage__liste_8c.html#a420ccd553ba703004c7415ba8ee25630">display_two_lines</a>,
<a name="l00731"></a>00731         <a class="code" href="affichage__liste_8c.html#aa74165188c76a0e2ba64239b2236841c">display_three_lines</a>,
<a name="l00732"></a>00732     0,
<a name="l00733"></a>00733         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(transaction_column_width_write),
<a name="l00734"></a>00734         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(scheduler_column_width_write),
<a name="l00735"></a>00735         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a66bb2fbaf6417db78f4a3444aa26cfa3">combofix_mixed_sort</a>,
<a name="l00736"></a>00736         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a6a71e36dd4154a8a28ec1c61815e48cf">combofix_max_item</a>,
<a name="l00737"></a>00737         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a125b6acef0ed7c3675d331ebb36ee373">combofix_case_sensitive</a>,
<a name="l00738"></a>00738         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a2d144af514bb01efa489541db464bc80">combofix_force_payee</a>,
<a name="l00739"></a>00739         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a438d5f681d3caeb050f58d3731f8d913">combofix_force_category</a>,
<a name="l00740"></a>00740         <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a5d009282cf4adee9a40cf1b6a7e7327b">automatic_separator</a>,
<a name="l00741"></a>00741         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a21a448909a9460d5a6de8ddf4edb16e0">csv_separator</a>),
<a name="l00742"></a>00742         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(skipped_lines_string),
<a name="l00743"></a>00743     <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#aab3a9a46a988630eff0a8d7a0b9a80e8">metatree_sort_transactions</a>,
<a name="l00744"></a>00744     <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#afe6525697e72cd23f1bdafea6642fd37">add_archive_in_total_balance</a> );
<a name="l00745"></a>00745 
<a name="l00746"></a>00746     g_free (transactions_view);
<a name="l00747"></a>00747     g_free (scheduler_column_width_write);
<a name="l00748"></a>00748     g_free (transaction_column_width_write);
<a name="l00749"></a>00749 
<a name="l00750"></a>00750     <span class="comment">/* append the new string to the file content</span>
<a name="l00751"></a>00751 <span class="comment">     * and return the new iterator */</span>
<a name="l00752"></a>00752 
<a name="l00753"></a>00753     <span class="keywordflow">return</span> <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l00754"></a>00754                                        length_calculated,
<a name="l00755"></a>00755                                        file_content,
<a name="l00756"></a>00756                                        new_string );
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 
<a name="l00769"></a>00769 gulong gsb_file_save_color_part ( gulong iterator,
<a name="l00770"></a>00770                         gulong *length_calculated,
<a name="l00771"></a>00771                         gchar **file_content,
<a name="l00772"></a>00772                         gint archive_number )
<a name="l00773"></a>00773 {
<a name="l00774"></a>00774     gchar *new_string;
<a name="l00775"></a>00775 
<a name="l00776"></a>00776     <span class="comment">/* save the general informations */</span>
<a name="l00777"></a>00777     new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Color\n&quot;</span>
<a name="l00778"></a>00778                         <span class="stringliteral">&quot;\t\tBackground_color_0_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00779"></a>00779                         <span class="stringliteral">&quot;\t\tBackground_color_0_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00780"></a>00780                         <span class="stringliteral">&quot;\t\tBackground_color_0_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00781"></a>00781                         <span class="stringliteral">&quot;\t\tBackground_color_1_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00782"></a>00782                         <span class="stringliteral">&quot;\t\tBackground_color_1_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00783"></a>00783                         <span class="stringliteral">&quot;\t\tBackground_color_1_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00784"></a>00784                         <span class="stringliteral">&quot;\t\tCouleur_jour_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00785"></a>00785                         <span class="stringliteral">&quot;\t\tCouleur_jour_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00786"></a>00786                         <span class="stringliteral">&quot;\t\tCouleur_jour_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00787"></a>00787                         <span class="stringliteral">&quot;\t\tBackground_scheduled_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00788"></a>00788                         <span class="stringliteral">&quot;\t\tBackground_scheduled_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00789"></a>00789                         <span class="stringliteral">&quot;\t\tBackground_scheduled_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00790"></a>00790                         <span class="stringliteral">&quot;\t\tBackground_archive_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00791"></a>00791                         <span class="stringliteral">&quot;\t\tBackground_archive_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00792"></a>00792                         <span class="stringliteral">&quot;\t\tBackground_archive_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00793"></a>00793                         <span class="stringliteral">&quot;\t\tSelection_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00794"></a>00794                         <span class="stringliteral">&quot;\t\tSelection_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00795"></a>00795                         <span class="stringliteral">&quot;\t\tSelection_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00796"></a>00796                         <span class="stringliteral">&quot;\t\tBackground_split_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00797"></a>00797                         <span class="stringliteral">&quot;\t\tBackground_split_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00798"></a>00798                         <span class="stringliteral">&quot;\t\tBackground_split_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00799"></a>00799                         <span class="stringliteral">&quot;\t\tText_color_0_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00800"></a>00800                         <span class="stringliteral">&quot;\t\tText_color_0_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00801"></a>00801                         <span class="stringliteral">&quot;\t\tText_color_0_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00802"></a>00802                         <span class="stringliteral">&quot;\t\tText_color_1_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00803"></a>00803                         <span class="stringliteral">&quot;\t\tText_color_1_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00804"></a>00804                         <span class="stringliteral">&quot;\t\tText_color_1_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00805"></a>00805                         <span class="stringliteral">&quot;\t\tCalendar_entry_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00806"></a>00806                         <span class="stringliteral">&quot;\t\tCalendar_entry_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00807"></a>00807                         <span class="stringliteral">&quot;\t\tCalendar_entry_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00808"></a>00808                         <span class="stringliteral">&quot;\t\tCouleur_bet_division_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00809"></a>00809                         <span class="stringliteral">&quot;\t\tCouleur_bet_division_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00810"></a>00810                         <span class="stringliteral">&quot;\t\tCouleur_bet_division_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00811"></a>00811                         <span class="stringliteral">&quot;\t\tCouleur_bet_future_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00812"></a>00812                         <span class="stringliteral">&quot;\t\tCouleur_bet_future_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00813"></a>00813                         <span class="stringliteral">&quot;\t\tCouleur_bet_future_blue=\&quot;%d\&quot;\n&quot;</span>
<a name="l00814"></a>00814                         <span class="stringliteral">&quot;\t\tCouleur_bet_transfert_red=\&quot;%d\&quot;\n&quot;</span>
<a name="l00815"></a>00815                         <span class="stringliteral">&quot;\t\tCouleur_bet_transfert_green=\&quot;%d\&quot;\n&quot;</span>
<a name="l00816"></a>00816                         <span class="stringliteral">&quot;\t\tCouleur_bet_transfert_blue=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l00817"></a>00817 
<a name="l00818"></a>00818     <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[0].red,
<a name="l00819"></a>00819     <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[0].green,
<a name="l00820"></a>00820     <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[0].blue,
<a name="l00821"></a>00821     <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[1].red,
<a name="l00822"></a>00822     <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[1].green,
<a name="l00823"></a>00823     <a class="code" href="affichage_8c.html#a58089bf9225ae2e274165369f8bc7a00">couleur_fond</a>[1].blue,
<a name="l00824"></a>00824     <a class="code" href="affichage_8c.html#a668e8ab17ed4a22af1464c091c2668c2">couleur_jour</a>.red,
<a name="l00825"></a>00825     <a class="code" href="affichage_8c.html#a668e8ab17ed4a22af1464c091c2668c2">couleur_jour</a>.green,
<a name="l00826"></a>00826     <a class="code" href="affichage_8c.html#a668e8ab17ed4a22af1464c091c2668c2">couleur_jour</a>.blue,
<a name="l00827"></a>00827     <a class="code" href="affichage_8c.html#a4119417896b5652f640ead3795baac52">couleur_grise</a>.red,
<a name="l00828"></a>00828     <a class="code" href="affichage_8c.html#a4119417896b5652f640ead3795baac52">couleur_grise</a>.green,
<a name="l00829"></a>00829     <a class="code" href="affichage_8c.html#a4119417896b5652f640ead3795baac52">couleur_grise</a>.blue,
<a name="l00830"></a>00830     <a class="code" href="affichage_8c.html#a881db8e6c000ad504ff0183a674cb196">archive_background_color</a>.red,
<a name="l00831"></a>00831     <a class="code" href="affichage_8c.html#a881db8e6c000ad504ff0183a674cb196">archive_background_color</a>.green,
<a name="l00832"></a>00832     <a class="code" href="affichage_8c.html#a881db8e6c000ad504ff0183a674cb196">archive_background_color</a>.blue,
<a name="l00833"></a>00833     <a class="code" href="affichage_8c.html#a35e437a6db69c9160eeb81674971108b">couleur_selection</a>.red,
<a name="l00834"></a>00834     <a class="code" href="affichage_8c.html#a35e437a6db69c9160eeb81674971108b">couleur_selection</a>.green,
<a name="l00835"></a>00835     <a class="code" href="affichage_8c.html#a35e437a6db69c9160eeb81674971108b">couleur_selection</a>.blue,
<a name="l00836"></a>00836     <a class="code" href="affichage_8c.html#abc4f631d953e2be68189a6fbcf55cd1d">split_background</a>.red,
<a name="l00837"></a>00837     <a class="code" href="affichage_8c.html#abc4f631d953e2be68189a6fbcf55cd1d">split_background</a>.green,
<a name="l00838"></a>00838     <a class="code" href="affichage_8c.html#abc4f631d953e2be68189a6fbcf55cd1d">split_background</a>.blue,
<a name="l00839"></a>00839     <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[0].red,
<a name="l00840"></a>00840     <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[0].green,
<a name="l00841"></a>00841     <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[0].blue,
<a name="l00842"></a>00842     <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[1].red,
<a name="l00843"></a>00843     <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[1].green,
<a name="l00844"></a>00844     <a class="code" href="affichage_8c.html#a8169600c05eb3674c1b11ca67dd677d3">text_color</a>[1].blue,
<a name="l00845"></a>00845     <a class="code" href="affichage_8c.html#aa809fea280ab9cef6e16774b54a573ae">calendar_entry_color</a>.red,
<a name="l00846"></a>00846     <a class="code" href="affichage_8c.html#aa809fea280ab9cef6e16774b54a573ae">calendar_entry_color</a>.green,
<a name="l00847"></a>00847     <a class="code" href="affichage_8c.html#aa809fea280ab9cef6e16774b54a573ae">calendar_entry_color</a>.blue,
<a name="l00848"></a>00848     <a class="code" href="affichage_8c.html#a9c6b0a0f3037804c43aa435dbb98f7ec">couleur_bet_division</a>.red,
<a name="l00849"></a>00849     <a class="code" href="affichage_8c.html#a9c6b0a0f3037804c43aa435dbb98f7ec">couleur_bet_division</a>.green,
<a name="l00850"></a>00850     <a class="code" href="affichage_8c.html#a9c6b0a0f3037804c43aa435dbb98f7ec">couleur_bet_division</a>.blue,
<a name="l00851"></a>00851     <a class="code" href="affichage_8c.html#af7f95b1eb6717e97b624b506258fd893">couleur_bet_future</a>.red,
<a name="l00852"></a>00852     <a class="code" href="affichage_8c.html#af7f95b1eb6717e97b624b506258fd893">couleur_bet_future</a>.green,
<a name="l00853"></a>00853     <a class="code" href="affichage_8c.html#af7f95b1eb6717e97b624b506258fd893">couleur_bet_future</a>.blue,
<a name="l00854"></a>00854     <a class="code" href="affichage_8c.html#abf473d007a5860d19e62be3c33654a48">couleur_bet_transfert</a>.red,
<a name="l00855"></a>00855     <a class="code" href="affichage_8c.html#abf473d007a5860d19e62be3c33654a48">couleur_bet_transfert</a>.green,
<a name="l00856"></a>00856     <a class="code" href="affichage_8c.html#abf473d007a5860d19e62be3c33654a48">couleur_bet_transfert</a>.blue );
<a name="l00857"></a>00857 
<a name="l00858"></a>00858     <span class="comment">/* append the new string to the file content</span>
<a name="l00859"></a>00859 <span class="comment">     * and return the new iterator */</span>
<a name="l00860"></a>00860 
<a name="l00861"></a>00861     <span class="keywordflow">return</span> <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l00862"></a>00862                                        length_calculated,
<a name="l00863"></a>00863                                        file_content,
<a name="l00864"></a>00864                                        new_string );
<a name="l00865"></a>00865 }
<a name="l00866"></a>00866 
<a name="l00877"></a>00877 gulong gsb_file_save_print_part ( gulong iterator,
<a name="l00878"></a>00878                         gulong *length_calculated,
<a name="l00879"></a>00879                         gchar **file_content,
<a name="l00880"></a>00880                         gint archive_number )
<a name="l00881"></a>00881 {
<a name="l00882"></a>00882     gchar *new_string;
<a name="l00883"></a>00883 
<a name="l00884"></a>00884     <span class="comment">/* save the print config information */</span>
<a name="l00885"></a>00885     new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Print\n&quot;</span>
<a name="l00886"></a>00886                                            <span class="stringliteral">&quot;\t\tDraw_lines=\&quot;%d\&quot;\n&quot;</span>
<a name="l00887"></a>00887                                            <span class="stringliteral">&quot;\t\tDraw_column=\&quot;%d\&quot;\n&quot;</span>
<a name="l00888"></a>00888                                            <span class="stringliteral">&quot;\t\tDraw_background=\&quot;%d\&quot;\n&quot;</span>
<a name="l00889"></a>00889                                            <span class="stringliteral">&quot;\t\tDraw_archives=\&quot;%d\&quot;\n&quot;</span>
<a name="l00890"></a>00890                                            <span class="stringliteral">&quot;\t\tDraw_columns_name=\&quot;%d\&quot;\n&quot;</span>
<a name="l00891"></a>00891                                            <span class="stringliteral">&quot;\t\tDraw_title=\&quot;%d\&quot;\n&quot;</span>
<a name="l00892"></a>00892                                            <span class="stringliteral">&quot;\t\tDraw_interval_dates=\&quot;%d\&quot;\n&quot;</span>
<a name="l00893"></a>00893                                            <span class="stringliteral">&quot;\t\tDraw_dates_are_value_dates=\&quot;%d\&quot;\n&quot;</span>
<a name="l00894"></a>00894                                            <span class="stringliteral">&quot;\t\tFont_transactions=\&quot;%s\&quot;\n&quot;</span>
<a name="l00895"></a>00895                                            <span class="stringliteral">&quot;\t\tFont_title=\&quot;%s\&quot;\n&quot;</span>
<a name="l00896"></a>00896                                            <span class="stringliteral">&quot;\t\tReport_font_transactions=\&quot;%s\&quot;\n&quot;</span>
<a name="l00897"></a>00897                                            <span class="stringliteral">&quot;\t\tReport_font_title=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l00898"></a>00898                                            <a class="code" href="gsb__data__print__config_8c.html#a6214f4edbeb618543155d93c1440fb13">gsb_data_print_config_get_draw_lines</a> (),
<a name="l00899"></a>00899                                            <a class="code" href="gsb__data__print__config_8c.html#a9eee382b1ee81d2291ef4eb4aae4bb7a">gsb_data_print_config_get_draw_column</a> (),
<a name="l00900"></a>00900                                            <a class="code" href="gsb__data__print__config_8c.html#aba43ee990b36315212df9e30ce5a640e">gsb_data_print_config_get_draw_background</a> (),
<a name="l00901"></a>00901                                            <a class="code" href="gsb__data__print__config_8c.html#a6e773923f44e66e6e047ec8bd6bbdb21">gsb_data_print_config_get_draw_archives</a> (),
<a name="l00902"></a>00902                                            <a class="code" href="gsb__data__print__config_8c.html#a01e892528ff87835487d03a5ba6c24e5">gsb_data_print_config_get_draw_columns_name</a> (),
<a name="l00903"></a>00903                                            <a class="code" href="gsb__data__print__config_8c.html#afd8a78e043b717e6bc2a6a18b6ced76d">gsb_data_print_config_get_draw_title</a> (),
<a name="l00904"></a>00904                                            <a class="code" href="gsb__data__print__config_8c.html#a10c52e1083f665efc453c87daff007a7">gsb_data_print_config_get_draw_interval_dates</a> (),
<a name="l00905"></a>00905                                            <a class="code" href="gsb__data__print__config_8c.html#a533bc3e1fa5039645557a0d959571497">gsb_data_print_config_get_draw_dates_are_value_dates</a> (),
<a name="l00906"></a>00906                        <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(pango_font_description_to_string (<a class="code" href="gsb__data__print__config_8c.html#af32e6fae377170c98443900214ddd009">gsb_data_print_config_get_font_transactions</a> ())),
<a name="l00907"></a>00907                                            <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(pango_font_description_to_string (<a class="code" href="gsb__data__print__config_8c.html#a683c317369e1e940e1066cccd3306099">gsb_data_print_config_get_font_title</a> ())),
<a name="l00908"></a>00908                                            <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(pango_font_description_to_string (<a class="code" href="gsb__data__print__config_8c.html#a6adfdd58927d0c92a60106bcb1a94536">gsb_data_print_config_get_report_font_transactions</a> ())),
<a name="l00909"></a>00909                                            <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(pango_font_description_to_string (<a class="code" href="gsb__data__print__config_8c.html#a42842df1055227a0faa8c7a17c2b2f46">gsb_data_print_config_get_report_font_title</a> ())));
<a name="l00910"></a>00910 
<a name="l00911"></a>00911     <span class="comment">/* append the new string to the file content</span>
<a name="l00912"></a>00912 <span class="comment">     * and return the new iterator */</span>
<a name="l00913"></a>00913     <span class="keywordflow">return</span> <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l00914"></a>00914                                        length_calculated,
<a name="l00915"></a>00915                                        file_content,
<a name="l00916"></a>00916                                        new_string );
<a name="l00917"></a>00917 }
<a name="l00918"></a>00918 
<a name="l00919"></a>00919 
<a name="l00920"></a>00920 
<a name="l00930"></a>00930 gulong gsb_file_save_account_part ( gulong iterator,
<a name="l00931"></a>00931                         gulong *length_calculated,
<a name="l00932"></a>00932                         gchar **file_content )
<a name="l00933"></a>00933 {
<a name="l00934"></a>00934     GSList *list_tmp;
<a name="l00935"></a>00935 
<a name="l00936"></a>00936     list_tmp = <a class="code" href="gsb__data__account_8c.html#aaf4d25733c7ea5a0ca263c0ab79e6212">gsb_data_account_get_list_accounts</a> ();
<a name="l00937"></a>00937 
<a name="l00938"></a>00938     <span class="keywordflow">while</span> ( list_tmp )
<a name="l00939"></a>00939     {
<a name="l00940"></a>00940         gchar *first_string_to_free;
<a name="l00941"></a>00941         gchar *second_string_to_free;
<a name="l00942"></a>00942         gint account_number;
<a name="l00943"></a>00943         gint j, k;
<a name="l00944"></a>00944         gchar *sort_list;
<a name="l00945"></a>00945         gchar *sort_kind_column;
<a name="l00946"></a>00946         gchar *<a class="code" href="structform__organization.html">form_organization</a>;
<a name="l00947"></a>00947         gchar *form_columns_width;
<a name="l00948"></a>00948         GSList *list_tmp_2;
<a name="l00949"></a>00949         gchar *new_string;
<a name="l00950"></a>00950         gchar *init_balance;
<a name="l00951"></a>00951         gchar *mini_wanted;
<a name="l00952"></a>00952         gchar *mini_auto;
<a name="l00953"></a>00953     gchar **owner_tab;
<a name="l00954"></a>00954     gchar *owner_str;
<a name="l00955"></a>00955     gchar *bet_str;
<a name="l00956"></a>00956     <a class="code" href="gsb__data__account_8h.html#abe336abc6aaa13733b0ea311c9478862">kind_account</a> kind;
<a name="l00957"></a>00957 
<a name="l00958"></a>00958         account_number = <a class="code" href="gsb__data__account_8c.html#ad61190b4638c2be7b7ce320470f1cb5a">gsb_data_account_get_no_account</a> ( list_tmp -&gt; data );
<a name="l00959"></a>00959 
<a name="l00960"></a>00960         <span class="comment">/* set the sort_list */</span>
<a name="l00961"></a>00961         list_tmp_2 = <a class="code" href="gsb__data__account_8c.html#ab811e44c82d23a9933e5e26e20755b6d">gsb_data_account_get_sort_list</a> (account_number);
<a name="l00962"></a>00962         sort_list = NULL;
<a name="l00963"></a>00963 
<a name="l00964"></a>00964         <span class="keywordflow">while</span> ( list_tmp_2 )
<a name="l00965"></a>00965         {
<a name="l00966"></a>00966             <span class="keywordflow">if</span> ( sort_list )
<a name="l00967"></a>00967             {
<a name="l00968"></a>00968                 sort_list = g_strconcat ( first_string_to_free = sort_list,
<a name="l00969"></a>00969                                           <span class="stringliteral">&quot;/&quot;</span>,
<a name="l00970"></a>00970                                           second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( list_tmp_2 -&gt; data )),
<a name="l00971"></a>00971                                           NULL );
<a name="l00972"></a>00972                 g_free (first_string_to_free);
<a name="l00973"></a>00973                 g_free (second_string_to_free);
<a name="l00974"></a>00974             }
<a name="l00975"></a>00975             <span class="keywordflow">else</span>
<a name="l00976"></a>00976                 sort_list = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( list_tmp_2 -&gt; data ));
<a name="l00977"></a>00977 
<a name="l00978"></a>00978             list_tmp_2 = list_tmp_2 -&gt; next;
<a name="l00979"></a>00979         }
<a name="l00980"></a>00980 
<a name="l00981"></a>00981         <span class="comment">/* set the default sort kind for the columns */</span>
<a name="l00982"></a>00982         sort_kind_column = NULL;
<a name="l00983"></a>00983 
<a name="l00984"></a>00984         <span class="keywordflow">for</span> ( j=0 ; j&lt;CUSTOM_MODEL_VISIBLE_COLUMNS ; j++ )
<a name="l00985"></a>00985         {
<a name="l00986"></a>00986             <span class="keywordflow">if</span> ( sort_kind_column )
<a name="l00987"></a>00987             {
<a name="l00988"></a>00988                 sort_kind_column = g_strconcat ( first_string_to_free = sort_kind_column,
<a name="l00989"></a>00989                                                  <span class="stringliteral">&quot;-&quot;</span>,
<a name="l00990"></a>00990                                                  second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__data__account_8c.html#a3a33d34a6980db2d4467d8f2fcb580d2">gsb_data_account_get_element_sort</a> ( account_number,
<a name="l00991"></a>00991                                                                                                                               j )),
<a name="l00992"></a>00992                                                  NULL );
<a name="l00993"></a>00993                 g_free (first_string_to_free);
<a name="l00994"></a>00994                 g_free (second_string_to_free);
<a name="l00995"></a>00995             }
<a name="l00996"></a>00996             <span class="keywordflow">else</span>
<a name="l00997"></a>00997                 sort_kind_column = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__data__account_8c.html#a3a33d34a6980db2d4467d8f2fcb580d2">gsb_data_account_get_element_sort</a> ( account_number,
<a name="l00998"></a>00998                                                                                         j ));
<a name="l00999"></a>00999         }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001         <span class="comment">/* set the form organization */</span>
<a name="l01002"></a>01002         form_organization = NULL;
<a name="l01003"></a>01003 
<a name="l01004"></a>01004         <span class="keywordflow">for</span> ( k=0 ; k&lt;<a class="code" href="gsb__data__form_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a> ; k++ )
<a name="l01005"></a>01005             <span class="keywordflow">for</span> ( j=0 ; j&lt;<a class="code" href="gsb__data__form_8h.html#a0e9d4003787634607af9e97e14b9668b">MAX_WIDTH</a> ; j++ )
<a name="l01006"></a>01006                 <span class="keywordflow">if</span> ( form_organization )
<a name="l01007"></a>01007                 { 
<a name="l01008"></a>01008                     form_organization = g_strconcat ( first_string_to_free = form_organization,
<a name="l01009"></a>01009                                                       <span class="stringliteral">&quot;-&quot;</span>,
<a name="l01010"></a>01010                                                       second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l01011"></a>01011                                                                                                                          j,
<a name="l01012"></a>01012                                                                                                                          k )),
<a name="l01013"></a>01013                                                       NULL );
<a name="l01014"></a>01014                     g_free (first_string_to_free);
<a name="l01015"></a>01015                     g_free (second_string_to_free);
<a name="l01016"></a>01016                 }
<a name="l01017"></a>01017                 <span class="keywordflow">else</span>
<a name="l01018"></a>01018                     form_organization = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> (<a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l01019"></a>01019                                                                                   j,
<a name="l01020"></a>01020                                                                                   k ));
<a name="l01021"></a>01021 
<a name="l01022"></a>01022         <span class="comment">/* set the form columns width */</span>
<a name="l01023"></a>01023         form_columns_width = NULL;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025         <span class="keywordflow">for</span> ( k=0 ; k&lt;MAX_WIDTH ; k++ )
<a name="l01026"></a>01026             <span class="keywordflow">if</span> ( form_columns_width )
<a name="l01027"></a>01027             {
<a name="l01028"></a>01028                 form_columns_width = g_strconcat ( first_string_to_free = form_columns_width,
<a name="l01029"></a>01029                                                    <span class="stringliteral">&quot;-&quot;</span>,
<a name="l01030"></a>01030                                                    second_string_to_free = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__data__form_8c.html#a7e138cf8515b9688315d67ef12c338d9">gsb_data_form_get_width_column</a> ( account_number,
<a name="l01031"></a>01031                                                                                                                              k )),
<a name="l01032"></a>01032                                                    NULL );
<a name="l01033"></a>01033                 g_free (first_string_to_free);
<a name="l01034"></a>01034                 g_free (second_string_to_free);
<a name="l01035"></a>01035             }
<a name="l01036"></a>01036             <span class="keywordflow">else</span>
<a name="l01037"></a>01037                 form_columns_width = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( <a class="code" href="gsb__data__form_8c.html#a7e138cf8515b9688315d67ef12c338d9">gsb_data_form_get_width_column</a> ( account_number,
<a name="l01038"></a>01038                                                                                        k ));
<a name="l01039"></a>01039 
<a name="l01040"></a>01040         <span class="comment">/* set the reals */</span>
<a name="l01041"></a>01041         init_balance = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01042"></a>01042                         <a class="code" href="gsb__data__account_8c.html#aeef4070a2b411519cf998f79106b6c96">gsb_data_account_get_init_balance</a> ( account_number, -1 ), 2 );
<a name="l01043"></a>01043         mini_wanted = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01044"></a>01044                         <a class="code" href="gsb__data__account_8c.html#a7331c6044498b36bebdd534bba47db14">gsb_data_account_get_mini_balance_wanted</a> ( account_number ), 2 );
<a name="l01045"></a>01045         mini_auto = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01046"></a>01046                         <a class="code" href="gsb__data__account_8c.html#afec4386df08ba148209bdfc6fb406578">gsb_data_account_get_mini_balance_authorized</a> ( account_number ), 2 );
<a name="l01047"></a>01047 
<a name="l01048"></a>01048     <span class="comment">/* protect the owner adress */</span>
<a name="l01049"></a>01049     owner_str = g_strdup ( <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> (
<a name="l01050"></a>01050                         <a class="code" href="gsb__data__account_8c.html#a9252e4f5c1a0dac641d0dff9bd8cb936">gsb_data_account_get_holder_address</a> ( account_number ) ) );
<a name="l01051"></a>01051     <span class="keywordflow">if</span> ( g_strstr_len ( owner_str, -1, <a class="code" href="utils__str_8h.html#a7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a> ) )
<a name="l01052"></a>01052     {
<a name="l01053"></a>01053         owner_tab = g_strsplit ( owner_str, <a class="code" href="utils__str_8h.html#a7b99dc1e1c86b4897498c2d436ead1b5">NEW_LINE</a>, 0 );
<a name="l01054"></a>01054         g_free ( owner_str );
<a name="l01055"></a>01055         owner_str = g_strjoinv ( <span class="stringliteral">&quot;&amp;#xA;&quot;</span>, owner_tab );
<a name="l01056"></a>01056 
<a name="l01057"></a>01057         g_strfreev ( owner_tab );
<a name="l01058"></a>01058     }
<a name="l01059"></a>01059 
<a name="l01060"></a>01060     kind = <a class="code" href="gsb__data__account_8c.html#aa2e978644e71d62a1aaf1c58cb6b0fcd">gsb_data_account_get_kind</a> ( account_number );
<a name="l01061"></a>01061 
<a name="l01062"></a>01062     <span class="comment">/* now we can fill the file content */</span>
<a name="l01063"></a>01063         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Account\n&quot;</span>
<a name="l01064"></a>01064                                                <span class="stringliteral">&quot;\t\tName=\&quot;%s\&quot;\n&quot;</span>
<a name="l01065"></a>01065                                                <span class="stringliteral">&quot;\t\tId=\&quot;%s\&quot;\n&quot;</span>
<a name="l01066"></a>01066                                                <span class="stringliteral">&quot;\t\tNumber=\&quot;%d\&quot;\n&quot;</span>
<a name="l01067"></a>01067                                                <span class="stringliteral">&quot;\t\tOwner=\&quot;%s\&quot;\n&quot;</span>
<a name="l01068"></a>01068                                                <span class="stringliteral">&quot;\t\tKind=\&quot;%d\&quot;\n&quot;</span>
<a name="l01069"></a>01069                                                <span class="stringliteral">&quot;\t\tCurrency=\&quot;%d\&quot;\n&quot;</span>
<a name="l01070"></a>01070                            <span class="stringliteral">&quot;\t\tPath_icon=\&quot;%s\&quot;\n&quot;</span>
<a name="l01071"></a>01071                                                <span class="stringliteral">&quot;\t\tBank=\&quot;%d\&quot;\n&quot;</span>
<a name="l01072"></a>01072                                                <span class="stringliteral">&quot;\t\tBank_branch_code=\&quot;%s\&quot;\n&quot;</span>
<a name="l01073"></a>01073                                                <span class="stringliteral">&quot;\t\tBank_account_number=\&quot;%s\&quot;\n&quot;</span>
<a name="l01074"></a>01074                                                <span class="stringliteral">&quot;\t\tKey=\&quot;%s\&quot;\n&quot;</span>
<a name="l01075"></a>01075                            <span class="stringliteral">&quot;\t\tBank_account_IBAN=\&quot;%s\&quot;\n&quot;</span>
<a name="l01076"></a>01076                                                <span class="stringliteral">&quot;\t\tInitial_balance=\&quot;%s\&quot;\n&quot;</span>
<a name="l01077"></a>01077                                                <span class="stringliteral">&quot;\t\tMinimum_wanted_balance=\&quot;%s\&quot;\n&quot;</span>
<a name="l01078"></a>01078                                                <span class="stringliteral">&quot;\t\tMinimum_authorised_balance=\&quot;%s\&quot;\n&quot;</span>
<a name="l01079"></a>01079                                                <span class="stringliteral">&quot;\t\tClosed_account=\&quot;%d\&quot;\n&quot;</span>
<a name="l01080"></a>01080                                                <span class="stringliteral">&quot;\t\tShow_marked=\&quot;%d\&quot;\n&quot;</span>
<a name="l01081"></a>01081                                                <span class="stringliteral">&quot;\t\tShow_archives_lines=\&quot;%d\&quot;\n&quot;</span>
<a name="l01082"></a>01082                                                <span class="stringliteral">&quot;\t\tLines_per_transaction=\&quot;%d\&quot;\n&quot;</span>
<a name="l01083"></a>01083                                                <span class="stringliteral">&quot;\t\tComment=\&quot;%s\&quot;\n&quot;</span>
<a name="l01084"></a>01084                                                <span class="stringliteral">&quot;\t\tOwner_address=\&quot;%s\&quot;\n&quot;</span>
<a name="l01085"></a>01085                                                <span class="stringliteral">&quot;\t\tDefault_debit_method=\&quot;%d\&quot;\n&quot;</span>
<a name="l01086"></a>01086                                                <span class="stringliteral">&quot;\t\tDefault_credit_method=\&quot;%d\&quot;\n&quot;</span>
<a name="l01087"></a>01087                                                <span class="stringliteral">&quot;\t\tSort_by_method=\&quot;%d\&quot;\n&quot;</span>
<a name="l01088"></a>01088                                                <span class="stringliteral">&quot;\t\tNeutrals_inside_method=\&quot;%d\&quot;\n&quot;</span>
<a name="l01089"></a>01089                                                <span class="stringliteral">&quot;\t\tSort_order=\&quot;%s\&quot;\n&quot;</span>
<a name="l01090"></a>01090                                                <span class="stringliteral">&quot;\t\tAscending_sort=\&quot;%d\&quot;\n&quot;</span>
<a name="l01091"></a>01091                                                <span class="stringliteral">&quot;\t\tColumn_sort=\&quot;%d\&quot;\n&quot;</span>
<a name="l01092"></a>01092                                                <span class="stringliteral">&quot;\t\tSorting_kind_column=\&quot;%s\&quot;\n&quot;</span>
<a name="l01093"></a>01093                                                <span class="stringliteral">&quot;\t\tForm_columns_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l01094"></a>01094                                                <span class="stringliteral">&quot;\t\tForm_lines_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l01095"></a>01095                                                <span class="stringliteral">&quot;\t\tForm_organization=\&quot;%s\&quot;\n&quot;</span>
<a name="l01096"></a>01096                                                <span class="stringliteral">&quot;\t\tForm_columns_width=\&quot;%s\&quot;\n&quot;</span>
<a name="l01097"></a>01097                            <span class="stringliteral">&quot;\t\tBet_use_budget=\&quot;%d\&quot;&quot;</span>,
<a name="l01098"></a>01098             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#a6b0df19868e38619bff512f2c18ef51e">gsb_data_account_get_name</a> (account_number)),
<a name="l01099"></a>01099             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#a8e894871e7b44a38b1a3450eab292fd2">gsb_data_account_get_id</a> (account_number)),
<a name="l01100"></a>01100             account_number,
<a name="l01101"></a>01101             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#ad00bd5177be988a0fd989c7d7c44f330">gsb_data_account_get_holder_name</a> (account_number)),
<a name="l01102"></a>01102             kind,
<a name="l01103"></a>01103             <a class="code" href="gsb__data__account_8c.html#a9f8d132b988ca73a7061fca955f6bc2c">gsb_data_account_get_currency</a> (account_number),
<a name="l01104"></a>01104             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#a3f52f42860b89b5014964b3c8f58b357">gsb_data_account_get_name_icon</a> (account_number)),
<a name="l01105"></a>01105             <a class="code" href="gsb__data__account_8c.html#ab6f01d42010229ad507326b62ddd3097">gsb_data_account_get_bank</a> (account_number),
<a name="l01106"></a>01106             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#abde998c725b5918792d06fbaedd83450">gsb_data_account_get_bank_branch_code</a> (account_number)),
<a name="l01107"></a>01107             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#a9702d103794d7f97149ef68eeaccfb05">gsb_data_account_get_bank_account_number</a> (account_number)),
<a name="l01108"></a>01108             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#aae56b71a36a12043479435c6eaffb1f4">gsb_data_account_get_bank_account_key</a> (account_number)),
<a name="l01109"></a>01109             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#a10b93090c2fe29c680a15c1128f25019">gsb_data_account_get_bank_account_iban</a> (account_number)),
<a name="l01110"></a>01110             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(init_balance),
<a name="l01111"></a>01111             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(mini_wanted),
<a name="l01112"></a>01112             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(mini_auto),
<a name="l01113"></a>01113             <a class="code" href="gsb__data__account_8c.html#a7d4574a01587e19f2c0ed06c6328cb41">gsb_data_account_get_closed_account</a> (account_number),
<a name="l01114"></a>01114             <a class="code" href="gsb__data__account_8c.html#aca61a61a56a3e161716a443b366cd899">gsb_data_account_get_r</a> (account_number),
<a name="l01115"></a>01115             <a class="code" href="gsb__data__account_8c.html#acbc8b219af2e0520506d34eded08ad34">gsb_data_account_get_l</a> ( account_number ),
<a name="l01116"></a>01116             <a class="code" href="gsb__data__account_8c.html#a3daed40b7bb578a2e1e3f0b948ea0bf6">gsb_data_account_get_nb_rows</a> (account_number),
<a name="l01117"></a>01117             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__account_8c.html#ae4889e7a7fbdc1a3fc07a85b579adc7f">gsb_data_account_get_comment</a> (account_number)),
<a name="l01118"></a>01118         owner_str,
<a name="l01119"></a>01119             <a class="code" href="gsb__data__account_8c.html#a1b6e5d807cf10ac2685ff23c1da6b131">gsb_data_account_get_default_debit</a> (account_number),
<a name="l01120"></a>01120             <a class="code" href="gsb__data__account_8c.html#a2a8e260371d44603314ef6058958d025">gsb_data_account_get_default_credit</a> (account_number),
<a name="l01121"></a>01121             <a class="code" href="gsb__data__account_8c.html#a08abecefe58a389076e9340f08a13399">gsb_data_account_get_reconcile_sort_type</a> (account_number),
<a name="l01122"></a>01122             <a class="code" href="gsb__data__account_8c.html#ad4443e8b888d0c108a912d1713eac541">gsb_data_account_get_split_neutral_payment</a> (account_number),
<a name="l01123"></a>01123             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(sort_list),
<a name="l01124"></a>01124             <a class="code" href="gsb__data__account_8c.html#a241abfc115b880dab53eabba773be190">gsb_data_account_get_sort_type</a> (account_number),
<a name="l01125"></a>01125             <a class="code" href="gsb__data__account_8c.html#affc711f565e08ad4062076cb11d7730f">gsb_data_account_get_sort_column</a> (account_number),
<a name="l01126"></a>01126             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(sort_kind_column),
<a name="l01127"></a>01127             <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number),
<a name="l01128"></a>01128             <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number),
<a name="l01129"></a>01129             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(form_organization),
<a name="l01130"></a>01130             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(form_columns_width),
<a name="l01131"></a>01131         <a class="code" href="gsb__data__account_8c.html#a45f96754e58262d87cb7bda9c04219ce">gsb_data_account_get_bet_use_budget</a> ( account_number ) );
<a name="l01132"></a>01132 
<a name="l01133"></a>01133     <span class="keywordflow">switch</span> ( kind )
<a name="l01134"></a>01134     {
<a name="l01135"></a>01135         <span class="keywordflow">case</span> <a class="code" href="gsb__data__account_8h.html#ab5b2ad5b1ac065827dcf65b09542f53dad80fd01815f2d74aecc46cad959a3da9">GSB_TYPE_LIABILITIES</a>:
<a name="l01136"></a>01136             bet_str = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t\tBet_start_date=\&quot;%s\&quot;\n&quot;</span>
<a name="l01137"></a>01137                         <span class="stringliteral">&quot;\t\tBet_months=\&quot;%d\&quot;\n&quot;</span>
<a name="l01138"></a>01138                         <span class="stringliteral">&quot;\t\tBet_capital=\&quot;%s\&quot;\n&quot;</span>
<a name="l01139"></a>01139                         <span class="stringliteral">&quot;\t\tBet_taux_annuel=\&quot;%s\&quot;\n&quot;</span>
<a name="l01140"></a>01140                         <span class="stringliteral">&quot;\t\tBet_frais=\&quot;%s\&quot;\n&quot;</span>
<a name="l01141"></a>01141                         <span class="stringliteral">&quot;\t\tBet_type_taux=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01142"></a>01142                 <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (
<a name="l01143"></a>01143                         <a class="code" href="gsb__data__account_8c.html#a910ebbef9ceaf9559427c894531b8759">gsb_data_account_get_bet_start_date</a> ( account_number ) ) ),
<a name="l01144"></a>01144                 <a class="code" href="gsb__data__account_8c.html#a9f12538d67c1895d452f2958445862e6">gsb_data_account_get_bet_months</a> ( account_number ),
<a name="l01145"></a>01145                 <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( <a class="code" href="utils__str_8c.html#a223cea3f0d88df38e526d57e491bd27a">utils_str_dtostr</a> (
<a name="l01146"></a>01146                         <a class="code" href="gsb__data__account_8c.html#adc8e35e72438f85c98ee9baeb15dac23">gsb_data_account_get_bet_finance_capital</a> ( account_number ), 2, TRUE ) ),
<a name="l01147"></a>01147                 <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( <a class="code" href="utils__str_8c.html#a223cea3f0d88df38e526d57e491bd27a">utils_str_dtostr</a> (
<a name="l01148"></a>01148                         <a class="code" href="gsb__data__account_8c.html#a08ca65b37c03bffa2f5bbc8e2c2db6af">gsb_data_account_get_bet_finance_taux_annuel</a> ( account_number ), 2, TRUE ) ),
<a name="l01149"></a>01149                 <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( <a class="code" href="utils__str_8c.html#a223cea3f0d88df38e526d57e491bd27a">utils_str_dtostr</a> (
<a name="l01150"></a>01150                         <a class="code" href="gsb__data__account_8c.html#a8bc8a49374d9601a0e45ddc29371bb69">gsb_data_account_get_bet_finance_frais</a> ( account_number ), 2, TRUE ) ),
<a name="l01151"></a>01151                 <a class="code" href="gsb__data__account_8c.html#a22c024a9bd8458a7bb414ce7b6786ac0">gsb_data_account_get_bet_finance_type_taux</a> ( account_number ) );
<a name="l01152"></a>01152             new_string = g_strconcat ( new_string, <span class="stringliteral">&quot;\n&quot;</span>, bet_str, NULL );
<a name="l01153"></a>01153             g_free ( bet_str );
<a name="l01154"></a>01154             <span class="keywordflow">break</span>;
<a name="l01155"></a>01155         <span class="keywordflow">case</span> <a class="code" href="gsb__data__account_8h.html#ab5b2ad5b1ac065827dcf65b09542f53dadc037542033019363481655361e31a82">GSB_TYPE_ASSET</a>:
<a name="l01156"></a>01156             new_string = g_strconcat ( new_string, <span class="stringliteral">&quot; /&gt;\n&quot;</span>,NULL );
<a name="l01157"></a>01157             <span class="keywordflow">break</span>;
<a name="l01158"></a>01158         <span class="keywordflow">default</span>:
<a name="l01159"></a>01159             bet_str = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t\tBet_start_date=\&quot;%s\&quot;\n&quot;</span>
<a name="l01160"></a>01160                         <span class="stringliteral">&quot;\t\tBet_months=\&quot;%d\&quot;\n&quot;</span>
<a name="l01161"></a>01161                         <span class="stringliteral">&quot;\t\tBet_UT=\&quot;%d\&quot;\n&quot;</span>
<a name="l01162"></a>01162                         <span class="stringliteral">&quot;\t\tBet_auto_inc_month=\&quot;%d\&quot;\n&quot;</span>
<a name="l01163"></a>01163                         <span class="stringliteral">&quot;\t\tBet_select_transaction_label=\&quot;%d\&quot;\n&quot;</span> 
<a name="l01164"></a>01164                         <span class="stringliteral">&quot;\t\tBet_select_scheduled_label=\&quot;%d\&quot;\n&quot;</span> 
<a name="l01165"></a>01165                         <span class="stringliteral">&quot;\t\tBet_select_futur_label=\&quot;%d\&quot;\n&quot;</span>
<a name="l01166"></a>01166                         <span class="stringliteral">&quot;\t\tBet_SD=\&quot;%d\&quot;\n&quot;</span> 
<a name="l01167"></a>01167                         <span class="stringliteral">&quot;\t\tBet_Fi=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01168"></a>01168             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (
<a name="l01169"></a>01169                         <a class="code" href="gsb__data__account_8c.html#a910ebbef9ceaf9559427c894531b8759">gsb_data_account_get_bet_start_date</a> ( account_number ) ) ),
<a name="l01170"></a>01170             <a class="code" href="gsb__data__account_8c.html#a9f12538d67c1895d452f2958445862e6">gsb_data_account_get_bet_months</a> ( account_number ),
<a name="l01171"></a>01171             <a class="code" href="gsb__data__account_8c.html#acb1eeb5e853d8657ca2a67f19053de44">gsb_data_account_get_bet_spin_range</a> ( account_number ),
<a name="l01172"></a>01172             <a class="code" href="gsb__data__account_8c.html#adfa91ab63344315656a313d800082936">gsb_data_account_get_bet_auto_inc_month</a> ( account_number ),
<a name="l01173"></a>01173             <a class="code" href="gsb__data__account_8c.html#ab7dfbb4c1cf2d30e07269e9d2bd0fda8">gsb_data_account_get_bet_select_label</a> ( account_number, <a class="code" href="structures_8h.html#a3bcf2520348c5b510a0ead09dd209e25adbd514047946e59eb715c8940e168647">SPP_ORIGIN_TRANSACTION</a> ),
<a name="l01174"></a>01174             <a class="code" href="gsb__data__account_8c.html#ab7dfbb4c1cf2d30e07269e9d2bd0fda8">gsb_data_account_get_bet_select_label</a> ( account_number, <a class="code" href="structures_8h.html#a3bcf2520348c5b510a0ead09dd209e25a1b682ad0ffa2fd82dcb7419b4f75ccb7">SPP_ORIGIN_SCHEDULED</a> ),
<a name="l01175"></a>01175             <a class="code" href="gsb__data__account_8c.html#ab7dfbb4c1cf2d30e07269e9d2bd0fda8">gsb_data_account_get_bet_select_label</a> ( account_number, <a class="code" href="structures_8h.html#a3bcf2520348c5b510a0ead09dd209e25accfd7d3ca8c28accee67d759767e6b81">SPP_ORIGIN_FUTURE</a> ),
<a name="l01176"></a>01176             <a class="code" href="gsb__data__account_8c.html#a2e685b1a8323c9e336d79e0e7f41cf2d">gsb_data_account_get_bet_hist_data</a> ( account_number ),
<a name="l01177"></a>01177             <a class="code" href="gsb__data__account_8c.html#a3d3888aea106f90fd7715d1ee505a805">gsb_data_account_get_bet_hist_fyear</a> ( account_number ) );
<a name="l01178"></a>01178             new_string = g_strconcat ( new_string, <span class="stringliteral">&quot;\n&quot;</span>, bet_str, NULL );
<a name="l01179"></a>01179             g_free ( bet_str );
<a name="l01180"></a>01180             <span class="keywordflow">break</span>;
<a name="l01181"></a>01181     }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183         g_free (sort_list);
<a name="l01184"></a>01184         g_free (sort_kind_column);
<a name="l01185"></a>01185         g_free (form_organization);
<a name="l01186"></a>01186         g_free (form_columns_width);
<a name="l01187"></a>01187         g_free (init_balance);
<a name="l01188"></a>01188         g_free (mini_auto);
<a name="l01189"></a>01189         g_free (mini_wanted);
<a name="l01190"></a>01190     g_free ( owner_str );
<a name="l01191"></a>01191 
<a name="l01192"></a>01192         <span class="comment">/* append the new string to the file content</span>
<a name="l01193"></a>01193 <span class="comment">         * and take the new iterator */</span>
<a name="l01194"></a>01194 
<a name="l01195"></a>01195         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01196"></a>01196                                                length_calculated,
<a name="l01197"></a>01197                                                file_content,
<a name="l01198"></a>01198                                                new_string );
<a name="l01199"></a>01199 
<a name="l01200"></a>01200         list_tmp = list_tmp -&gt; next;
<a name="l01201"></a>01201     }
<a name="l01202"></a>01202     <span class="keywordflow">return</span> iterator;
<a name="l01203"></a>01203 }
<a name="l01204"></a>01204 
<a name="l01214"></a>01214 gulong gsb_file_save_payment_part ( gulong iterator,
<a name="l01215"></a>01215                         gulong *length_calculated,
<a name="l01216"></a>01216                         gchar **file_content )
<a name="l01217"></a>01217 {
<a name="l01218"></a>01218     GSList *list_tmp;
<a name="l01219"></a>01219 
<a name="l01220"></a>01220     list_tmp = <a class="code" href="gsb__data__payment_8c.html#acec454aa5a57af2dd716d6b38e97baec">gsb_data_payment_get_payments_list</a> ();
<a name="l01221"></a>01221 
<a name="l01222"></a>01222     <span class="keywordflow">while</span> (list_tmp)
<a name="l01223"></a>01223     {
<a name="l01224"></a>01224         gint payment_number;
<a name="l01225"></a>01225         gchar *new_string;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227         payment_number = <a class="code" href="gsb__data__payment_8c.html#ad8738991cf8066d32f2a9a76f465f941">gsb_data_payment_get_number</a> (list_tmp -&gt; data);
<a name="l01228"></a>01228 
<a name="l01229"></a>01229         <span class="comment">/* now we can fill the file content */</span>
<a name="l01230"></a>01230         new_string = g_markup_printf_escaped ( 
<a name="l01231"></a>01231                            <span class="stringliteral">&quot;\t&lt;Payment Number=\&quot;%d\&quot; Name=\&quot;%s\&quot; Sign=\&quot;%d\&quot; Show_entry=\&quot;%d\&quot; &quot;</span>
<a name="l01232"></a>01232                            <span class="stringliteral">&quot;Automatic_number=\&quot;%d\&quot; Current_number=\&quot;%s\&quot; Account=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01233"></a>01233                                                payment_number,
<a name="l01234"></a>01234                            <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__payment_8c.html#a3384c18af92833d2152faad71ccd16c4">gsb_data_payment_get_name</a> (payment_number)),
<a name="l01235"></a>01235                                                <a class="code" href="gsb__data__payment_8c.html#a18c88a62c285b34be984f88c03dc2e70">gsb_data_payment_get_sign</a> (payment_number),
<a name="l01236"></a>01236                                                <a class="code" href="gsb__data__payment_8c.html#a8255baec69955b14988acbff6f5bc3d9">gsb_data_payment_get_show_entry</a> (payment_number),
<a name="l01237"></a>01237                                                <a class="code" href="gsb__data__payment_8c.html#adcfc32426d570e071cb397b7a20e5988">gsb_data_payment_get_automatic_numbering</a> (payment_number),
<a name="l01238"></a>01238                                                <a class="code" href="gsb__data__payment_8c.html#a2e5d8517394a5d0685cfae13ff906f1b">gsb_data_payment_get_last_number</a> (payment_number),
<a name="l01239"></a>01239                                                <a class="code" href="gsb__data__payment_8c.html#a02601e83e3a7796d9fc863077dd91627">gsb_data_payment_get_account_number</a> (payment_number));
<a name="l01240"></a>01240 
<a name="l01241"></a>01241         <span class="comment">/* append the new string to the file content</span>
<a name="l01242"></a>01242 <span class="comment">         * and take the new iterator */</span>
<a name="l01243"></a>01243         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01244"></a>01244                                                length_calculated,
<a name="l01245"></a>01245                                                file_content,
<a name="l01246"></a>01246                                                new_string );
<a name="l01247"></a>01247         list_tmp = list_tmp -&gt; next;
<a name="l01248"></a>01248     }
<a name="l01249"></a>01249     <span class="keywordflow">return</span> iterator;
<a name="l01250"></a>01250 }
<a name="l01251"></a>01251 
<a name="l01262"></a>01262 gulong gsb_file_save_transaction_part ( gulong iterator,
<a name="l01263"></a>01263                         gulong *length_calculated,
<a name="l01264"></a>01264                         gchar **file_content,
<a name="l01265"></a>01265                         gint archive_number )
<a name="l01266"></a>01266 {
<a name="l01267"></a>01267     GSList *list_tmp;
<a name="l01268"></a>01268 
<a name="l01269"></a>01269     list_tmp = <a class="code" href="gsb__data__transaction_8c.html#aa54aeb205f29c2272154b2998fea490b">gsb_data_transaction_get_complete_transactions_list</a> ();
<a name="l01270"></a>01270 
<a name="l01271"></a>01271     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01272"></a>01272     {
<a name="l01273"></a>01273         gint transaction_number;
<a name="l01274"></a>01274         gchar *new_string;
<a name="l01275"></a>01275         gchar *amount;
<a name="l01276"></a>01276         gchar *exchange_rate;
<a name="l01277"></a>01277         gchar *exchange_fees;
<a name="l01278"></a>01278         gchar *date;
<a name="l01279"></a>01279         gchar *value_date;
<a name="l01280"></a>01280         gint transaction_archive_number;
<a name="l01281"></a>01281 
<a name="l01282"></a>01282         transaction_number = <a class="code" href="gsb__data__transaction_8c.html#a99bf548513083f4a71fe019faeccbe0a">gsb_data_transaction_get_transaction_number</a> ( list_tmp -&gt; data );
<a name="l01283"></a>01283 
<a name="l01284"></a>01284         <span class="comment">/* get the archive number for below */</span>
<a name="l01285"></a>01285         transaction_archive_number = <a class="code" href="gsb__data__transaction_8c.html#a5dfc3ab337c363b46380bf962a97d8d2">gsb_data_transaction_get_archive_number</a> (transaction_number);
<a name="l01286"></a>01286 
<a name="l01287"></a>01287         <span class="keywordflow">if</span> (archive_number)
<a name="l01288"></a>01288         {
<a name="l01289"></a>01289             <span class="comment">/* we export an archive, so continue only if the transaction belongs to that archive */</span>
<a name="l01290"></a>01290             <span class="keywordflow">if</span> (transaction_archive_number != archive_number)
<a name="l01291"></a>01291             {
<a name="l01292"></a>01292                 <span class="comment">/* the transaction will not be exported */</span>
<a name="l01293"></a>01293                 list_tmp = list_tmp -&gt; next;
<a name="l01294"></a>01294                 <span class="keywordflow">continue</span>;
<a name="l01295"></a>01295             }
<a name="l01296"></a>01296             <span class="comment">/* the transaction belongs to the archive,</span>
<a name="l01297"></a>01297 <span class="comment">             * we set its archive number to 0, to show it when we open an archive */</span>
<a name="l01298"></a>01298             transaction_archive_number = 0;
<a name="l01299"></a>01299         }
<a name="l01300"></a>01300 
<a name="l01301"></a>01301         <span class="comment">/* set the reals. On met en forme le résultat pour avoir une cohérence dans les montants</span>
<a name="l01302"></a>01302 <span class="comment">     * enregistrés dans le fichier à valider */</span>
<a name="l01303"></a>01303         amount = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01304"></a>01304                         <a class="code" href="gsb__data__transaction_8c.html#a632c5ba71e742b3ac063b4b3207cf032">gsb_data_transaction_get_amount</a> ( transaction_number ), 2 );
<a name="l01305"></a>01305         exchange_rate = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01306"></a>01306                         <a class="code" href="gsb__data__transaction_8c.html#a4a80a52634eeaaaa3b1ad3ad2e83389f">gsb_data_transaction_get_exchange_rate</a> ( transaction_number ), -1 );
<a name="l01307"></a>01307         exchange_fees = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01308"></a>01308                         <a class="code" href="gsb__data__transaction_8c.html#ae9b1f8064c54242943010ba571769529">gsb_data_transaction_get_exchange_fees</a> ( transaction_number ), 2 );
<a name="l01309"></a>01309         
<a name="l01310"></a>01310         <span class="comment">/* set the dates */</span>
<a name="l01311"></a>01311         date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> ( <a class="code" href="gsb__data__transaction_8c.html#ab0b62014885bcf3e2fbfff1ae9b32080">gsb_data_transaction_get_date</a> ( transaction_number ));
<a name="l01312"></a>01312         value_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> ( <a class="code" href="gsb__data__transaction_8c.html#a5851b4114a8f23b40107fba99ae2fbef">gsb_data_transaction_get_value_date</a> ( transaction_number ));
<a name="l01313"></a>01313 
<a name="l01314"></a>01314         <span class="comment">/* now we can fill the file content */</span>
<a name="l01315"></a>01315         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Transaction Ac=\&quot;%d\&quot; Nb=\&quot;%d\&quot; Id=\&quot;%s\&quot; Dt=\&quot;%s\&quot; &quot;</span>
<a name="l01316"></a>01316                            <span class="stringliteral">&quot;Dv=\&quot;%s\&quot; Cu=\&quot;%d\&quot; Am=\&quot;%s\&quot; Exb=\&quot;%d\&quot; Exr=\&quot;%s\&quot; Exf=\&quot;%s\&quot; &quot;</span>
<a name="l01317"></a>01317                            <span class="stringliteral">&quot;Pa=\&quot;%d\&quot; Ca=\&quot;%d\&quot; Sca=\&quot;%d\&quot; Br=\&quot;%d\&quot; No=\&quot;%s\&quot; Pn=\&quot;%d\&quot; &quot;</span>
<a name="l01318"></a>01318                            <span class="stringliteral">&quot;Pc=\&quot;%s\&quot; Ma=\&quot;%d\&quot; Ar=\&quot;%d\&quot; Au=\&quot;%d\&quot; Re=\&quot;%d\&quot; Fi=\&quot;%d\&quot; &quot;</span>
<a name="l01319"></a>01319                            <span class="stringliteral">&quot;Bu=\&quot;%d\&quot; Sbu=\&quot;%d\&quot; Vo=\&quot;%s\&quot; Ba=\&quot;%s\&quot; Trt=\&quot;%d\&quot; Mo=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01320"></a>01320                                                <a class="code" href="gsb__data__transaction_8c.html#a5b486efbc486f946e9c998a114054bce">gsb_data_transaction_get_account_number</a> ( transaction_number ),
<a name="l01321"></a>01321                                                transaction_number,
<a name="l01322"></a>01322                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__transaction_8c.html#ad171eaf081403c90154beddf8521983f">gsb_data_transaction_get_transaction_id</a> ( transaction_number)),
<a name="l01323"></a>01323                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(date),
<a name="l01324"></a>01324                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(value_date),
<a name="l01325"></a>01325                                                <a class="code" href="gsb__data__transaction_8c.html#aa39edcb597bd75a438b00b67cf898e88">gsb_data_transaction_get_currency_number</a> (transaction_number ),
<a name="l01326"></a>01326                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(amount),
<a name="l01327"></a>01327                                                <a class="code" href="gsb__data__transaction_8c.html#afd1af457967cb31d2c7396bc1f19adf7">gsb_data_transaction_get_change_between</a> (transaction_number ),
<a name="l01328"></a>01328                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(exchange_rate),
<a name="l01329"></a>01329                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(exchange_fees),
<a name="l01330"></a>01330                                                <a class="code" href="gsb__data__transaction_8c.html#afa032df45afa2ad7a4be48449a7e8d15">gsb_data_transaction_get_party_number</a> ( transaction_number),
<a name="l01331"></a>01331                                                <a class="code" href="gsb__data__transaction_8c.html#a5cdaf5e8911118bf8d1dbdfc42dc4761">gsb_data_transaction_get_category_number</a> ( transaction_number),
<a name="l01332"></a>01332                                                <a class="code" href="gsb__data__transaction_8c.html#a2e0ed6fbd584d4363d75e4b0155660b7">gsb_data_transaction_get_sub_category_number</a> (transaction_number),
<a name="l01333"></a>01333                                                <a class="code" href="gsb__data__transaction_8c.html#a2de1ba38ee196b44e3c00c10e1d645cc">gsb_data_transaction_get_split_of_transaction</a> (transaction_number),
<a name="l01334"></a>01334                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__transaction_8c.html#ad73b393673217f5b9cc295c74e030550">gsb_data_transaction_get_notes</a> (transaction_number)),
<a name="l01335"></a>01335                                                <a class="code" href="gsb__data__transaction_8c.html#aa9bc2b3aba6d0a4df30e0584ab56ede0">gsb_data_transaction_get_method_of_payment_number</a> (transaction_number),
<a name="l01336"></a>01336                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__transaction_8c.html#a018a31b8a8fe99e813b4876206cf59a1">gsb_data_transaction_get_method_of_payment_content</a> (transaction_number)),
<a name="l01337"></a>01337                                                <a class="code" href="gsb__data__transaction_8c.html#a52cf9684818c3930c5c688b54f7cf393">gsb_data_transaction_get_marked_transaction</a> (transaction_number),
<a name="l01338"></a>01338                                                transaction_archive_number,
<a name="l01339"></a>01339                                                <a class="code" href="gsb__data__transaction_8c.html#a4cc433dd23e93537f8554d6e1532f794">gsb_data_transaction_get_automatic_transaction</a> (transaction_number),
<a name="l01340"></a>01340                                                <a class="code" href="gsb__data__transaction_8c.html#a1f902ce2841e41d3eda536f2fdd3c32f">gsb_data_transaction_get_reconcile_number</a> (transaction_number),
<a name="l01341"></a>01341                                                <a class="code" href="gsb__data__transaction_8c.html#ae8f3e659e304f02abd6c2ae7dd759203">gsb_data_transaction_get_financial_year_number</a> (transaction_number),
<a name="l01342"></a>01342                                                <a class="code" href="gsb__data__transaction_8c.html#a4d84c55dbdfa032c500f4ade0754501f">gsb_data_transaction_get_budgetary_number</a> (transaction_number),
<a name="l01343"></a>01343                                                <a class="code" href="gsb__data__transaction_8c.html#a44dbcf1f953a233d0038027289aa2372">gsb_data_transaction_get_sub_budgetary_number</a> (transaction_number),
<a name="l01344"></a>01344                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__transaction_8c.html#ad9886b09c3afc57a5c551896046a849a">gsb_data_transaction_get_voucher</a> (transaction_number)),
<a name="l01345"></a>01345                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__transaction_8c.html#a8ef7712f47278152551c3d9454ecf36a">gsb_data_transaction_get_bank_references</a> (transaction_number)),
<a name="l01346"></a>01346                                                <a class="code" href="gsb__data__transaction_8c.html#a4040925a3db49485b5a2b0a8ea19d2ee">gsb_data_transaction_get_contra_transaction_number</a> (transaction_number),
<a name="l01347"></a>01347                                                <a class="code" href="gsb__data__transaction_8c.html#a6018560ece7ab02e8d46bc9bdaffd607">gsb_data_transaction_get_mother_transaction_number</a> (transaction_number));
<a name="l01348"></a>01348 
<a name="l01349"></a>01349         g_free (amount);
<a name="l01350"></a>01350         g_free (exchange_rate);
<a name="l01351"></a>01351         g_free (exchange_fees);
<a name="l01352"></a>01352         g_free (date);
<a name="l01353"></a>01353         g_free (value_date);
<a name="l01354"></a>01354 
<a name="l01355"></a>01355         <span class="comment">/* append the new string to the file content</span>
<a name="l01356"></a>01356 <span class="comment">         * and take the new iterator */</span>
<a name="l01357"></a>01357 
<a name="l01358"></a>01358         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01359"></a>01359                                                length_calculated,
<a name="l01360"></a>01360                                                file_content,
<a name="l01361"></a>01361                                                new_string );
<a name="l01362"></a>01362         list_tmp = list_tmp -&gt; next;
<a name="l01363"></a>01363     }
<a name="l01364"></a>01364     <span class="keywordflow">return</span> iterator;
<a name="l01365"></a>01365 }
<a name="l01366"></a>01366 
<a name="l01367"></a>01367 
<a name="l01377"></a>01377 gulong gsb_file_save_scheduled_part ( gulong iterator,
<a name="l01378"></a>01378                         gulong *length_calculated,
<a name="l01379"></a>01379                         gchar **file_content )
<a name="l01380"></a>01380 {
<a name="l01381"></a>01381     GSList *list_tmp;
<a name="l01382"></a>01382         
<a name="l01383"></a>01383     list_tmp = <a class="code" href="gsb__data__scheduled_8c.html#a9e321b67331018d8f0a42022643a10d2">gsb_data_scheduled_get_scheduled_list</a> ();
<a name="l01384"></a>01384 
<a name="l01385"></a>01385     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01386"></a>01386     {
<a name="l01387"></a>01387         gint scheduled_number;
<a name="l01388"></a>01388         gchar *new_string;
<a name="l01389"></a>01389         gchar *amount;
<a name="l01390"></a>01390         gchar *date;
<a name="l01391"></a>01391         gchar *limit_date;
<a name="l01392"></a>01392 
<a name="l01393"></a>01393         scheduled_number = <a class="code" href="gsb__data__scheduled_8c.html#ab2a72c93ed6dcf08a477aea4e069c5e3">gsb_data_scheduled_get_scheduled_number</a> (list_tmp -&gt; data);
<a name="l01394"></a>01394 
<a name="l01395"></a>01395         <span class="comment">/* set the real */</span>
<a name="l01396"></a>01396         amount = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01397"></a>01397                         <a class="code" href="gsb__data__scheduled_8c.html#a60f83f62f6ca02e7b786ed30a1b9e6c6">gsb_data_scheduled_get_amount</a> ( scheduled_number ), 2 );
<a name="l01398"></a>01398 
<a name="l01399"></a>01399         <span class="comment">/* set the dates */</span>
<a name="l01400"></a>01400         date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__scheduled_8c.html#ae4e987a3bddc7f5550d91fae634d6dee">gsb_data_scheduled_get_date</a> ( scheduled_number));
<a name="l01401"></a>01401         limit_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__scheduled_8c.html#a7817b56aaa3000e66de01e0d436f267f">gsb_data_scheduled_get_limit_date</a> ( scheduled_number));
<a name="l01402"></a>01402 
<a name="l01403"></a>01403         <span class="comment">/* now we can fill the file content */</span>
<a name="l01404"></a>01404         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Scheduled Nb=\&quot;%d\&quot; Dt=\&quot;%s\&quot; Ac=\&quot;%d\&quot; Am=\&quot;%s\&quot; &quot;</span>
<a name="l01405"></a>01405                            <span class="stringliteral">&quot;Cu=\&quot;%d\&quot; Pa=\&quot;%d\&quot; Ca=\&quot;%d\&quot; Sca=\&quot;%d\&quot; Tra=\&quot;%d\&quot; Pn=\&quot;%d\&quot; &quot;</span>
<a name="l01406"></a>01406                            <span class="stringliteral">&quot;CPn=\&quot;%d\&quot; Pc=\&quot;%s\&quot; Fi=\&quot;%d\&quot; Bu=\&quot;%d\&quot; Sbu=\&quot;%d\&quot; No=\&quot;%s\&quot; &quot;</span>
<a name="l01407"></a>01407                            <span class="stringliteral">&quot;Au=\&quot;%d\&quot; Pe=\&quot;%d\&quot; Pei=\&quot;%d\&quot; Pep=\&quot;%d\&quot; Dtl=\&quot;%s\&quot; Br=\&quot;%d\&quot; &quot;</span>
<a name="l01408"></a>01408                            <span class="stringliteral">&quot;Mo=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01409"></a>01409                                                scheduled_number,
<a name="l01410"></a>01410                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(date),
<a name="l01411"></a>01411                                                <a class="code" href="gsb__data__scheduled_8c.html#aa15f27d9a7a635618cfc3b536cebb980">gsb_data_scheduled_get_account_number</a> ( scheduled_number),
<a name="l01412"></a>01412                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(amount),
<a name="l01413"></a>01413                                                <a class="code" href="gsb__data__scheduled_8c.html#ae2e1360e9ff4b1ba96bb241cbe55db25">gsb_data_scheduled_get_currency_number</a> ( scheduled_number),
<a name="l01414"></a>01414                                                <a class="code" href="gsb__data__scheduled_8c.html#a3005278f65b2a095b1ccebdbf7a70f3d">gsb_data_scheduled_get_party_number</a> ( scheduled_number),
<a name="l01415"></a>01415                                                <a class="code" href="gsb__data__scheduled_8c.html#a6d9e3ecf8c981f4d49d7b4c3d0f5dd86">gsb_data_scheduled_get_category_number</a> ( scheduled_number),
<a name="l01416"></a>01416                                                <a class="code" href="gsb__data__scheduled_8c.html#a0f906373715193111c3dd1d6af30000a">gsb_data_scheduled_get_sub_category_number</a> ( scheduled_number),
<a name="l01417"></a>01417                                                <a class="code" href="gsb__data__scheduled_8c.html#ab6286df91402f557a522e8d6ff8b57c0">gsb_data_scheduled_get_account_number_transfer</a> ( scheduled_number),
<a name="l01418"></a>01418                                                <a class="code" href="gsb__data__scheduled_8c.html#acd7da6799398885afd2e3a58eaa7fe1a">gsb_data_scheduled_get_method_of_payment_number</a> ( scheduled_number),
<a name="l01419"></a>01419                                                <a class="code" href="gsb__data__scheduled_8c.html#aa695866444c64f390288fbea3f76de98">gsb_data_scheduled_get_contra_method_of_payment_number</a> ( scheduled_number),
<a name="l01420"></a>01420                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__scheduled_8c.html#a906e28f3b1d76861e4cd297bb59d66d5">gsb_data_scheduled_get_method_of_payment_content</a> ( scheduled_number)),
<a name="l01421"></a>01421                                                <a class="code" href="gsb__data__scheduled_8c.html#a11bf3eb936d3cafc51cfe1fbd3d6a770">gsb_data_scheduled_get_financial_year_number</a> ( scheduled_number),
<a name="l01422"></a>01422                                                <a class="code" href="gsb__data__scheduled_8c.html#a3019884175ba5217da66a26601fbf9f2">gsb_data_scheduled_get_budgetary_number</a> ( scheduled_number),
<a name="l01423"></a>01423                                                <a class="code" href="gsb__data__scheduled_8c.html#a6e325242a5a8187b876eb57f6e1d10ed">gsb_data_scheduled_get_sub_budgetary_number</a> ( scheduled_number),
<a name="l01424"></a>01424                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__scheduled_8c.html#a77f3e371acac87303d217a472d5ebc3d">gsb_data_scheduled_get_notes</a> ( scheduled_number)),
<a name="l01425"></a>01425                                                <a class="code" href="gsb__data__scheduled_8c.html#ae5f2deb3539449512d8e9c3bc3011525">gsb_data_scheduled_get_automatic_scheduled</a> ( scheduled_number),
<a name="l01426"></a>01426                                                <a class="code" href="gsb__data__scheduled_8c.html#a60ab7adb921a63a38d8bcaec72d4165d">gsb_data_scheduled_get_frequency</a> ( scheduled_number),
<a name="l01427"></a>01427                                                <a class="code" href="gsb__data__scheduled_8c.html#aaf1176d8c782270fe8e4eec21937bf05">gsb_data_scheduled_get_user_interval</a> ( scheduled_number),
<a name="l01428"></a>01428                                                <a class="code" href="gsb__data__scheduled_8c.html#a7d7cfb1bc2ca105b20b5627c94981096">gsb_data_scheduled_get_user_entry</a> ( scheduled_number),
<a name="l01429"></a>01429                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(limit_date),
<a name="l01430"></a>01430                                                <a class="code" href="gsb__data__scheduled_8c.html#ae2bbf34058b508781bd4af1292b64d6a">gsb_data_scheduled_get_split_of_scheduled</a> ( scheduled_number),
<a name="l01431"></a>01431                                                <a class="code" href="gsb__data__scheduled_8c.html#a3f8e6e2985be6cb88c0f38965b75d804">gsb_data_scheduled_get_mother_scheduled_number</a> ( scheduled_number));
<a name="l01432"></a>01432 
<a name="l01433"></a>01433         g_free (amount);
<a name="l01434"></a>01434         g_free (date);
<a name="l01435"></a>01435         g_free (limit_date);
<a name="l01436"></a>01436 
<a name="l01437"></a>01437         <span class="comment">/* append the new string to the file content</span>
<a name="l01438"></a>01438 <span class="comment">         * and take the new iterator */</span>
<a name="l01439"></a>01439 
<a name="l01440"></a>01440         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01441"></a>01441                                                length_calculated,
<a name="l01442"></a>01442                                                file_content,
<a name="l01443"></a>01443                                                new_string );
<a name="l01444"></a>01444         list_tmp = list_tmp -&gt; next;
<a name="l01445"></a>01445     }
<a name="l01446"></a>01446     <span class="keywordflow">return</span> iterator;
<a name="l01447"></a>01447 }
<a name="l01448"></a>01448 
<a name="l01449"></a>01449 
<a name="l01459"></a>01459 gulong gsb_file_save_party_part ( gulong iterator,
<a name="l01460"></a>01460                         gulong *length_calculated,
<a name="l01461"></a>01461                         gchar **file_content )
<a name="l01462"></a>01462 {
<a name="l01463"></a>01463     GSList *list_tmp;
<a name="l01464"></a>01464         
<a name="l01465"></a>01465     list_tmp = <a class="code" href="gsb__data__payee_8c.html#a2fe0b4b22dcae74be865456e5f7c9995">gsb_data_payee_get_payees_list</a> ();
<a name="l01466"></a>01466 
<a name="l01467"></a>01467     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01468"></a>01468     {
<a name="l01469"></a>01469         gchar *new_string;
<a name="l01470"></a>01470         gint payee_number;
<a name="l01471"></a>01471 
<a name="l01472"></a>01472         payee_number = <a class="code" href="gsb__data__payee_8c.html#a8fba569c8347fa6e1f98f5f396d6a518">gsb_data_payee_get_no_payee</a> (list_tmp -&gt; data);
<a name="l01473"></a>01473         <span class="comment">/* now we can fill the file content */</span>
<a name="l01474"></a>01474 
<a name="l01475"></a>01475         <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__payee_8c.html#adc6080b7376628d3902f5fd861deb45a">gsb_data_payee_get_name</a> ( payee_number, TRUE ) == NULL )
<a name="l01476"></a>01476         {
<a name="l01477"></a>01477             list_tmp = list_tmp -&gt; next;
<a name="l01478"></a>01478             <span class="keywordflow">continue</span>;
<a name="l01479"></a>01479         }
<a name="l01480"></a>01480 
<a name="l01481"></a>01481         new_string = g_markup_printf_escaped ( 
<a name="l01482"></a>01482                             <span class="stringliteral">&quot;\t&lt;Party Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Txt=\&quot;%s\&quot; Search=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l01483"></a>01483                             payee_number,
<a name="l01484"></a>01484                             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__payee_8c.html#adc6080b7376628d3902f5fd861deb45a">gsb_data_payee_get_name</a> (payee_number, TRUE )),
<a name="l01485"></a>01485                             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__payee_8c.html#a0b399cb8a65b9225323207be946c0d10">gsb_data_payee_get_description</a> (payee_number)),
<a name="l01486"></a>01486                             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__payee_8c.html#a8162f3417a19a1fff59c24b47c28e891">gsb_data_payee_get_search_string</a> (payee_number) ));
<a name="l01487"></a>01487 
<a name="l01488"></a>01488         <span class="comment">/* append the new string to the file content</span>
<a name="l01489"></a>01489 <span class="comment">         * and take the new iterator */</span>
<a name="l01490"></a>01490 
<a name="l01491"></a>01491         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01492"></a>01492                             length_calculated,
<a name="l01493"></a>01493                             file_content,
<a name="l01494"></a>01494                             new_string );
<a name="l01495"></a>01495         list_tmp = list_tmp -&gt; next;
<a name="l01496"></a>01496     }
<a name="l01497"></a>01497     <span class="keywordflow">return</span> iterator;
<a name="l01498"></a>01498 }
<a name="l01499"></a>01499 
<a name="l01500"></a>01500 
<a name="l01510"></a><a class="code" href="gsb__file__save_8h.html#af255442e956aa95c1b2c223b4cd07481">01510</a> gulong <a class="code" href="gsb__file__save_8c.html#af255442e956aa95c1b2c223b4cd07481">gsb_file_save_category_part</a> ( gulong iterator,
<a name="l01511"></a>01511                         gulong *length_calculated,
<a name="l01512"></a>01512                         gchar **file_content )
<a name="l01513"></a>01513 {
<a name="l01514"></a>01514     GSList *list_tmp;
<a name="l01515"></a>01515         
<a name="l01516"></a>01516     list_tmp = <a class="code" href="gsb__data__category_8c.html#a818774b4775a516ebcffe7bbea3fbaeb">gsb_data_category_get_categories_list</a> ();
<a name="l01517"></a>01517 
<a name="l01518"></a>01518     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01519"></a>01519     {
<a name="l01520"></a>01520         gchar *new_string;
<a name="l01521"></a>01521         gint category_number;
<a name="l01522"></a>01522         GSList *sub_list_tmp;
<a name="l01523"></a>01523 
<a name="l01524"></a>01524         category_number = <a class="code" href="gsb__data__category_8c.html#ad96f1f1ae0532eb5ae3503a79dcaa64d">gsb_data_category_get_no_category</a> (list_tmp -&gt; data);
<a name="l01525"></a>01525 
<a name="l01526"></a>01526         <span class="comment">/* now we can fill the file content */</span>
<a name="l01527"></a>01527 
<a name="l01528"></a>01528         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Category Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Kd=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01529"></a>01529                                                category_number,
<a name="l01530"></a>01530                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__category_8c.html#a615342249ac310a61000690303ce88a9">gsb_data_category_get_name</a> ( category_number,
<a name="l01531"></a>01531                                                                             0,
<a name="l01532"></a>01532                                                                             NULL )),
<a name="l01533"></a>01533                                                <a class="code" href="gsb__data__category_8c.html#ad207c5dac58f010fe8c73c4e2f2f5a58">gsb_data_category_get_type</a> ( category_number ));
<a name="l01534"></a>01534 
<a name="l01535"></a>01535         <span class="comment">/* append the new string to the file content</span>
<a name="l01536"></a>01536 <span class="comment">         * and take the new iterator */</span>
<a name="l01537"></a>01537 
<a name="l01538"></a>01538         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01539"></a>01539                                                length_calculated,
<a name="l01540"></a>01540                                                file_content,
<a name="l01541"></a>01541                                                new_string );
<a name="l01542"></a>01542         <span class="comment">/* save the sub-categories */</span>
<a name="l01543"></a>01543 
<a name="l01544"></a>01544         sub_list_tmp = <a class="code" href="gsb__data__category_8c.html#a5b6c6e3288cd0e25f28dd9ac1af6979f">gsb_data_category_get_sub_category_list</a> ( category_number );
<a name="l01545"></a>01545 
<a name="l01546"></a>01546         <span class="keywordflow">while</span> ( sub_list_tmp )
<a name="l01547"></a>01547         {
<a name="l01548"></a>01548             gint sub_category_number;
<a name="l01549"></a>01549 
<a name="l01550"></a>01550             sub_category_number = <a class="code" href="gsb__data__category_8c.html#a55a6b25f3fe1e0c08f603308ab091d97">gsb_data_category_get_no_sub_category</a> (sub_list_tmp -&gt; data);
<a name="l01551"></a>01551 
<a name="l01552"></a>01552             <span class="comment">/* now we can fill the file content</span>
<a name="l01553"></a>01553 <span class="comment">             * carrefull : the number of category must be the first */</span>
<a name="l01554"></a>01554 
<a name="l01555"></a>01555             new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Sub_category Nbc=\&quot;%d\&quot; Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l01556"></a>01556                                                    category_number,
<a name="l01557"></a>01557                                                    sub_category_number,
<a name="l01558"></a>01558                                                    <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__category_8c.html#a3b5bc5fb4125a2e3e8df0c922cbee149">gsb_data_category_get_sub_category_name</a> ( category_number,
<a name="l01559"></a>01559                                                                                              sub_category_number,
<a name="l01560"></a>01560                                                                                              NULL )));
<a name="l01561"></a>01561 
<a name="l01562"></a>01562             <span class="comment">/* append the new string to the file content</span>
<a name="l01563"></a>01563 <span class="comment">             * and take the new iterator */</span>
<a name="l01564"></a>01564 
<a name="l01565"></a>01565             iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01566"></a>01566                                                    length_calculated,
<a name="l01567"></a>01567                                                    file_content,
<a name="l01568"></a>01568                                                    new_string );
<a name="l01569"></a>01569 
<a name="l01570"></a>01570             sub_list_tmp = sub_list_tmp -&gt; next;
<a name="l01571"></a>01571         }
<a name="l01572"></a>01572         list_tmp = list_tmp -&gt; next;
<a name="l01573"></a>01573     }
<a name="l01574"></a>01574     <span class="keywordflow">return</span> iterator;
<a name="l01575"></a>01575 }
<a name="l01576"></a>01576 
<a name="l01577"></a>01577 
<a name="l01587"></a><a class="code" href="gsb__file__save_8h.html#a46e773fc842889454bd36ed6e93ac4af">01587</a> gulong <a class="code" href="gsb__file__save_8c.html#a46e773fc842889454bd36ed6e93ac4af">gsb_file_save_budgetary_part</a> ( gulong iterator,
<a name="l01588"></a>01588                         gulong *length_calculated,
<a name="l01589"></a>01589                         gchar **file_content )
<a name="l01590"></a>01590 {
<a name="l01591"></a>01591     GSList *list_tmp;
<a name="l01592"></a>01592         
<a name="l01593"></a>01593     list_tmp = <a class="code" href="gsb__data__budget_8c.html#a5c36c8f11ed3cd9c03a97c89a27fbc5b">gsb_data_budget_get_budgets_list</a> ();
<a name="l01594"></a>01594 
<a name="l01595"></a>01595     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01596"></a>01596     {
<a name="l01597"></a>01597         gchar *new_string;
<a name="l01598"></a>01598         gint budget_number;
<a name="l01599"></a>01599         GSList *sub_list_tmp;
<a name="l01600"></a>01600 
<a name="l01601"></a>01601         budget_number = <a class="code" href="gsb__data__budget_8c.html#ac49b01b1bea1214e11e6f4d917d2e96a">gsb_data_budget_get_no_budget</a> (list_tmp -&gt; data);
<a name="l01602"></a>01602 
<a name="l01603"></a>01603         <span class="comment">/* now we can fill the file content */</span>
<a name="l01604"></a>01604 
<a name="l01605"></a>01605         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Budgetary Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Kd=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01606"></a>01606                                                budget_number,
<a name="l01607"></a>01607                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__budget_8c.html#af857141b1d34674997a047500fd76060">gsb_data_budget_get_name</a> ( budget_number,
<a name="l01608"></a>01608                                                                           0,
<a name="l01609"></a>01609                                                                           NULL )),
<a name="l01610"></a>01610                                                <a class="code" href="gsb__data__budget_8c.html#a11b94ff79cd2f1c623fd8e83463a2321">gsb_data_budget_get_type</a> ( budget_number ));
<a name="l01611"></a>01611 
<a name="l01612"></a>01612         <span class="comment">/* append the new string to the file content</span>
<a name="l01613"></a>01613 <span class="comment">         * and take the new iterator */</span>
<a name="l01614"></a>01614 
<a name="l01615"></a>01615         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01616"></a>01616                                                length_calculated,
<a name="l01617"></a>01617                                                file_content,
<a name="l01618"></a>01618                                                new_string );
<a name="l01619"></a>01619         <span class="comment">/* save the sub-budgetaries */</span>
<a name="l01620"></a>01620 
<a name="l01621"></a>01621         sub_list_tmp = <a class="code" href="gsb__data__budget_8c.html#a6bc99abfd66c75159af15d6531c3677e">gsb_data_budget_get_sub_budget_list</a> ( budget_number );
<a name="l01622"></a>01622 
<a name="l01623"></a>01623         <span class="keywordflow">while</span> ( sub_list_tmp )
<a name="l01624"></a>01624         {
<a name="l01625"></a>01625             gint sub_budget_number;
<a name="l01626"></a>01626 
<a name="l01627"></a>01627             sub_budget_number = <a class="code" href="gsb__data__budget_8c.html#ae9828f372bab1e58bba1fc7d99fef6ea">gsb_data_budget_get_no_sub_budget</a> (sub_list_tmp -&gt; data);
<a name="l01628"></a>01628 
<a name="l01629"></a>01629             <span class="comment">/* now we can fill the file content</span>
<a name="l01630"></a>01630 <span class="comment">             * carrefull : the number of budget must be the first */</span>
<a name="l01631"></a>01631 
<a name="l01632"></a>01632             new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Sub_budgetary Nbb=\&quot;%d\&quot; Nb=\&quot;%d\&quot; &quot;</span>
<a name="l01633"></a>01633                            <span class="stringliteral">&quot;Na=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l01634"></a>01634                                                    budget_number,
<a name="l01635"></a>01635                                                    sub_budget_number,
<a name="l01636"></a>01636                                                    <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__budget_8c.html#a10e64049e14c7fba1d4281d418f34eab">gsb_data_budget_get_sub_budget_name</a> ( budget_number,
<a name="l01637"></a>01637                                                                                          sub_budget_number,
<a name="l01638"></a>01638                                                                                          NULL )));
<a name="l01639"></a>01639 
<a name="l01640"></a>01640             <span class="comment">/* append the new string to the file content</span>
<a name="l01641"></a>01641 <span class="comment">             * and take the new iterator */</span>
<a name="l01642"></a>01642 
<a name="l01643"></a>01643             iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01644"></a>01644                                                    length_calculated,
<a name="l01645"></a>01645                                                    file_content,
<a name="l01646"></a>01646                                                    new_string );
<a name="l01647"></a>01647 
<a name="l01648"></a>01648             sub_list_tmp = sub_list_tmp -&gt; next;
<a name="l01649"></a>01649         }
<a name="l01650"></a>01650         list_tmp = list_tmp -&gt; next;
<a name="l01651"></a>01651     }
<a name="l01652"></a>01652     <span class="keywordflow">return</span> iterator;
<a name="l01653"></a>01653 }
<a name="l01654"></a>01654 
<a name="l01655"></a>01655 
<a name="l01665"></a>01665 gulong gsb_file_save_currency_part ( gulong iterator,
<a name="l01666"></a>01666                         gulong *length_calculated,
<a name="l01667"></a>01667                         gchar **file_content )
<a name="l01668"></a>01668 {
<a name="l01669"></a>01669     GSList *list_tmp;
<a name="l01670"></a>01670         
<a name="l01671"></a>01671     list_tmp = <a class="code" href="gsb__data__currency_8c.html#a147d01fc4583c3c4c34189cff9611db1">gsb_data_currency_get_currency_list</a> ();
<a name="l01672"></a>01672 
<a name="l01673"></a>01673     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01674"></a>01674     {
<a name="l01675"></a>01675         gchar *new_string;
<a name="l01676"></a>01676         gint currency_number;
<a name="l01677"></a>01677 
<a name="l01678"></a>01678         currency_number = <a class="code" href="gsb__data__currency_8c.html#acaa91f6f1dbf289f4f00a0f598cdbfd4">gsb_data_currency_get_no_currency</a> (list_tmp -&gt; data);
<a name="l01679"></a>01679 
<a name="l01680"></a>01680         <span class="comment">/* now we can fill the file content */</span>
<a name="l01681"></a>01681 
<a name="l01682"></a>01682         new_string = g_markup_printf_escaped (
<a name="l01683"></a>01683                            <span class="stringliteral">&quot;\t&lt;Currency Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Co=\&quot;%s\&quot; Ico=\&quot;%s\&quot; Fl=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01684"></a>01684                                                currency_number,
<a name="l01685"></a>01685                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__currency_8c.html#a0120c1acd462d7ad69ae349d74b23a34">gsb_data_currency_get_name</a> (currency_number)),
<a name="l01686"></a>01686                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__currency_8c.html#a6f9afd2f990b4e988a468c868f4371a4">gsb_data_currency_get_code</a> (currency_number)),
<a name="l01687"></a>01687                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__currency_8c.html#a2ad6d2ddf40f2a9da62e9a4f9252b869">gsb_data_currency_get_code_iso4217</a> (currency_number)),
<a name="l01688"></a>01688                                                <a class="code" href="gsb__data__currency_8c.html#ae61136d9086c83d0fc0c8ea42e463c11">gsb_data_currency_get_floating_point</a> (currency_number));
<a name="l01689"></a>01689 
<a name="l01690"></a>01690         <span class="comment">/* append the new string to the file content</span>
<a name="l01691"></a>01691 <span class="comment">         * and take the new iterator */</span>
<a name="l01692"></a>01692 
<a name="l01693"></a>01693         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01694"></a>01694                                                length_calculated,
<a name="l01695"></a>01695                                                file_content,
<a name="l01696"></a>01696                                                new_string );
<a name="l01697"></a>01697         list_tmp = list_tmp -&gt; next;
<a name="l01698"></a>01698     }
<a name="l01699"></a>01699     <span class="keywordflow">return</span> iterator;
<a name="l01700"></a>01700 }
<a name="l01701"></a>01701 
<a name="l01711"></a>01711 gulong gsb_file_save_currency_link_part ( gulong iterator,
<a name="l01712"></a>01712                         gulong *length_calculated,
<a name="l01713"></a>01713                         gchar **file_content )
<a name="l01714"></a>01714 {
<a name="l01715"></a>01715     GSList *list_tmp;
<a name="l01716"></a>01716 
<a name="l01717"></a>01717     list_tmp = <a class="code" href="gsb__data__currency__link_8c.html#afabcb6dbde8dd4e991d69acf4c515ff6">gsb_data_currency_link_get_currency_link_list</a> ();
<a name="l01718"></a>01718 
<a name="l01719"></a>01719     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01720"></a>01720     {
<a name="l01721"></a>01721     gchar *new_string;
<a name="l01722"></a>01722     gint link_number;
<a name="l01723"></a>01723     gchar *change_rate;
<a name="l01724"></a>01724     gchar *strdate;
<a name="l01725"></a>01725 
<a name="l01726"></a>01726     link_number = <a class="code" href="gsb__data__currency__link_8c.html#a98649f0d33b433e86464d1446d72736e">gsb_data_currency_link_get_no_currency_link</a> (list_tmp -&gt; data);
<a name="l01727"></a>01727 
<a name="l01728"></a>01728     <span class="comment">/* set the number */</span>
<a name="l01729"></a>01729     change_rate = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01730"></a>01730                         <a class="code" href="gsb__data__currency__link_8c.html#aa18864d68d7555d3b39e14ef87beeb7d">gsb_data_currency_link_get_change_rate</a> ( link_number ), -1 );
<a name="l01731"></a>01731 
<a name="l01732"></a>01732     <span class="comment">/* set the date of modification */</span>
<a name="l01733"></a>01733     strdate = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> ( <a class="code" href="gsb__data__currency__link_8c.html#aa69aa5e3a5a36188b6b78e37f72a566c">gsb_data_currency_link_get_modified_date</a> ( link_number ) );
<a name="l01734"></a>01734 
<a name="l01735"></a>01735     <span class="comment">/* now we can fill the file content */</span>
<a name="l01736"></a>01736     new_string = g_markup_printf_escaped (
<a name="l01737"></a>01737                         <span class="stringliteral">&quot;\t&lt;Currency_link Nb=\&quot;%d\&quot; Cu1=\&quot;%d\&quot; Cu2=\&quot;%d\&quot; Ex=\&quot;%s\&quot; &quot;</span>
<a name="l01738"></a>01738                         <span class="stringliteral">&quot;Modified_date=\&quot;%s\&quot; Fl=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01739"></a>01739                         link_number,
<a name="l01740"></a>01740                         <a class="code" href="gsb__data__currency__link_8c.html#a2591e4c674d78df9749c4b3550102a9c">gsb_data_currency_link_get_first_currency</a> ( link_number ),
<a name="l01741"></a>01741                         <a class="code" href="gsb__data__currency__link_8c.html#a7b5878d793377c0cd6cb5c140f7dc56d">gsb_data_currency_link_get_second_currency</a> (link_number),
<a name="l01742"></a>01742                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a> ( change_rate ),
<a name="l01743"></a>01743                         strdate,
<a name="l01744"></a>01744                         <a class="code" href="gsb__data__currency__link_8c.html#a98c2a1a949a837d8a8e81273a1b5597a">gsb_data_currency_link_get_fixed_link</a> ( link_number ) );
<a name="l01745"></a>01745 
<a name="l01746"></a>01746     g_free ( change_rate );
<a name="l01747"></a>01747     g_free ( strdate );
<a name="l01748"></a>01748 
<a name="l01749"></a>01749     <span class="comment">/* append the new string to the file content</span>
<a name="l01750"></a>01750 <span class="comment">     * and take the new iterator */</span>
<a name="l01751"></a>01751 
<a name="l01752"></a>01752     iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01753"></a>01753                         length_calculated,
<a name="l01754"></a>01754                         file_content,
<a name="l01755"></a>01755                         new_string );
<a name="l01756"></a>01756     list_tmp = list_tmp -&gt; next;
<a name="l01757"></a>01757     }
<a name="l01758"></a>01758     <span class="keywordflow">return</span> iterator;
<a name="l01759"></a>01759 }
<a name="l01760"></a>01760 
<a name="l01761"></a>01761 
<a name="l01762"></a>01762 
<a name="l01772"></a>01772 gulong gsb_file_save_bank_part ( gulong iterator,
<a name="l01773"></a>01773                         gulong *length_calculated,
<a name="l01774"></a>01774                         gchar **file_content )
<a name="l01775"></a>01775 {
<a name="l01776"></a>01776     GSList *list_tmp;
<a name="l01777"></a>01777         
<a name="l01778"></a>01778     list_tmp = <a class="code" href="gsb__data__bank_8c.html#a0e4a0af8810f138e45e0965d99f17f31">gsb_data_bank_get_bank_list</a> ();
<a name="l01779"></a>01779 
<a name="l01780"></a>01780     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01781"></a>01781     {
<a name="l01782"></a>01782         gint bank_number;
<a name="l01783"></a>01783         gchar *new_string;
<a name="l01784"></a>01784 
<a name="l01785"></a>01785         bank_number = <a class="code" href="gsb__data__bank_8c.html#aeaa802abf5fdc54d005a11ab65a537dc">gsb_data_bank_get_no_bank</a> (list_tmp -&gt; data);
<a name="l01786"></a>01786 
<a name="l01787"></a>01787         <span class="comment">/* now we can fill the file content */</span>
<a name="l01788"></a>01788         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Bank Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Co=\&quot;%s\&quot; BIC=\&quot;%s\&quot; &quot;</span>
<a name="l01789"></a>01789                         <span class="stringliteral">&quot;Adr=\&quot;%s\&quot; Tel=\&quot;%s\&quot; Mail=\&quot;%s\&quot; Web=\&quot;%s\&quot; Nac=\&quot;%s\&quot; Faxc=\&quot;%s\&quot; &quot;</span>
<a name="l01790"></a>01790                         <span class="stringliteral">&quot;Telc=\&quot;%s\&quot; Mailc=\&quot;%s\&quot; Rem=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l01791"></a>01791                         bank_number,
<a name="l01792"></a>01792                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a81012ac3ba7f570044e23fdf64c20693">gsb_data_bank_get_name</a> (bank_number)),
<a name="l01793"></a>01793                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a13a589498f9c111fae65c5fd5cb8b322">gsb_data_bank_get_code</a> (bank_number)),
<a name="l01794"></a>01794                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a3a7de2749f841761e47909b5c6a7bc82">gsb_data_bank_get_bic</a> (bank_number)),
<a name="l01795"></a>01795                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#ac14e4a008f5bfd0907ce034f12a6a845">gsb_data_bank_get_bank_address</a> (bank_number)),
<a name="l01796"></a>01796                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a22fcd40a34e1067278131a3605c4f99b">gsb_data_bank_get_bank_tel</a> (bank_number)),
<a name="l01797"></a>01797                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a81d9d84a24978b647f915e9b927b5a1c">gsb_data_bank_get_bank_mail</a> (bank_number)),
<a name="l01798"></a>01798                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#ae13bcbbbd9aa788c437c2487caf8a339">gsb_data_bank_get_bank_web</a> (bank_number)),
<a name="l01799"></a>01799                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a22dc4c253cd27be2af29bf4be274aec0">gsb_data_bank_get_correspondent_name</a> (bank_number)),
<a name="l01800"></a>01800                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a797e13d2d47e9679d3994a0b84b2f6bf">gsb_data_bank_get_correspondent_fax</a> (bank_number)),
<a name="l01801"></a>01801                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#a597edbed255d22aa30fbfbf7f85403d9">gsb_data_bank_get_correspondent_tel</a> (bank_number)),
<a name="l01802"></a>01802                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#ab46d3251ade8383b98be516cc99a5bbe">gsb_data_bank_get_correspondent_mail</a> (bank_number)),
<a name="l01803"></a>01803                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__bank_8c.html#ada7393b44071e69a795f9609bc158f8e">gsb_data_bank_get_bank_note</a> (bank_number)));
<a name="l01804"></a>01804 
<a name="l01805"></a>01805         <span class="comment">/* append the new string to the file content</span>
<a name="l01806"></a>01806 <span class="comment">         * and take the new iterator */</span>
<a name="l01807"></a>01807 
<a name="l01808"></a>01808         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01809"></a>01809                                                length_calculated,
<a name="l01810"></a>01810                                                file_content,
<a name="l01811"></a>01811                                                new_string );
<a name="l01812"></a>01812         list_tmp = list_tmp -&gt; next;
<a name="l01813"></a>01813     }
<a name="l01814"></a>01814     <span class="keywordflow">return</span> iterator;
<a name="l01815"></a>01815 }
<a name="l01816"></a>01816 
<a name="l01817"></a>01817 
<a name="l01827"></a>01827 gulong gsb_file_save_financial_year_part ( gulong iterator,
<a name="l01828"></a>01828                         gulong *length_calculated,
<a name="l01829"></a>01829                         gchar **file_content )
<a name="l01830"></a>01830 {
<a name="l01831"></a>01831     GSList *list_tmp;
<a name="l01832"></a>01832         
<a name="l01833"></a>01833     list_tmp = <a class="code" href="gsb__data__fyear_8c.html#a981e70c384f682f93195b489ca06e7f5">gsb_data_fyear_get_fyears_list</a> ();
<a name="l01834"></a>01834 
<a name="l01835"></a>01835     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01836"></a>01836     {
<a name="l01837"></a>01837         gchar *new_string;
<a name="l01838"></a>01838         gint fyear_number;
<a name="l01839"></a>01839         gchar *beginning_date;
<a name="l01840"></a>01840         gchar *end_date;
<a name="l01841"></a>01841 
<a name="l01842"></a>01842         fyear_number = <a class="code" href="gsb__data__fyear_8c.html#a8a164bec6890c1eb99bde9e7c06794d9">gsb_data_fyear_get_no_fyear</a> (list_tmp -&gt; data);
<a name="l01843"></a>01843 
<a name="l01844"></a>01844         <span class="comment">/* set the date */</span>
<a name="l01845"></a>01845         beginning_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__fyear_8c.html#afdcd8883d9a62f1b165c1099c4476355">gsb_data_fyear_get_beginning_date</a>(fyear_number));
<a name="l01846"></a>01846         end_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__fyear_8c.html#a567296ee6aea9f010688da1bd2bfbf12">gsb_data_fyear_get_end_date</a>(fyear_number));
<a name="l01847"></a>01847 
<a name="l01848"></a>01848         <span class="comment">/* now we can fill the file content */</span>
<a name="l01849"></a>01849         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Financial_year Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Bdte=\&quot;%s\&quot; &quot;</span>
<a name="l01850"></a>01850                           <span class="stringliteral">&quot;Edte=\&quot;%s\&quot; Sho=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l01851"></a>01851                                               fyear_number,
<a name="l01852"></a>01852                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__fyear_8c.html#ad6c1d7c774990722a69d741ab0d4785e">gsb_data_fyear_get_name</a> (fyear_number)),
<a name="l01853"></a>01853                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(beginning_date),
<a name="l01854"></a>01854                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(end_date),
<a name="l01855"></a>01855                                               <a class="code" href="gsb__data__fyear_8c.html#a1c5a2857a1f6b22871cf064e3e4ed914">gsb_data_fyear_get_form_show</a> (fyear_number));
<a name="l01856"></a>01856 
<a name="l01857"></a>01857         g_free (beginning_date);
<a name="l01858"></a>01858         g_free (end_date);
<a name="l01859"></a>01859 
<a name="l01860"></a>01860         <span class="comment">/* append the new string to the file content</span>
<a name="l01861"></a>01861 <span class="comment">         * and take the new iterator */</span>
<a name="l01862"></a>01862         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01863"></a>01863                                                length_calculated,
<a name="l01864"></a>01864                                                file_content,
<a name="l01865"></a>01865                                                new_string );
<a name="l01866"></a>01866         list_tmp = list_tmp -&gt; next;
<a name="l01867"></a>01867     }
<a name="l01868"></a>01868     <span class="keywordflow">return</span> iterator;
<a name="l01869"></a>01869 }
<a name="l01870"></a>01870 
<a name="l01871"></a>01871 
<a name="l01881"></a>01881 gulong gsb_file_save_archive_part ( gulong iterator,
<a name="l01882"></a>01882                         gulong *length_calculated,
<a name="l01883"></a>01883                         gchar **file_content )
<a name="l01884"></a>01884 {
<a name="l01885"></a>01885     GSList *list_tmp;
<a name="l01886"></a>01886         
<a name="l01887"></a>01887     list_tmp = <a class="code" href="gsb__data__archive_8c.html#a7d5b3a8b5e99a9bbe14f526ab3d1936b">gsb_data_archive_get_archives_list</a> ();
<a name="l01888"></a>01888 
<a name="l01889"></a>01889     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01890"></a>01890     {
<a name="l01891"></a>01891         gint archive_number;
<a name="l01892"></a>01892         gchar *new_string;
<a name="l01893"></a>01893         gchar *beginning_date;
<a name="l01894"></a>01894         gchar *end_date;
<a name="l01895"></a>01895 
<a name="l01896"></a>01896         archive_number = <a class="code" href="gsb__data__archive_8c.html#a4d89b738aff63b952bd74a74c9e4bdff">gsb_data_archive_get_no_archive</a> (list_tmp -&gt; data);
<a name="l01897"></a>01897 
<a name="l01898"></a>01898         <span class="comment">/* set the date */</span>
<a name="l01899"></a>01899         beginning_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__archive_8c.html#afc0ef716ad2bcd7b9805571c6bcdc04d">gsb_data_archive_get_beginning_date</a> (archive_number));
<a name="l01900"></a>01900         end_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__archive_8c.html#acd3d52c042e9c6d8d3a42cd55c69cdd2">gsb_data_archive_get_end_date</a> (archive_number));
<a name="l01901"></a>01901 
<a name="l01902"></a>01902         <span class="comment">/* now we can fill the file content */</span>
<a name="l01903"></a>01903         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Archive Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Bdte=\&quot;%s\&quot; &quot;</span>
<a name="l01904"></a>01904                           <span class="stringliteral">&quot;Edte=\&quot;%s\&quot; Fye=\&quot;%d\&quot; Rep=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l01905"></a>01905                                               archive_number,
<a name="l01906"></a>01906                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__archive_8c.html#ab61c1a7e1814ae6b8d5fd6f54db3606b">gsb_data_archive_get_name</a> (archive_number)),
<a name="l01907"></a>01907                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(beginning_date),
<a name="l01908"></a>01908                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(end_date),
<a name="l01909"></a>01909                                               <a class="code" href="gsb__data__archive_8c.html#a7155599a42559d8b97aa24f6c89c3684">gsb_data_archive_get_fyear</a> (archive_number),
<a name="l01910"></a>01910                                               <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__archive_8c.html#a3d8b5fb39ae27430a4ef69a8de23c016">gsb_data_archive_get_report_title</a> (archive_number)));
<a name="l01911"></a>01911 
<a name="l01912"></a>01912         <span class="keywordflow">if</span> (beginning_date)
<a name="l01913"></a>01913             g_free (beginning_date);
<a name="l01914"></a>01914         <span class="keywordflow">if</span> (end_date)
<a name="l01915"></a>01915             g_free (end_date);
<a name="l01916"></a>01916 
<a name="l01917"></a>01917         <span class="comment">/* append the new string to the file content</span>
<a name="l01918"></a>01918 <span class="comment">         * and take the new iterator */</span>
<a name="l01919"></a>01919         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01920"></a>01920                                                length_calculated,
<a name="l01921"></a>01921                                                file_content,
<a name="l01922"></a>01922                                                new_string );
<a name="l01923"></a>01923         list_tmp = list_tmp -&gt; next;
<a name="l01924"></a>01924     }
<a name="l01925"></a>01925     <span class="keywordflow">return</span> iterator;
<a name="l01926"></a>01926 }
<a name="l01927"></a>01927 
<a name="l01928"></a>01928 
<a name="l01938"></a>01938 gulong gsb_file_save_reconcile_part ( gulong iterator,
<a name="l01939"></a>01939                         gulong *length_calculated,
<a name="l01940"></a>01940                         gchar **file_content )
<a name="l01941"></a>01941 {
<a name="l01942"></a>01942     GList *list_tmp;
<a name="l01943"></a>01943 
<a name="l01944"></a>01944     list_tmp = <a class="code" href="gsb__data__reconcile_8c.html#aa78fc612a3b6c450f074b879633c6db3">gsb_data_reconcile_get_reconcile_list</a> ();
<a name="l01945"></a>01945 
<a name="l01946"></a>01946     <span class="keywordflow">while</span> ( list_tmp )
<a name="l01947"></a>01947     {
<a name="l01948"></a>01948         gchar *new_string;
<a name="l01949"></a>01949         gint reconcile_number;
<a name="l01950"></a>01950         gchar *init_date;
<a name="l01951"></a>01951         gchar *final_date;
<a name="l01952"></a>01952         gchar *init_balance;
<a name="l01953"></a>01953         gchar *final_balance;
<a name="l01954"></a>01954 
<a name="l01955"></a>01955         reconcile_number = <a class="code" href="gsb__data__reconcile_8c.html#a834a5ace0380c21559fb87cb88f7da80">gsb_data_reconcile_get_no_reconcile</a> (list_tmp -&gt; data);
<a name="l01956"></a>01956 
<a name="l01957"></a>01957         <span class="comment">/* set the reconcile dates */</span>
<a name="l01958"></a>01958         init_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__reconcile_8c.html#a34a53feb10b93744a7230407d599b788">gsb_data_reconcile_get_init_date</a> (reconcile_number));
<a name="l01959"></a>01959         <span class="keywordflow">if</span> (!init_date)
<a name="l01960"></a>01960             init_date  = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (<span class="stringliteral">&quot;&quot;</span>);
<a name="l01961"></a>01961 
<a name="l01962"></a>01962         final_date = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__reconcile_8c.html#ac2e105ad149161a371283aa75049d3b6">gsb_data_reconcile_get_final_date</a> (reconcile_number));
<a name="l01963"></a>01963         <span class="keywordflow">if</span> (!final_date)
<a name="l01964"></a>01964             final_date = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (<span class="stringliteral">&quot;&quot;</span>);
<a name="l01965"></a>01965 
<a name="l01966"></a>01966         <span class="comment">/* set the balances strings */</span>
<a name="l01967"></a>01967         init_balance = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01968"></a>01968                         <a class="code" href="gsb__data__reconcile_8c.html#ac14e8641bb156f533d7ac2427c4b9cfc">gsb_data_reconcile_get_init_balance</a> ( reconcile_number ), 2 );
<a name="l01969"></a>01969         final_balance = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l01970"></a>01970                         <a class="code" href="gsb__data__reconcile_8c.html#a261a4e1eacb9c6517df7daa4afa879bb">gsb_data_reconcile_get_final_balance</a> ( reconcile_number ), 2 );
<a name="l01971"></a>01971 
<a name="l01972"></a>01972         <span class="comment">/* now we can fill the file content */</span>
<a name="l01973"></a>01973         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Reconcile Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Acc=\&quot;%d\&quot; &quot;</span>
<a name="l01974"></a>01974                            <span class="stringliteral">&quot;Idate=\&quot;%s\&quot; Fdate=\&quot;%s\&quot; Ibal=\&quot;%s\&quot; Fbal=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l01975"></a>01975                                                reconcile_number,
<a name="l01976"></a>01976                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__reconcile_8c.html#a0f88a3f39b7944967f373097fe9d1474">gsb_data_reconcile_get_name</a> (reconcile_number)),
<a name="l01977"></a>01977                                                <a class="code" href="gsb__data__reconcile_8c.html#a57f4a52c653f13e27564fc8ff2b4350b">gsb_data_reconcile_get_account</a> (reconcile_number),
<a name="l01978"></a>01978                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(init_date),
<a name="l01979"></a>01979                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(final_date),
<a name="l01980"></a>01980                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(init_balance),
<a name="l01981"></a>01981                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(final_balance));
<a name="l01982"></a>01982 
<a name="l01983"></a>01983         g_free (init_date);
<a name="l01984"></a>01984         g_free (final_date);
<a name="l01985"></a>01985         g_free (init_balance);
<a name="l01986"></a>01986         g_free (final_balance);
<a name="l01987"></a>01987 
<a name="l01988"></a>01988         <span class="comment">/* append the new string to the file content</span>
<a name="l01989"></a>01989 <span class="comment">         * and take the new iterator */</span>
<a name="l01990"></a>01990         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l01991"></a>01991                                                length_calculated,
<a name="l01992"></a>01992                                                file_content,
<a name="l01993"></a>01993                                                new_string );
<a name="l01994"></a>01994         list_tmp = list_tmp -&gt; next;
<a name="l01995"></a>01995     }
<a name="l01996"></a>01996     <span class="keywordflow">return</span> iterator;
<a name="l01997"></a>01997 }
<a name="l01998"></a>01998 
<a name="l02008"></a>02008 gulong gsb_file_save_import_rule_part ( gulong iterator,
<a name="l02009"></a>02009                         gulong *length_calculated,
<a name="l02010"></a>02010                         gchar **file_content )
<a name="l02011"></a>02011 {
<a name="l02012"></a>02012     GSList *list_tmp;
<a name="l02013"></a>02013 
<a name="l02014"></a>02014     list_tmp = <a class="code" href="gsb__data__import__rule_8c.html#a5fecbacee14cb68d5e2dfa19cd5b0247">gsb_data_import_rule_get_list</a> ();
<a name="l02015"></a>02015 
<a name="l02016"></a>02016     <span class="keywordflow">while</span> ( list_tmp )
<a name="l02017"></a>02017     {
<a name="l02018"></a>02018         gchar *new_string;
<a name="l02019"></a>02019         gint import_rule_number;
<a name="l02020"></a>02020 
<a name="l02021"></a>02021         import_rule_number = <a class="code" href="gsb__data__import__rule_8c.html#a0b13ebba7a8037ae25415a1a31c5d321">gsb_data_import_rule_get_number</a> (list_tmp -&gt; data);
<a name="l02022"></a>02022 
<a name="l02023"></a>02023         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Import_rule Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; Acc=\&quot;%d\&quot; &quot;</span>
<a name="l02024"></a>02024                            <span class="stringliteral">&quot;Cur=\&quot;%d\&quot; Inv=\&quot;%d\&quot; Enc=\&quot;%s\&quot; Fil=\&quot;%s\&quot; Act=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l02025"></a>02025                                                import_rule_number,
<a name="l02026"></a>02026                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__import__rule_8c.html#a8dded18b2026b5d7a92a93cfb9c799a0">gsb_data_import_rule_get_name</a> (import_rule_number)),
<a name="l02027"></a>02027                                                <a class="code" href="gsb__data__import__rule_8c.html#a760102a31b3b6486a76d7cc8b46857cc">gsb_data_import_rule_get_account</a> (import_rule_number),
<a name="l02028"></a>02028                                                <a class="code" href="gsb__data__import__rule_8c.html#a3e559b5525d971d76c625cd52ad1c37e">gsb_data_import_rule_get_currency</a> (import_rule_number),
<a name="l02029"></a>02029                                                <a class="code" href="gsb__data__import__rule_8c.html#a5334888f570e3c3cfb844dd8731c9453">gsb_data_import_rule_get_invert</a> (import_rule_number),
<a name="l02030"></a>02030                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__import__rule_8c.html#ad911feed98610882fa5070032aec5521">gsb_data_import_rule_get_charmap</a> (import_rule_number)),
<a name="l02031"></a>02031                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__import__rule_8c.html#a55651878d4aeee5a08a2071c6e518b84">gsb_data_import_rule_get_last_file_name</a> (import_rule_number)),
<a name="l02032"></a>02032                                                <a class="code" href="gsb__data__import__rule_8c.html#a099a82ae0d2fd6e50b4f2c8fa96631fb">gsb_data_import_rule_get_action</a> (import_rule_number));
<a name="l02033"></a>02033 
<a name="l02034"></a>02034         <span class="comment">/* append the new string to the file content</span>
<a name="l02035"></a>02035 <span class="comment">         * and take the new iterator */</span>
<a name="l02036"></a>02036         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02037"></a>02037                                                length_calculated,
<a name="l02038"></a>02038                                                file_content,
<a name="l02039"></a>02039                                                new_string );
<a name="l02040"></a>02040         list_tmp = list_tmp -&gt; next;
<a name="l02041"></a>02041     }
<a name="l02042"></a>02042     <span class="keywordflow">return</span> iterator;
<a name="l02043"></a>02043 }
<a name="l02044"></a>02044 
<a name="l02045"></a>02045 
<a name="l02055"></a>02055 gulong gsb_file_save_partial_balance_part ( gulong iterator,
<a name="l02056"></a>02056                         gulong *length_calculated,
<a name="l02057"></a>02057                         gchar **file_content )
<a name="l02058"></a>02058 {
<a name="l02059"></a>02059     GSList *list_tmp;
<a name="l02060"></a>02060 
<a name="l02061"></a>02061     list_tmp = <a class="code" href="gsb__data__partial__balance_8c.html#a09c15eba9140e6063aeaeb754481da19">gsb_data_partial_balance_get_list</a> ();
<a name="l02062"></a>02062 
<a name="l02063"></a>02063     <span class="keywordflow">while</span> ( list_tmp )
<a name="l02064"></a>02064     {
<a name="l02065"></a>02065         gchar *new_string;
<a name="l02066"></a>02066         gint partial_balance_number;
<a name="l02067"></a>02067 
<a name="l02068"></a>02068         partial_balance_number = <a class="code" href="gsb__data__partial__balance_8c.html#a645d1d88a2b73c7c48d218d5dc240ec4">gsb_data_partial_balance_get_number</a> ( list_tmp -&gt; data );
<a name="l02069"></a>02069 
<a name="l02070"></a>02070         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Partial_balance Nb=\&quot;%d\&quot; Na=\&quot;%s\&quot; &quot;</span>
<a name="l02071"></a>02071                            <span class="stringliteral">&quot;Acc=\&quot;%s\&quot; Kind=\&quot;%d\&quot; Currency=\&quot;%d\&quot; Colorise=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l02072"></a>02072                                                partial_balance_number,
<a name="l02073"></a>02073                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__partial__balance_8c.html#a742abdf5e9bbd787e85bd0ef54b9fe8c">gsb_data_partial_balance_get_name</a> ( partial_balance_number )),
<a name="l02074"></a>02074                                                <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__partial__balance_8c.html#a60c22c649a2f4ff7460ece9208c88bc5">gsb_data_partial_balance_get_liste_cptes</a> ( partial_balance_number )),
<a name="l02075"></a>02075                                                <a class="code" href="gsb__data__partial__balance_8c.html#ae06d0d8f3876578c0c96fb902a2f1a64">gsb_data_partial_balance_get_kind</a> (partial_balance_number),
<a name="l02076"></a>02076                                                <a class="code" href="gsb__data__partial__balance_8c.html#adc46165b029838315336eabdd6df6e63">gsb_data_partial_balance_get_currency</a> (partial_balance_number),
<a name="l02077"></a>02077                                                <a class="code" href="gsb__data__partial__balance_8c.html#aa45781dd7d5f787326c68fd88af26104">gsb_data_partial_balance_get_colorise</a> (partial_balance_number) );
<a name="l02078"></a>02078 
<a name="l02079"></a>02079         <span class="comment">/* append the new string to the file content</span>
<a name="l02080"></a>02080 <span class="comment">         * and take the new iterator */</span>
<a name="l02081"></a>02081         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02082"></a>02082                                                length_calculated,
<a name="l02083"></a>02083                                                file_content,
<a name="l02084"></a>02084                                                new_string );
<a name="l02085"></a>02085         list_tmp = list_tmp -&gt; next;
<a name="l02086"></a>02086     }
<a name="l02087"></a>02087     <span class="keywordflow">return</span> iterator;
<a name="l02088"></a>02088 }
<a name="l02089"></a>02089 
<a name="l02090"></a>02090 
<a name="l02101"></a><a class="code" href="gsb__file__save_8h.html#a3699f6e4d341e96824d32c5df54f6e8a">02101</a> gulong <a class="code" href="gsb__file__save_8c.html#a3699f6e4d341e96824d32c5df54f6e8a">gsb_file_save_report_part</a> ( gulong iterator,
<a name="l02102"></a>02102                         gulong *length_calculated,
<a name="l02103"></a>02103                         gchar **file_content,
<a name="l02104"></a>02104                         gboolean current_report )
<a name="l02105"></a>02105 {
<a name="l02106"></a>02106     GSList *list_tmp;
<a name="l02107"></a>02107         
<a name="l02108"></a>02108     list_tmp = <a class="code" href="gsb__data__report_8c.html#a7a55a8189e9f34c587309954e2acbfb7">gsb_data_report_get_report_list</a> ();
<a name="l02109"></a>02109 
<a name="l02110"></a>02110     <span class="keywordflow">while</span> ( list_tmp )
<a name="l02111"></a>02111     {
<a name="l02112"></a>02112         gchar *new_string;
<a name="l02113"></a>02113         gint report_number;
<a name="l02114"></a>02114         gint report_number_to_write;
<a name="l02115"></a>02115         GSList *tmp_list;
<a name="l02116"></a>02116         gchar *general_sort_type;
<a name="l02117"></a>02117         gchar *financial_year_select;
<a name="l02118"></a>02118         gchar *account_selected;
<a name="l02119"></a>02119         gchar *transfer_selected_accounts;
<a name="l02120"></a>02120         gchar *categ_selected;
<a name="l02121"></a>02121         gchar *budget_selected;
<a name="l02122"></a>02122         gchar *payee_selected;
<a name="l02123"></a>02123         gchar *payment_method_list;
<a name="l02124"></a>02124         GSList *list_tmp_2;
<a name="l02125"></a>02125         gchar *date_start;
<a name="l02126"></a>02126         gchar *date_end;
<a name="l02127"></a>02127         gchar *report_name;
<a name="l02128"></a>02128         gint amount_comparison_number_to_write;
<a name="l02129"></a>02129         gint text_comparison_number_to_write;
<a name="l02130"></a>02130         
<a name="l02131"></a>02131         report_number = <a class="code" href="gsb__data__report_8c.html#ac2414893a361047cb656ac7a26247907">gsb_data_report_get_report_number</a> (list_tmp -&gt; data);
<a name="l02132"></a>02132 
<a name="l02133"></a>02133         <span class="comment">/* if we need only the current report, we check here */</span>
<a name="l02134"></a>02134 
<a name="l02135"></a>02135         <span class="keywordflow">if</span> ( current_report
<a name="l02136"></a>02136              &amp;&amp;
<a name="l02137"></a>02137              <a class="code" href="navigation_8c.html#aef700722a199569003341a41144ee004">gsb_gui_navigation_get_current_report</a>() != report_number )
<a name="l02138"></a>02138         {
<a name="l02139"></a>02139             list_tmp = list_tmp -&gt; next;
<a name="l02140"></a>02140             <span class="keywordflow">continue</span>;
<a name="l02141"></a>02141         }
<a name="l02142"></a>02142 
<a name="l02143"></a>02143         <span class="comment">/* if current_report is set, this mean we export the report,</span>
<a name="l02144"></a>02144 <span class="comment">         * we cannot save the number should be automaticly given while</span>
<a name="l02145"></a>02145 <span class="comment">         * importing, so set the report number to -1 */</span>
<a name="l02146"></a>02146         <span class="keywordflow">if</span> (current_report)
<a name="l02147"></a>02147             report_number_to_write = -1;
<a name="l02148"></a>02148         <span class="keywordflow">else</span>
<a name="l02149"></a>02149             report_number_to_write = report_number;
<a name="l02150"></a>02150 
<a name="l02151"></a>02151         <span class="comment">/* set the name, it will be the normal name except if we are exporting</span>
<a name="l02152"></a>02152 <span class="comment">         * the report, we add &#39;export&#39; at the end */</span>
<a name="l02153"></a>02153         <span class="keywordflow">if</span> (current_report)
<a name="l02154"></a>02154             report_name = g_strconcat ( <a class="code" href="gsb__data__report_8c.html#ace8a87d303afdf89ef8f3a901987db83">gsb_data_report_get_report_name</a> (report_number),
<a name="l02155"></a>02155                                         <span class="stringliteral">&quot; (export)&quot;</span>,
<a name="l02156"></a>02156                                         NULL );
<a name="l02157"></a>02157         <span class="keywordflow">else</span>
<a name="l02158"></a>02158             report_name = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (<a class="code" href="gsb__data__report_8c.html#ace8a87d303afdf89ef8f3a901987db83">gsb_data_report_get_report_name</a> (report_number));
<a name="l02159"></a>02159 
<a name="l02160"></a>02160         <span class="comment">/* set the general sort type */</span>
<a name="l02161"></a>02161         tmp_list = <a class="code" href="gsb__data__report_8c.html#a124d944a5ed747acf82c7d8986d47ee8">gsb_data_report_get_sorting_type</a> (report_number);
<a name="l02162"></a>02162         general_sort_type = NULL;
<a name="l02163"></a>02163 
<a name="l02164"></a>02164         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02165"></a>02165         {
<a name="l02166"></a>02166             <span class="keywordflow">if</span> ( general_sort_type )
<a name="l02167"></a>02167             {
<a name="l02168"></a>02168                 gchar* tmpstr = general_sort_type;
<a name="l02169"></a>02169                 general_sort_type = g_strconcat ( tmpstr,
<a name="l02170"></a>02170                                                   <span class="stringliteral">&quot;/-/&quot;</span>,
<a name="l02171"></a>02171                                                   <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data )),
<a name="l02172"></a>02172                                                   NULL );
<a name="l02173"></a>02173                 g_free ( tmpstr );
<a name="l02174"></a>02174             }
<a name="l02175"></a>02175             <span class="keywordflow">else</span>
<a name="l02176"></a>02176                 general_sort_type = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data ));
<a name="l02177"></a>02177 
<a name="l02178"></a>02178             tmp_list = tmp_list -&gt; next;
<a name="l02179"></a>02179         }
<a name="l02180"></a>02180 
<a name="l02181"></a>02181         <span class="comment">/* set the financial_year_select */</span>
<a name="l02182"></a>02182         tmp_list = <a class="code" href="gsb__data__report_8c.html#a3a5c318502c4291b825100997b2c1000">gsb_data_report_get_financial_year_list</a> (report_number);
<a name="l02183"></a>02183         financial_year_select = NULL;
<a name="l02184"></a>02184 
<a name="l02185"></a>02185         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02186"></a>02186         {
<a name="l02187"></a>02187             <span class="keywordflow">if</span> ( financial_year_select )
<a name="l02188"></a>02188             {
<a name="l02189"></a>02189                 gchar* tmpstr = financial_year_select ;
<a name="l02190"></a>02190                 financial_year_select = g_strconcat ( tmpstr,
<a name="l02191"></a>02191                                                       <span class="stringliteral">&quot;/-/&quot;</span>,
<a name="l02192"></a>02192                                                       <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data )),
<a name="l02193"></a>02193                                                       NULL );
<a name="l02194"></a>02194                 g_free (tmpstr);
<a name="l02195"></a>02195             }
<a name="l02196"></a>02196             <span class="keywordflow">else</span>
<a name="l02197"></a>02197                 financial_year_select = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data ));
<a name="l02198"></a>02198 
<a name="l02199"></a>02199             tmp_list = tmp_list -&gt; next;
<a name="l02200"></a>02200         }
<a name="l02201"></a>02201 
<a name="l02202"></a>02202         <span class="comment">/* set the account_selected */</span>
<a name="l02203"></a>02203         tmp_list = <a class="code" href="gsb__data__report_8c.html#a073b6ce755d88520985137fea738c608">gsb_data_report_get_account_numbers</a> (report_number);
<a name="l02204"></a>02204         account_selected = NULL;
<a name="l02205"></a>02205 
<a name="l02206"></a>02206         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02207"></a>02207         {
<a name="l02208"></a>02208             <span class="keywordflow">if</span> ( account_selected )
<a name="l02209"></a>02209             {
<a name="l02210"></a>02210                 gchar* tmpstr = account_selected;
<a name="l02211"></a>02211                 account_selected = g_strconcat ( tmpstr,
<a name="l02212"></a>02212                                                  <span class="stringliteral">&quot;/-/&quot;</span>,
<a name="l02213"></a>02213                                                  <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data )),
<a name="l02214"></a>02214                                                  NULL );
<a name="l02215"></a>02215                 g_free (tmpstr);
<a name="l02216"></a>02216             }
<a name="l02217"></a>02217             <span class="keywordflow">else</span>
<a name="l02218"></a>02218                 account_selected = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data ));
<a name="l02219"></a>02219 
<a name="l02220"></a>02220             tmp_list = tmp_list -&gt; next;
<a name="l02221"></a>02221         }
<a name="l02222"></a>02222 
<a name="l02223"></a>02223         <span class="comment">/*      set the transfer_selected_accounts */</span>
<a name="l02224"></a>02224         tmp_list = <a class="code" href="gsb__data__report_8c.html#a6929187165177b9a96a64e254ac8ef5a">gsb_data_report_get_transfer_account_numbers</a> (report_number);
<a name="l02225"></a>02225         transfer_selected_accounts = NULL;
<a name="l02226"></a>02226 
<a name="l02227"></a>02227         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02228"></a>02228         {
<a name="l02229"></a>02229             <span class="keywordflow">if</span> ( transfer_selected_accounts )
<a name="l02230"></a>02230             {
<a name="l02231"></a>02231                 gchar* tmpstr = transfer_selected_accounts;
<a name="l02232"></a>02232                 transfer_selected_accounts = g_strconcat ( tmpstr,
<a name="l02233"></a>02233                                               <span class="stringliteral">&quot;/-/&quot;</span>,
<a name="l02234"></a>02234                                               <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data )),
<a name="l02235"></a>02235                                               NULL );
<a name="l02236"></a>02236                 g_free ( tmpstr );
<a name="l02237"></a>02237             }
<a name="l02238"></a>02238             <span class="keywordflow">else</span>
<a name="l02239"></a>02239                 transfer_selected_accounts = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data ));
<a name="l02240"></a>02240 
<a name="l02241"></a>02241             tmp_list = tmp_list -&gt; next;
<a name="l02242"></a>02242         }
<a name="l02243"></a>02243 
<a name="l02244"></a>02244         <span class="comment">/* save the category and sub-category list */</span>
<a name="l02245"></a>02245         tmp_list = <a class="code" href="gsb__data__report_8c.html#af8cf9d659ba029877c116f4b7b2f549b">gsb_data_report_get_category_struct</a> (report_number);
<a name="l02246"></a>02246         categ_selected = NULL;
<a name="l02247"></a>02247 
<a name="l02248"></a>02248         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02249"></a>02249         {
<a name="l02250"></a>02250             <a class="code" href="structstruct__categ__budget__sel.html">struct_categ_budget_sel</a> *struct_categ = tmp_list -&gt; data;
<a name="l02251"></a>02251             gchar *last_categ;
<a name="l02252"></a>02252             gchar *new_categ;
<a name="l02253"></a>02253             GSList *sub_categ_list;
<a name="l02254"></a>02254 
<a name="l02255"></a>02255             <span class="comment">/* first, save the category */</span>
<a name="l02256"></a>02256             new_categ = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> (struct_categ -&gt; div_number);
<a name="l02257"></a>02257             <span class="keywordflow">if</span> ( categ_selected )
<a name="l02258"></a>02258             {
<a name="l02259"></a>02259                 last_categ = categ_selected;
<a name="l02260"></a>02260 
<a name="l02261"></a>02261                 categ_selected = g_strconcat ( last_categ,
<a name="l02262"></a>02262                                                <span class="stringliteral">&quot;-&quot;</span>,
<a name="l02263"></a>02263                                                new_categ,
<a name="l02264"></a>02264                                                NULL );
<a name="l02265"></a>02265                 g_free (last_categ);
<a name="l02266"></a>02266                 g_free (new_categ);
<a name="l02267"></a>02267             }
<a name="l02268"></a>02268             <span class="keywordflow">else</span>
<a name="l02269"></a>02269                 categ_selected = new_categ;
<a name="l02270"></a>02270 
<a name="l02271"></a>02271             <span class="comment">/* if there are sub-categories, it&#39;s here */</span>
<a name="l02272"></a>02272             sub_categ_list = struct_categ -&gt; sub_div_numbers;
<a name="l02273"></a>02273             <span class="keywordflow">while</span> (sub_categ_list)
<a name="l02274"></a>02274             {
<a name="l02275"></a>02275                 new_categ = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> (GPOINTER_TO_INT (sub_categ_list -&gt; data));
<a name="l02276"></a>02276 
<a name="l02277"></a>02277                 last_categ = categ_selected;
<a name="l02278"></a>02278                 categ_selected = g_strconcat ( last_categ,
<a name="l02279"></a>02279                                                <span class="stringliteral">&quot;/&quot;</span>,
<a name="l02280"></a>02280                                                new_categ,
<a name="l02281"></a>02281                                                NULL );
<a name="l02282"></a>02282                 g_free (new_categ);
<a name="l02283"></a>02283                 g_free (last_categ);
<a name="l02284"></a>02284                 sub_categ_list = sub_categ_list -&gt; next;
<a name="l02285"></a>02285             }
<a name="l02286"></a>02286             tmp_list = tmp_list -&gt; next;
<a name="l02287"></a>02287         }
<a name="l02288"></a>02288 
<a name="l02289"></a>02289         <span class="comment">/* save the budget and sub-budget list */</span>
<a name="l02290"></a>02290         tmp_list = <a class="code" href="gsb__data__report_8c.html#a73b4bbf059d42a3a4e769b935adf99e2">gsb_data_report_get_budget_struct</a> (report_number);
<a name="l02291"></a>02291         budget_selected = NULL;
<a name="l02292"></a>02292 
<a name="l02293"></a>02293         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02294"></a>02294         {
<a name="l02295"></a>02295             <a class="code" href="structstruct__categ__budget__sel.html">struct_categ_budget_sel</a> *<a class="code" href="structstruct__budget.html">struct_budget</a> = tmp_list -&gt; data;
<a name="l02296"></a>02296             gchar *last_budget;
<a name="l02297"></a>02297             gchar *new_budget;
<a name="l02298"></a>02298             GSList *sub_budget_list;
<a name="l02299"></a>02299 
<a name="l02300"></a>02300             <span class="comment">/* first, save the budget */</span>
<a name="l02301"></a>02301             new_budget = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> (struct_budget -&gt; div_number);
<a name="l02302"></a>02302             <span class="keywordflow">if</span> ( budget_selected )
<a name="l02303"></a>02303             {
<a name="l02304"></a>02304                 last_budget = budget_selected;
<a name="l02305"></a>02305 
<a name="l02306"></a>02306                 budget_selected = g_strconcat ( last_budget,
<a name="l02307"></a>02307                                                <span class="stringliteral">&quot;-&quot;</span>,
<a name="l02308"></a>02308                                                new_budget,
<a name="l02309"></a>02309                                                NULL );
<a name="l02310"></a>02310                 g_free (last_budget);
<a name="l02311"></a>02311                 g_free (new_budget);
<a name="l02312"></a>02312             }
<a name="l02313"></a>02313             <span class="keywordflow">else</span>
<a name="l02314"></a>02314                 budget_selected = new_budget;
<a name="l02315"></a>02315 
<a name="l02316"></a>02316             <span class="comment">/* if there are sub-budgets, it&#39;s here */</span>
<a name="l02317"></a>02317             sub_budget_list = struct_budget -&gt; sub_div_numbers;
<a name="l02318"></a>02318             <span class="keywordflow">while</span> (sub_budget_list)
<a name="l02319"></a>02319             {
<a name="l02320"></a>02320                 new_budget = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> (GPOINTER_TO_INT (sub_budget_list -&gt; data));
<a name="l02321"></a>02321 
<a name="l02322"></a>02322                 last_budget = budget_selected;
<a name="l02323"></a>02323                 budget_selected = g_strconcat ( last_budget,
<a name="l02324"></a>02324                                                <span class="stringliteral">&quot;/&quot;</span>,
<a name="l02325"></a>02325                                                new_budget,
<a name="l02326"></a>02326                                                NULL );
<a name="l02327"></a>02327                 g_free (new_budget);
<a name="l02328"></a>02328                 g_free (last_budget);
<a name="l02329"></a>02329                 sub_budget_list = sub_budget_list -&gt; next;
<a name="l02330"></a>02330             }
<a name="l02331"></a>02331             tmp_list = tmp_list -&gt; next;
<a name="l02332"></a>02332         }
<a name="l02333"></a>02333 
<a name="l02334"></a>02334         <span class="comment">/*      set the payee_selected */</span>
<a name="l02335"></a>02335         tmp_list = <a class="code" href="gsb__data__report_8c.html#a6fdd042f7f52de6f133b0fb00159aa54">gsb_data_report_get_payee_numbers</a> (report_number);
<a name="l02336"></a>02336         payee_selected = NULL;
<a name="l02337"></a>02337 
<a name="l02338"></a>02338         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02339"></a>02339         {
<a name="l02340"></a>02340             <span class="keywordflow">if</span> ( payee_selected )
<a name="l02341"></a>02341             {
<a name="l02342"></a>02342                 gchar* tmpstr = payee_selected;
<a name="l02343"></a>02343                 payee_selected = g_strconcat ( tmpstr,
<a name="l02344"></a>02344                                               <span class="stringliteral">&quot;/-/&quot;</span>,
<a name="l02345"></a>02345                                               <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data )),
<a name="l02346"></a>02346                                               NULL );
<a name="l02347"></a>02347                 g_free ( tmpstr );
<a name="l02348"></a>02348             }
<a name="l02349"></a>02349             <span class="keywordflow">else</span>
<a name="l02350"></a>02350                 payee_selected = <a class="code" href="utils__str_8c.html#a1e50f3be459180b9dea9f14eb7e1204e" title="convert an integer into a gchar based string">utils_str_itoa</a> ( GPOINTER_TO_INT ( tmp_list -&gt; data ));
<a name="l02351"></a>02351 
<a name="l02352"></a>02352             tmp_list = tmp_list -&gt; next;
<a name="l02353"></a>02353         }
<a name="l02354"></a>02354 
<a name="l02355"></a>02355         <span class="comment">/*      set the payment_method_list */</span>
<a name="l02356"></a>02356         tmp_list = <a class="code" href="gsb__data__report_8c.html#a3ceac05c6ab8d63dadc7c6245368874e">gsb_data_report_get_method_of_payment_list</a> (report_number);
<a name="l02357"></a>02357         payment_method_list = NULL;
<a name="l02358"></a>02358 
<a name="l02359"></a>02359         <span class="keywordflow">while</span> ( tmp_list )
<a name="l02360"></a>02360         {
<a name="l02361"></a>02361             <span class="keywordflow">if</span> ( payment_method_list )
<a name="l02362"></a>02362             {
<a name="l02363"></a>02363                 gchar* tmpstr = payment_method_list;
<a name="l02364"></a>02364                 payment_method_list = g_strconcat ( tmpstr,
<a name="l02365"></a>02365                                                     <span class="stringliteral">&quot;/-/&quot;</span>,
<a name="l02366"></a>02366                                                     tmp_list -&gt; data,
<a name="l02367"></a>02367                                                     NULL );
<a name="l02368"></a>02368                 g_free ( tmpstr );
<a name="l02369"></a>02369             }
<a name="l02370"></a>02370             <span class="keywordflow">else</span>
<a name="l02371"></a>02371                 payment_method_list = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (tmp_list -&gt; data );
<a name="l02372"></a>02372 
<a name="l02373"></a>02373             tmp_list = tmp_list -&gt; next;
<a name="l02374"></a>02374         }
<a name="l02375"></a>02375 
<a name="l02376"></a>02376         <span class="comment">/* set the dates */</span>
<a name="l02377"></a>02377         date_start = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__report_8c.html#af91c5f48c615e21c7b46de6410743888">gsb_data_report_get_personal_date_start</a> (report_number));
<a name="l02378"></a>02378         date_end = <a class="code" href="utils__dates_8c.html#abe508780ddee49c70a49b509e731bb27">gsb_format_gdate_safe</a> (<a class="code" href="gsb__data__report_8c.html#a3a534591a126c244500d4fb6e2e114bb">gsb_data_report_get_personal_date_end</a> (report_number));
<a name="l02379"></a>02379 
<a name="l02380"></a>02380         <span class="comment">/* now we can fill the file content */</span>
<a name="l02381"></a>02381         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Report\n&quot;</span>
<a name="l02382"></a>02382                                                <span class="stringliteral">&quot;\t\tNb=\&quot;%d\&quot;\n&quot;</span>
<a name="l02383"></a>02383                                                <span class="stringliteral">&quot;\t\tName=\&quot;%s\&quot;\n&quot;</span>
<a name="l02384"></a>02384                                                <span class="stringliteral">&quot;\t\tGeneral_sort_type=\&quot;%s\&quot;\n&quot;</span>
<a name="l02385"></a>02385                                                <span class="stringliteral">&quot;\t\tShow_r=\&quot;%d\&quot;\n&quot;</span>
<a name="l02386"></a>02386                                                <span class="stringliteral">&quot;\t\tShow_transaction=\&quot;%d\&quot;\n&quot;</span>
<a name="l02387"></a>02387                                                <span class="stringliteral">&quot;\t\tShow_transaction_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02388"></a>02388                                                <span class="stringliteral">&quot;\t\tShow_transaction_nb=\&quot;%d\&quot;\n&quot;</span>
<a name="l02389"></a>02389                                                <span class="stringliteral">&quot;\t\tShow_transaction_date=\&quot;%d\&quot;\n&quot;</span>
<a name="l02390"></a>02390                                                <span class="stringliteral">&quot;\t\tShow_transaction_value_date=\&quot;%d\&quot;\n&quot;</span>
<a name="l02391"></a>02391                                                <span class="stringliteral">&quot;\t\tShow_transaction_payee=\&quot;%d\&quot;\n&quot;</span>
<a name="l02392"></a>02392                                                <span class="stringliteral">&quot;\t\tShow_transaction_categ=\&quot;%d\&quot;\n&quot;</span>
<a name="l02393"></a>02393                                                <span class="stringliteral">&quot;\t\tShow_transaction_sub_categ=\&quot;%d\&quot;\n&quot;</span>
<a name="l02394"></a>02394                                                <span class="stringliteral">&quot;\t\tShow_transaction_payment=\&quot;%d\&quot;\n&quot;</span>
<a name="l02395"></a>02395                                                <span class="stringliteral">&quot;\t\tShow_transaction_budget=\&quot;%d\&quot;\n&quot;</span>
<a name="l02396"></a>02396                                                <span class="stringliteral">&quot;\t\tShow_transaction_sub_budget=\&quot;%d\&quot;\n&quot;</span>
<a name="l02397"></a>02397                                                <span class="stringliteral">&quot;\t\tShow_transaction_chq=\&quot;%d\&quot;\n&quot;</span>
<a name="l02398"></a>02398                                                <span class="stringliteral">&quot;\t\tShow_transaction_note=\&quot;%d\&quot;\n&quot;</span>
<a name="l02399"></a>02399                                                <span class="stringliteral">&quot;\t\tShow_transaction_voucher=\&quot;%d\&quot;\n&quot;</span>
<a name="l02400"></a>02400                                                <span class="stringliteral">&quot;\t\tShow_transaction_reconcile=\&quot;%d\&quot;\n&quot;</span>
<a name="l02401"></a>02401                                                <span class="stringliteral">&quot;\t\tShow_transaction_bank=\&quot;%d\&quot;\n&quot;</span>
<a name="l02402"></a>02402                                                <span class="stringliteral">&quot;\t\tShow_transaction_fin_year=\&quot;%d\&quot;\n&quot;</span>
<a name="l02403"></a>02403                                                <span class="stringliteral">&quot;\t\tShow_transaction_sort_type=\&quot;%d\&quot;\n&quot;</span>
<a name="l02404"></a>02404                                                <span class="stringliteral">&quot;\t\tShow_columns_titles=\&quot;%d\&quot;\n&quot;</span>
<a name="l02405"></a>02405                                                <span class="stringliteral">&quot;\t\tShow_title_column_kind=\&quot;%d\&quot;\n&quot;</span>
<a name="l02406"></a>02406                                                <span class="stringliteral">&quot;\t\tShow_exclude_split_child=\&quot;%d\&quot;\n&quot;</span>
<a name="l02407"></a>02407                                                <span class="stringliteral">&quot;\t\tShow_split_amounts=\&quot;%d\&quot;\n&quot;</span>
<a name="l02408"></a>02408                                                <span class="stringliteral">&quot;\t\tCurrency_general=\&quot;%d\&quot;\n&quot;</span>
<a name="l02409"></a>02409                                                <span class="stringliteral">&quot;\t\tReport_in_payees=\&quot;%d\&quot;\n&quot;</span>
<a name="l02410"></a>02410                                                <span class="stringliteral">&quot;\t\tReport_can_click=\&quot;%d\&quot;\n&quot;</span>
<a name="l02411"></a>02411                                                <span class="stringliteral">&quot;\t\tFinancial_year_used=\&quot;%d\&quot;\n&quot;</span>
<a name="l02412"></a>02412                                                <span class="stringliteral">&quot;\t\tFinancial_year_kind=\&quot;%d\&quot;\n&quot;</span>
<a name="l02413"></a>02413                                                <span class="stringliteral">&quot;\t\tFinancial_year_select=\&quot;%s\&quot;\n&quot;</span>
<a name="l02414"></a>02414                                                <span class="stringliteral">&quot;\t\tDate_kind=\&quot;%d\&quot;\n&quot;</span>
<a name="l02415"></a>02415                                                <span class="stringliteral">&quot;\t\tDate_beginning=\&quot;%s\&quot;\n&quot;</span>
<a name="l02416"></a>02416                                                <span class="stringliteral">&quot;\t\tDate_end=\&quot;%s\&quot;\n&quot;</span>
<a name="l02417"></a>02417                                                <span class="stringliteral">&quot;\t\tSplit_by_date=\&quot;%d\&quot;\n&quot;</span>
<a name="l02418"></a>02418                                                <span class="stringliteral">&quot;\t\tSplit_date_period=\&quot;%d\&quot;\n&quot;</span>
<a name="l02419"></a>02419                                                <span class="stringliteral">&quot;\t\tSplit_by_fin_year=\&quot;%d\&quot;\n&quot;</span>
<a name="l02420"></a>02420                                                <span class="stringliteral">&quot;\t\tSplit_day_beginning=\&quot;%d\&quot;\n&quot;</span>
<a name="l02421"></a>02421                                                <span class="stringliteral">&quot;\t\tAccount_use_selection=\&quot;%d\&quot;\n&quot;</span>
<a name="l02422"></a>02422                                                <span class="stringliteral">&quot;\t\tAccount_selected=\&quot;%s\&quot;\n&quot;</span>
<a name="l02423"></a>02423                                                <span class="stringliteral">&quot;\t\tAccount_group_transactions=\&quot;%d\&quot;\n&quot;</span>
<a name="l02424"></a>02424                                                <span class="stringliteral">&quot;\t\tAccount_show_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02425"></a>02425                                                <span class="stringliteral">&quot;\t\tAccount_show_name=\&quot;%d\&quot;\n&quot;</span>
<a name="l02426"></a>02426                                                <span class="stringliteral">&quot;\t\tTransfer_kind=\&quot;%d\&quot;\n&quot;</span>
<a name="l02427"></a>02427                                                <span class="stringliteral">&quot;\t\tTransfer_selected_accounts=\&quot;%s\&quot;\n&quot;</span>
<a name="l02428"></a>02428                                                <span class="stringliteral">&quot;\t\tTransfer_exclude_transactions=\&quot;%d\&quot;\n&quot;</span>
<a name="l02429"></a>02429                                                <span class="stringliteral">&quot;\t\tCateg_use=\&quot;%d\&quot;\n&quot;</span>
<a name="l02430"></a>02430                                                <span class="stringliteral">&quot;\t\tCateg_use_selection=\&quot;%d\&quot;\n&quot;</span>
<a name="l02431"></a>02431                                                <span class="stringliteral">&quot;\t\tCateg_selected=\&quot;%s\&quot;\n&quot;</span>
<a name="l02432"></a>02432                                                <span class="stringliteral">&quot;\t\tCateg_show_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02433"></a>02433                                                <span class="stringliteral">&quot;\t\tCateg_show_sub_categ=\&quot;%d\&quot;\n&quot;</span>
<a name="l02434"></a>02434                                                <span class="stringliteral">&quot;\t\tCateg_show_without_sub_categ=\&quot;%d\&quot;\n&quot;</span>
<a name="l02435"></a>02435                                                <span class="stringliteral">&quot;\t\tCateg_show_sub_categ_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02436"></a>02436                                                <span class="stringliteral">&quot;\t\tCateg_currency=\&quot;%d\&quot;\n&quot;</span>
<a name="l02437"></a>02437                                                <span class="stringliteral">&quot;\t\tCateg_show_name=\&quot;%d\&quot;\n&quot;</span>
<a name="l02438"></a>02438                                                <span class="stringliteral">&quot;\t\tBudget_use=\&quot;%d\&quot;\n&quot;</span>
<a name="l02439"></a>02439                                                <span class="stringliteral">&quot;\t\tBudget_use_selection=\&quot;%d\&quot;\n&quot;</span>
<a name="l02440"></a>02440                                                <span class="stringliteral">&quot;\t\tBudget_selected=\&quot;%s\&quot;\n&quot;</span>
<a name="l02441"></a>02441                                                <span class="stringliteral">&quot;\t\tBudget_show_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02442"></a>02442                                                <span class="stringliteral">&quot;\t\tBudget_show_sub_budget=\&quot;%d\&quot;\n&quot;</span>
<a name="l02443"></a>02443                                                <span class="stringliteral">&quot;\t\tBudget_show_without_sub_budget=\&quot;%d\&quot;\n&quot;</span>
<a name="l02444"></a>02444                                                <span class="stringliteral">&quot;\t\tBudget_show_sub_budget_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02445"></a>02445                                                <span class="stringliteral">&quot;\t\tBudget_currency=\&quot;%d\&quot;\n&quot;</span>
<a name="l02446"></a>02446                                                <span class="stringliteral">&quot;\t\tBudget_show_name=\&quot;%d\&quot;\n&quot;</span>
<a name="l02447"></a>02447                                                <span class="stringliteral">&quot;\t\tPayee_use=\&quot;%d\&quot;\n&quot;</span>
<a name="l02448"></a>02448                                                <span class="stringliteral">&quot;\t\tPayee_use_selection=\&quot;%d\&quot;\n&quot;</span>
<a name="l02449"></a>02449                                                <span class="stringliteral">&quot;\t\tPayee_selected=\&quot;%s\&quot;\n&quot;</span>
<a name="l02450"></a>02450                                                <span class="stringliteral">&quot;\t\tPayee_show_amount=\&quot;%d\&quot;\n&quot;</span>
<a name="l02451"></a>02451                                                <span class="stringliteral">&quot;\t\tPayee_currency=\&quot;%d\&quot;\n&quot;</span>
<a name="l02452"></a>02452                                                <span class="stringliteral">&quot;\t\tPayee_show_name=\&quot;%d\&quot;\n&quot;</span>
<a name="l02453"></a>02453                                                <span class="stringliteral">&quot;\t\tAmount_currency=\&quot;%d\&quot;\n&quot;</span>
<a name="l02454"></a>02454                                                <span class="stringliteral">&quot;\t\tAmount_exclude_null=\&quot;%d\&quot;\n&quot;</span>
<a name="l02455"></a>02455                                                <span class="stringliteral">&quot;\t\tPayment_method_use=\&quot;%d\&quot;\n&quot;</span>
<a name="l02456"></a>02456                                                <span class="stringliteral">&quot;\t\tPayment_method_list=\&quot;%s\&quot;\n&quot;</span>
<a name="l02457"></a>02457                                                <span class="stringliteral">&quot;\t\tUse_text=\&quot;%d\&quot;\n&quot;</span>
<a name="l02458"></a>02458                                                <span class="stringliteral">&quot;\t\tUse_amount=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l02459"></a>02459             report_number_to_write,
<a name="l02460"></a>02460             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(report_name),
<a name="l02461"></a>02461             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(general_sort_type),
<a name="l02462"></a>02462             <a class="code" href="gsb__data__report_8c.html#af0c735cb4932dfd39c1bac8b709aac41">gsb_data_report_get_show_r</a> (report_number),
<a name="l02463"></a>02463             <a class="code" href="gsb__data__report_8c.html#a60ef2fcdc574a669ba7a14975ba532fa">gsb_data_report_get_show_report_transactions</a> (report_number),
<a name="l02464"></a>02464             <a class="code" href="gsb__data__report_8c.html#a321cacb63f18e3aec2beca8b1939078f">gsb_data_report_get_show_report_transaction_amount</a> (report_number),
<a name="l02465"></a>02465             <a class="code" href="gsb__data__report_8c.html#a1aaaf5b7a5cc6f02509c108607b21714">gsb_data_report_get_show_report_transaction_number</a> (report_number),
<a name="l02466"></a>02466             <a class="code" href="gsb__data__report_8c.html#aed1abedff7cfc02a95dcaf2d22edb14c">gsb_data_report_get_show_report_date</a> (report_number),
<a name="l02467"></a>02467             <a class="code" href="gsb__data__report_8c.html#ae74ac68a4250f92c23047231fd86e183">gsb_data_report_get_show_report_value_date</a> (report_number),
<a name="l02468"></a>02468             <a class="code" href="gsb__data__report_8c.html#a4c1ff27e8311c12f34ec351fb4ece8c1">gsb_data_report_get_show_report_payee</a> (report_number),
<a name="l02469"></a>02469             <a class="code" href="gsb__data__report_8c.html#aa89d2ab64f4f6b8646abe25855047517">gsb_data_report_get_show_report_category</a> (report_number),
<a name="l02470"></a>02470             <a class="code" href="gsb__data__report_8c.html#ad1fcc27701930ed8407141e2229fc84b">gsb_data_report_get_show_report_sub_category</a> (report_number),
<a name="l02471"></a>02471             <a class="code" href="gsb__data__report_8c.html#ad8c2e7e73636943574c5fbdca0504623">gsb_data_report_get_show_report_method_of_payment</a> (report_number),
<a name="l02472"></a>02472             <a class="code" href="gsb__data__report_8c.html#ae0d188ce272dba7a32193cd3b0def51a">gsb_data_report_get_show_report_budget</a> (report_number),
<a name="l02473"></a>02473             <a class="code" href="gsb__data__report_8c.html#a286e3676a77392b04bb3d95301d1e31a">gsb_data_report_get_show_report_sub_budget</a> (report_number),
<a name="l02474"></a>02474             <a class="code" href="gsb__data__report_8c.html#a04806d05098cdb8e2d62ed4fc08b6758">gsb_data_report_get_show_report_method_of_payment_content</a> (report_number),
<a name="l02475"></a>02475             <a class="code" href="gsb__data__report_8c.html#a68663f18a0398ffded17aa69413cac65">gsb_data_report_get_show_report_note</a> (report_number),
<a name="l02476"></a>02476             <a class="code" href="gsb__data__report_8c.html#aace6b2c39c7cf9c260300071a9e79c8b">gsb_data_report_get_show_report_voucher</a> (report_number),
<a name="l02477"></a>02477             <a class="code" href="gsb__data__report_8c.html#a73804ddf13bb7adef8f0280f796029df">gsb_data_report_get_show_report_marked</a> (report_number),
<a name="l02478"></a>02478             <a class="code" href="gsb__data__report_8c.html#ad9ba2ec81d468b2897d7602159076a18">gsb_data_report_get_show_report_bank_references</a> (report_number),
<a name="l02479"></a>02479             <a class="code" href="gsb__data__report_8c.html#aaa96b52e90b04814a016c44bc68f05af">gsb_data_report_get_show_report_financial_year</a> (report_number),
<a name="l02480"></a>02480             <a class="code" href="gsb__data__report_8c.html#a819b84a6821b23316bbb49770677a2fd">gsb_data_report_get_sorting_report</a> (report_number),
<a name="l02481"></a>02481             <a class="code" href="gsb__data__report_8c.html#a342b5f849aa7502164adca331cc01e70">gsb_data_report_get_column_title_show</a> (report_number),
<a name="l02482"></a>02482             <a class="code" href="gsb__data__report_8c.html#a754246c573f2bada728cb53c8b8e64d2">gsb_data_report_get_column_title_type</a> (report_number),
<a name="l02483"></a>02483             <a class="code" href="gsb__data__report_8c.html#a8fadaed4b6bb256487ab1d3a96f1d810">gsb_data_report_get_not_detail_split</a> (report_number),
<a name="l02484"></a>02484             <a class="code" href="gsb__data__report_8c.html#a89c0ba1f36ce26a92b596f677ed040ea">gsb_data_report_get_split_credit_debit</a> (report_number),
<a name="l02485"></a>02485             <a class="code" href="gsb__data__report_8c.html#a612672a2c6a8f7a8d88eab53bbd675ea">gsb_data_report_get_currency_general</a> (report_number),
<a name="l02486"></a>02486             <a class="code" href="gsb__data__report_8c.html#afc1cb357b4bcd3737c5f3e629e85c2d3">gsb_data_report_get_append_in_payee</a> (report_number),
<a name="l02487"></a>02487             <a class="code" href="gsb__data__report_8c.html#ac5a36bf3cb9623e0c53a4e7a0d1f6633">gsb_data_report_get_report_can_click</a> (report_number),
<a name="l02488"></a>02488             <a class="code" href="gsb__data__report_8c.html#a333c4b8854b3251bcaed0af381f6c9f0">gsb_data_report_get_use_financial_year</a> (report_number),
<a name="l02489"></a>02489             <a class="code" href="gsb__data__report_8c.html#a7a1b2e1c08c6f27b78e33cc36b812b09">gsb_data_report_get_financial_year_type</a> (report_number),
<a name="l02490"></a>02490             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(financial_year_select),
<a name="l02491"></a>02491             <a class="code" href="gsb__data__report_8c.html#af7a006077d16fc48a7b50dda1bc1a003">gsb_data_report_get_date_type</a> (report_number),
<a name="l02492"></a>02492             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(date_start),
<a name="l02493"></a>02493             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(date_end),
<a name="l02494"></a>02494             <a class="code" href="gsb__data__report_8c.html#ae6b88858361f9e177a6be4372786a98e">gsb_data_report_get_period_split</a> (report_number),
<a name="l02495"></a>02495             <a class="code" href="gsb__data__report_8c.html#ab62bea16821cbdf1770049a1f2a957dd">gsb_data_report_get_period_split_type</a> (report_number),
<a name="l02496"></a>02496             <a class="code" href="gsb__data__report_8c.html#a996aadce24ac64e6632f9984a358b8bc">gsb_data_report_get_financial_year_split</a> (report_number),
<a name="l02497"></a>02497             <a class="code" href="gsb__data__report_8c.html#ade2bfa0985adb8d198819ed4017fbf69">gsb_data_report_get_period_split_day</a> (report_number),
<a name="l02498"></a>02498             <a class="code" href="gsb__data__report_8c.html#a8795e1ce126fb9646150f81dc88bec5e">gsb_data_report_get_account_use_chosen</a> (report_number),
<a name="l02499"></a>02499             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(account_selected),
<a name="l02500"></a>02500             <a class="code" href="gsb__data__report_8c.html#a42a9f65da4a9151a990da2d4a65cc226">gsb_data_report_get_account_group_reports</a> (report_number),
<a name="l02501"></a>02501             <a class="code" href="gsb__data__report_8c.html#a9c5625a1a402793ea655690e1a3574a1">gsb_data_report_get_account_show_amount</a> (report_number),
<a name="l02502"></a>02502             <a class="code" href="gsb__data__report_8c.html#a6dc235068d7d26ab61b2093f601c7d47">gsb_data_report_get_account_show_name</a> (report_number),
<a name="l02503"></a>02503             <a class="code" href="gsb__data__report_8c.html#ac06e2bf2147480c80e6b718b9a4684c8">gsb_data_report_get_transfer_choice</a> (report_number),
<a name="l02504"></a>02504             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(transfer_selected_accounts),
<a name="l02505"></a>02505             <a class="code" href="gsb__data__report_8c.html#a84ed85db03b9ff0dbf79a4fa05f77cf9">gsb_data_report_get_transfer_reports_only</a> (report_number),
<a name="l02506"></a>02506             <a class="code" href="gsb__data__report_8c.html#af669229d09ac127bba5200c85a5c55f2">gsb_data_report_get_category_used</a> (report_number),
<a name="l02507"></a>02507             <a class="code" href="gsb__data__report_8c.html#ad49bc1036e429d9980dee8af4ca566f8">gsb_data_report_get_category_detail_used</a> (report_number),
<a name="l02508"></a>02508             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(categ_selected),
<a name="l02509"></a>02509             <a class="code" href="gsb__data__report_8c.html#ab3344874887e7a1a8b6c8c697f25839d">gsb_data_report_get_category_show_category_amount</a> (report_number),
<a name="l02510"></a>02510             <a class="code" href="gsb__data__report_8c.html#a88734d946b08911ec007ca161389df6b">gsb_data_report_get_category_show_sub_category</a> (report_number),
<a name="l02511"></a>02511             <a class="code" href="gsb__data__report_8c.html#af4733ecea37c9687e09640429b1f1d36">gsb_data_report_get_category_show_without_category</a> (report_number),
<a name="l02512"></a>02512             <a class="code" href="gsb__data__report_8c.html#ac9bd4b8fe61e9e585d1f096aac3593be">gsb_data_report_get_category_show_sub_category_amount</a> (report_number),
<a name="l02513"></a>02513             <a class="code" href="gsb__data__report_8c.html#ac6e52caf2a3546fea1a63e3893940e85">gsb_data_report_get_category_currency</a> (report_number),
<a name="l02514"></a>02514             <a class="code" href="gsb__data__report_8c.html#a63ce412e50b72a75e53acff971b2c543">gsb_data_report_get_category_show_name</a> (report_number),
<a name="l02515"></a>02515             <a class="code" href="gsb__data__report_8c.html#ac769ab6723a840d0059fe07116500866">gsb_data_report_get_budget_used</a> (report_number),
<a name="l02516"></a>02516             <a class="code" href="gsb__data__report_8c.html#a45e6a3c4276d00531dfdec020025e233">gsb_data_report_get_budget_detail_used</a> (report_number),
<a name="l02517"></a>02517             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(budget_selected),
<a name="l02518"></a>02518             <a class="code" href="gsb__data__report_8c.html#ab575f962ecdc5d88215734464c37f785">gsb_data_report_get_budget_show_budget_amount</a> (report_number),
<a name="l02519"></a>02519             <a class="code" href="gsb__data__report_8c.html#abee9b7991ac2a4309cce782a30f4d56b">gsb_data_report_get_budget_show_sub_budget</a> (report_number),
<a name="l02520"></a>02520             <a class="code" href="gsb__data__report_8c.html#a024d23601c6cf79622a1f1c78d8aa9dc">gsb_data_report_get_budget_show_without_budget</a> (report_number),
<a name="l02521"></a>02521             <a class="code" href="gsb__data__report_8c.html#a47ab8953e5739e8bb7a86c08d253faf4">gsb_data_report_get_budget_show_sub_budget_amount</a> (report_number),
<a name="l02522"></a>02522             <a class="code" href="gsb__data__report_8c.html#ac55bacd270ac28bb1ccb99bf05f56600">gsb_data_report_get_budget_currency</a> (report_number),
<a name="l02523"></a>02523             <a class="code" href="gsb__data__report_8c.html#a996b003e1a37decc93b190770ba98893">gsb_data_report_get_budget_show_name</a> (report_number),
<a name="l02524"></a>02524             <a class="code" href="gsb__data__report_8c.html#a1a3062adfe4e0dfd44c28241a9e6be74">gsb_data_report_get_payee_used</a> (report_number),
<a name="l02525"></a>02525             <a class="code" href="gsb__data__report_8c.html#ab1419810516f92c2abd2be0b8f9bbc46">gsb_data_report_get_payee_detail_used</a> (report_number),
<a name="l02526"></a>02526             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(payee_selected),
<a name="l02527"></a>02527             <a class="code" href="gsb__data__report_8c.html#ad29798d39b64acda018ddd1043d31845">gsb_data_report_get_payee_show_payee_amount</a> (report_number),
<a name="l02528"></a>02528             <a class="code" href="gsb__data__report_8c.html#a6caa69e4c724ee89a5ce59e2be19a6fe">gsb_data_report_get_payee_currency</a> (report_number),
<a name="l02529"></a>02529             <a class="code" href="gsb__data__report_8c.html#a20ef94f2f9e40aff661015164410e781">gsb_data_report_get_payee_show_name</a> (report_number),
<a name="l02530"></a>02530             <a class="code" href="gsb__data__report_8c.html#a58c1bf88812b81d307bea9247695bfc9">gsb_data_report_get_amount_comparison_currency</a> (report_number),
<a name="l02531"></a>02531             <a class="code" href="gsb__data__report_8c.html#a232972d837e5037f101cc7f4e1d08411">gsb_data_report_get_amount_comparison_only_report_non_null</a> (report_number),
<a name="l02532"></a>02532             <a class="code" href="gsb__data__report_8c.html#aea652d5031272334eb6d0d6dba670f2d">gsb_data_report_get_method_of_payment_used</a> (report_number),
<a name="l02533"></a>02533             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(payment_method_list),
<a name="l02534"></a>02534             <a class="code" href="gsb__data__report_8c.html#aa558931984bcd63613c24befdb7bca21">gsb_data_report_get_text_comparison_used</a> (report_number),
<a name="l02535"></a>02535             <a class="code" href="gsb__data__report_8c.html#abc400fd723354a2aab046938ec38d391">gsb_data_report_get_amount_comparison_used</a> (report_number));
<a name="l02536"></a>02536 
<a name="l02537"></a>02537         g_free (report_name);
<a name="l02538"></a>02538         g_free (general_sort_type);
<a name="l02539"></a>02539         g_free (financial_year_select);
<a name="l02540"></a>02540         g_free (account_selected);
<a name="l02541"></a>02541         g_free (transfer_selected_accounts);
<a name="l02542"></a>02542         g_free (categ_selected);
<a name="l02543"></a>02543         g_free (budget_selected);
<a name="l02544"></a>02544         g_free (payee_selected);
<a name="l02545"></a>02545         g_free (payment_method_list);
<a name="l02546"></a>02546         g_free (date_start);
<a name="l02547"></a>02547         g_free (date_end);
<a name="l02548"></a>02548 
<a name="l02549"></a>02549         <span class="comment">/* append the new string to the file content</span>
<a name="l02550"></a>02550 <span class="comment">         * and take the new iterator */</span>
<a name="l02551"></a>02551         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02552"></a>02552                                                length_calculated,
<a name="l02553"></a>02553                                                file_content,
<a name="l02554"></a>02554                                                new_string );
<a name="l02555"></a>02555 
<a name="l02556"></a>02556         <span class="comment">/* save the text comparison */</span>
<a name="l02557"></a>02557 
<a name="l02558"></a>02558         list_tmp_2 = <a class="code" href="gsb__data__report_8c.html#acef51acc8cdd62ce33bf5bebdab0824d">gsb_data_report_get_text_comparison_list</a> (report_number);
<a name="l02559"></a>02559 
<a name="l02560"></a>02560         <span class="keywordflow">while</span> ( list_tmp_2 )
<a name="l02561"></a>02561         {
<a name="l02562"></a>02562             gint text_comparison_number;
<a name="l02563"></a>02563 
<a name="l02564"></a>02564             text_comparison_number = GPOINTER_TO_INT (list_tmp_2 -&gt; data);
<a name="l02565"></a>02565 
<a name="l02566"></a>02566             <span class="comment">/* if current_report is set, this mean we export the report,</span>
<a name="l02567"></a>02567 <span class="comment">             * we cannot save the number should be automaticly given while</span>
<a name="l02568"></a>02568 <span class="comment">             * importing, so set the report number to -1 */</span>
<a name="l02569"></a>02569             <span class="keywordflow">if</span> (current_report)
<a name="l02570"></a>02570                 text_comparison_number_to_write = -1;
<a name="l02571"></a>02571             <span class="keywordflow">else</span>
<a name="l02572"></a>02572                 text_comparison_number_to_write = text_comparison_number;
<a name="l02573"></a>02573 
<a name="l02574"></a>02574             <span class="comment">/* now we can fill the file content */</span>
<a name="l02575"></a>02575             new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Text_comparison\n&quot;</span>
<a name="l02576"></a>02576                                                    <span class="stringliteral">&quot;\t\tComparison_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l02577"></a>02577                                                    <span class="stringliteral">&quot;\t\tReport_nb=\&quot;%d\&quot;\n&quot;</span>
<a name="l02578"></a>02578                                                    <span class="stringliteral">&quot;\t\tLast_comparison=\&quot;%d\&quot;\n&quot;</span>
<a name="l02579"></a>02579                                                    <span class="stringliteral">&quot;\t\tObject=\&quot;%d\&quot;\n&quot;</span>
<a name="l02580"></a>02580                                                    <span class="stringliteral">&quot;\t\tOperator=\&quot;%d\&quot;\n&quot;</span>
<a name="l02581"></a>02581                                                    <span class="stringliteral">&quot;\t\tText=\&quot;%s\&quot;\n&quot;</span>
<a name="l02582"></a>02582                                                    <span class="stringliteral">&quot;\t\tUse_text=\&quot;%d\&quot;\n&quot;</span>
<a name="l02583"></a>02583                                                    <span class="stringliteral">&quot;\t\tComparison_1=\&quot;%d\&quot;\n&quot;</span>
<a name="l02584"></a>02584                                                    <span class="stringliteral">&quot;\t\tLink_1_2=\&quot;%d\&quot;\n&quot;</span>
<a name="l02585"></a>02585                                                    <span class="stringliteral">&quot;\t\tComparison_2=\&quot;%d\&quot;\n&quot;</span>
<a name="l02586"></a>02586                                                    <span class="stringliteral">&quot;\t\tAmount_1=\&quot;%d\&quot;\n&quot;</span>
<a name="l02587"></a>02587                                                    <span class="stringliteral">&quot;\t\tAmount_2=\&quot;%d\&quot; /&gt;\n&quot;</span>,
<a name="l02588"></a>02588                                                    text_comparison_number_to_write,
<a name="l02589"></a>02589                                                    report_number_to_write,
<a name="l02590"></a>02590                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#a7fd2e0a0543f8b47fd26394c8924f94d">gsb_data_report_text_comparison_get_link_to_last_text_comparison</a> (text_comparison_number),
<a name="l02591"></a>02591                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#aa16049f62bdf58790d86880cbb500d0f">gsb_data_report_text_comparison_get_field</a> (text_comparison_number),
<a name="l02592"></a>02592                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#a456a9c966f4efc5af7aadca4d09f1b2a">gsb_data_report_text_comparison_get_operator</a> (text_comparison_number),
<a name="l02593"></a>02593                                                    <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(<a class="code" href="gsb__data__report__text__comparison_8c.html#a787124a1b15143ea18ec069a47fada01">gsb_data_report_text_comparison_get_text</a> (text_comparison_number)),
<a name="l02594"></a>02594                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#a0eb8e0a0e157e3bf8a518a09ab99203e">gsb_data_report_text_comparison_get_use_text</a> (text_comparison_number),
<a name="l02595"></a>02595                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#afe21d933d743f2a91261483b8b0b466c">gsb_data_report_text_comparison_get_first_comparison</a> (text_comparison_number),
<a name="l02596"></a>02596                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#a8d68df97e25aace4a4809dd9f96819ab">gsb_data_report_text_comparison_get_link_first_to_second_part</a> (text_comparison_number),
<a name="l02597"></a>02597                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#aefee06554ddb50e610a661ee4b7ad438">gsb_data_report_text_comparison_get_second_comparison</a> (text_comparison_number),
<a name="l02598"></a>02598                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#af8a1288b302625bf680b9b1eb908af6f">gsb_data_report_text_comparison_get_first_amount</a> (text_comparison_number),
<a name="l02599"></a>02599                                                    <a class="code" href="gsb__data__report__text__comparison_8c.html#aeb73733ca155c44e7991f967eea4205f">gsb_data_report_text_comparison_get_second_amount</a> (text_comparison_number));
<a name="l02600"></a>02600 
<a name="l02601"></a>02601             <span class="comment">/* append the new string to the file content</span>
<a name="l02602"></a>02602 <span class="comment">             * and take the new iterator */</span>
<a name="l02603"></a>02603             iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02604"></a>02604                                                    length_calculated,
<a name="l02605"></a>02605                                                    file_content,
<a name="l02606"></a>02606                                                    new_string );
<a name="l02607"></a>02607 
<a name="l02608"></a>02608             list_tmp_2 = list_tmp_2 -&gt; next;
<a name="l02609"></a>02609         }
<a name="l02610"></a>02610 
<a name="l02611"></a>02611         <span class="comment">/* save the amount comparison */</span>
<a name="l02612"></a>02612 
<a name="l02613"></a>02613         list_tmp_2 = <a class="code" href="gsb__data__report_8c.html#a67893d2be0b2f657aa1c41211820280b">gsb_data_report_get_amount_comparison_list</a> (report_number);
<a name="l02614"></a>02614 
<a name="l02615"></a>02615         <span class="keywordflow">while</span> ( list_tmp_2 )
<a name="l02616"></a>02616         {
<a name="l02617"></a>02617             gint amount_comparison_number;
<a name="l02618"></a>02618             gchar *first_amount;
<a name="l02619"></a>02619             gchar *second_amount;
<a name="l02620"></a>02620 
<a name="l02621"></a>02621             amount_comparison_number = GPOINTER_TO_INT (list_tmp_2 -&gt; data);
<a name="l02622"></a>02622 
<a name="l02623"></a>02623             <span class="comment">/* if current_report is set, this mean we export the report,</span>
<a name="l02624"></a>02624 <span class="comment">             * we cannot save the number should be automaticly given while</span>
<a name="l02625"></a>02625 <span class="comment">             * importing, so set the report number to -1 */</span>
<a name="l02626"></a>02626             <span class="keywordflow">if</span> (current_report)
<a name="l02627"></a>02627                 amount_comparison_number_to_write = -1;
<a name="l02628"></a>02628             <span class="keywordflow">else</span>
<a name="l02629"></a>02629                 amount_comparison_number_to_write = amount_comparison_number;
<a name="l02630"></a>02630 
<a name="l02631"></a>02631             <span class="comment">/* set the numbers */</span>
<a name="l02632"></a>02632             first_amount = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l02633"></a>02633                         <a class="code" href="gsb__data__report__amout__comparison_8c.html#acf6a83475c566080242c5c6163abde54">gsb_data_report_amount_comparison_get_first_amount</a> (
<a name="l02634"></a>02634                         amount_comparison_number ), 2 );
<a name="l02635"></a>02635             second_amount = <a class="code" href="gsb__real_8c.html#a50c880e082aa7241dfa50a9bc0a87207">gsb_real_save_real_to_string</a> (
<a name="l02636"></a>02636                         <a class="code" href="gsb__data__report__amout__comparison_8c.html#aa34007389fb6e92a19ef95edc1803d8b">gsb_data_report_amount_comparison_get_second_amount</a> (
<a name="l02637"></a>02637                         amount_comparison_number ), 2 );
<a name="l02638"></a>02638 
<a name="l02639"></a>02639             <span class="comment">/* now we can fill the file content */</span>
<a name="l02640"></a>02640             new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Amount_comparison\n&quot;</span>
<a name="l02641"></a>02641                         <span class="stringliteral">&quot;\t\tComparison_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l02642"></a>02642                         <span class="stringliteral">&quot;\t\tReport_nb=\&quot;%d\&quot;\n&quot;</span>
<a name="l02643"></a>02643                         <span class="stringliteral">&quot;\t\tLast_comparison=\&quot;%d\&quot;\n&quot;</span>
<a name="l02644"></a>02644                         <span class="stringliteral">&quot;\t\tComparison_1=\&quot;%d\&quot;\n&quot;</span>
<a name="l02645"></a>02645                         <span class="stringliteral">&quot;\t\tLink_1_2=\&quot;%d\&quot;\n&quot;</span>
<a name="l02646"></a>02646                         <span class="stringliteral">&quot;\t\tComparison_2=\&quot;%d\&quot;\n&quot;</span>
<a name="l02647"></a>02647                         <span class="stringliteral">&quot;\t\tAmount_1=\&quot;%s\&quot;\n&quot;</span>
<a name="l02648"></a>02648                         <span class="stringliteral">&quot;\t\tAmount_2=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l02649"></a>02649                         amount_comparison_number_to_write,
<a name="l02650"></a>02650                         report_number_to_write,
<a name="l02651"></a>02651                         <a class="code" href="gsb__data__report__amout__comparison_8c.html#a0917d321c4f62f197d4d31ea0fdcc6a4">gsb_data_report_amount_comparison_get_link_to_last_amount_comparison</a> (
<a name="l02652"></a>02652                         amount_comparison_number ),
<a name="l02653"></a>02653                         <a class="code" href="gsb__data__report__amout__comparison_8c.html#a44f7f91f11a27716875d00423b81deea">gsb_data_report_amount_comparison_get_first_comparison</a> (
<a name="l02654"></a>02654                         amount_comparison_number ),
<a name="l02655"></a>02655                         <a class="code" href="gsb__data__report__amout__comparison_8c.html#afceb08f5464a31bc51d17215e6589514">gsb_data_report_amount_comparison_get_link_first_to_second_part</a> (
<a name="l02656"></a>02656                         amount_comparison_number ),
<a name="l02657"></a>02657                         <a class="code" href="gsb__data__report__amout__comparison_8c.html#aa9d04fc293edeacf0930121bd663f234">gsb_data_report_amount_comparison_get_second_comparison</a> (
<a name="l02658"></a>02658                         amount_comparison_number ),
<a name="l02659"></a>02659                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(first_amount ),
<a name="l02660"></a>02660                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(second_amount ) );
<a name="l02661"></a>02661 
<a name="l02662"></a>02662             g_free (first_amount);
<a name="l02663"></a>02663             g_free (second_amount);
<a name="l02664"></a>02664 
<a name="l02665"></a>02665             <span class="comment">/* append the new string to the file content</span>
<a name="l02666"></a>02666 <span class="comment">             * and take the new iterator */</span>
<a name="l02667"></a>02667 
<a name="l02668"></a>02668             iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02669"></a>02669                                                    length_calculated,
<a name="l02670"></a>02670                                                    file_content,
<a name="l02671"></a>02671                                                    new_string );
<a name="l02672"></a>02672             list_tmp_2 = list_tmp_2 -&gt; next;
<a name="l02673"></a>02673         }
<a name="l02674"></a>02674         list_tmp = list_tmp -&gt; next;
<a name="l02675"></a>02675     }
<a name="l02676"></a>02676     <span class="keywordflow">return</span> iterator;
<a name="l02677"></a>02677 }
<a name="l02678"></a>02678 
<a name="l02679"></a>02679 
<a name="l02689"></a>02689 gulong gsb_file_save_logo_part ( gulong iterator,
<a name="l02690"></a>02690                         gulong *length_calculated,
<a name="l02691"></a>02691                         gchar **file_content )
<a name="l02692"></a>02692 {
<a name="l02693"></a>02693     GdkPixbuf *pixbuf = NULL;
<a name="l02694"></a>02694     gchar *new_string = NULL;
<a name="l02695"></a>02695     gchar * str64;
<a name="l02696"></a>02696 
<a name="l02697"></a>02697     pixbuf = <a class="code" href="gsb__select__icon_8c.html#ab94baafcefa2186ea14a52afead216c5">gsb_select_icon_get_logo_pixbuf</a> ( );
<a name="l02698"></a>02698     <span class="keywordflow">if</span> ( !pixbuf )
<a name="l02699"></a>02699         <span class="keywordflow">return</span> 0;
<a name="l02700"></a>02700 
<a name="l02701"></a>02701     str64 = <a class="code" href="gsb__select__icon_8c.html#a0821d91b9c32c62c3d2adb1b19d2a02c">gsb_select_icon_create_chaine_base64_from_pixbuf</a> ( pixbuf );
<a name="l02702"></a>02702 
<a name="l02703"></a>02703     new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Logo\n&quot;</span>
<a name="l02704"></a>02704                         <span class="stringliteral">&quot;\t\tImage=\&quot;%s\&quot; /&gt;\n&quot;</span>, 
<a name="l02705"></a>02705                         <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(str64) );
<a name="l02706"></a>02706 
<a name="l02707"></a>02707     iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02708"></a>02708                         length_calculated,
<a name="l02709"></a>02709                         file_content,
<a name="l02710"></a>02710                         new_string );
<a name="l02711"></a>02711 
<a name="l02712"></a>02712     <span class="keywordflow">return</span> iterator;
<a name="l02713"></a>02713 }
<a name="l02714"></a>02714 
<a name="l02715"></a>02715 
<a name="l02725"></a>02725 gulong gsb_file_save_account_icon_part ( gulong iterator,
<a name="l02726"></a>02726                         gulong *length_calculated,
<a name="l02727"></a>02727                         gchar **file_content )
<a name="l02728"></a>02728 {
<a name="l02729"></a>02729     GSList *list_tmp;
<a name="l02730"></a>02730 
<a name="l02731"></a>02731     list_tmp = <a class="code" href="gsb__select__icon_8c.html#a7072d49b909a1b5b537eacfaae4eed60">gsb_select_icon_list_accounts_icon</a> ();
<a name="l02732"></a>02732 
<a name="l02733"></a>02733     <span class="keywordflow">while</span> ( list_tmp )
<a name="l02734"></a>02734     {
<a name="l02735"></a>02735         GdkPixbuf *pixbuf = NULL;
<a name="l02736"></a>02736         gchar *new_string = NULL;
<a name="l02737"></a>02737         gchar *str64;
<a name="l02738"></a>02738         gint account_number;
<a name="l02739"></a>02739 
<a name="l02740"></a>02740         account_number = <a class="code" href="gsb__select__icon_8c.html#a6f0518fa0e7946b6ec40427f21375fac">gsb_select_icon_get_no_account_by_ptr</a> ( list_tmp -&gt; data );
<a name="l02741"></a>02741 
<a name="l02742"></a>02742         <span class="keywordflow">if</span> ( account_number == -1 )
<a name="l02743"></a>02743         {
<a name="l02744"></a>02744             list_tmp = list_tmp -&gt; next;
<a name="l02745"></a>02745             <span class="keywordflow">continue</span>;
<a name="l02746"></a>02746         }
<a name="l02747"></a>02747         
<a name="l02748"></a>02748         pixbuf = <a class="code" href="gsb__select__icon_8c.html#a43a3a54faa503b5321a10a2cc82e8b21">gsb_select_icon_get_account_pixbuf_by_ptr</a> ( list_tmp -&gt; data );
<a name="l02749"></a>02749         str64 = <a class="code" href="gsb__select__icon_8c.html#a0821d91b9c32c62c3d2adb1b19d2a02c">gsb_select_icon_create_chaine_base64_from_pixbuf</a> ( pixbuf );
<a name="l02750"></a>02750 
<a name="l02751"></a>02751         new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Account_icon\n&quot;</span>
<a name="l02752"></a>02752                             <span class="stringliteral">&quot;\t\tAccount_number=\&quot;%d\&quot;\n&quot;</span>
<a name="l02753"></a>02753                             <span class="stringliteral">&quot;\t\tImage=\&quot;%s\&quot; /&gt;\n&quot;</span>,
<a name="l02754"></a>02754                             account_number,
<a name="l02755"></a>02755                             <a class="code" href="gsb__file__save_8c.html#afab094df64a133cffdeb914484e1e52d">my_safe_null_str</a>(str64) );
<a name="l02756"></a>02756 
<a name="l02757"></a>02757         iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02758"></a>02758                         length_calculated,
<a name="l02759"></a>02759                         file_content,
<a name="l02760"></a>02760                         new_string );
<a name="l02761"></a>02761 
<a name="l02762"></a>02762         list_tmp = list_tmp -&gt; next;
<a name="l02763"></a>02763     }
<a name="l02764"></a>02764 
<a name="l02765"></a>02765     <span class="keywordflow">return</span> iterator;
<a name="l02766"></a>02766 }
<a name="l02767"></a>02767 
<a name="l02768"></a>02768 
<a name="l02778"></a>02778 gulong gsb_file_save_bet_part ( gulong iterator,
<a name="l02779"></a>02779                         gulong *length_calculated,
<a name="l02780"></a>02780                         gchar **file_content )
<a name="l02781"></a>02781 {
<a name="l02782"></a>02782     gchar *new_string;
<a name="l02783"></a>02783     GPtrArray *tab;
<a name="l02784"></a>02784     gint i;
<a name="l02785"></a>02785 
<a name="l02786"></a>02786     <span class="comment">/* save the general informations */</span>
<a name="l02787"></a>02787     new_string = g_markup_printf_escaped ( <span class="stringliteral">&quot;\t&lt;Bet Ddte=\&quot;%d\&quot; /&gt;\n&quot;</span>, <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#abeb050bc20ba0ac1d694a1e1326f2fe2">bet_deb_period</a> );
<a name="l02788"></a>02788 
<a name="l02789"></a>02789     <span class="comment">/* append the new string to the file content */</span>
<a name="l02790"></a>02790     iterator = <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02791"></a>02791                                         length_calculated,
<a name="l02792"></a>02792                                         file_content,
<a name="l02793"></a>02793                                         new_string );
<a name="l02794"></a>02794 
<a name="l02795"></a>02795     tab = <a class="code" href="bet__data_8c.html#a4185b5667139f402a298806bb53a211a">bet_data_get_strings_to_save</a> ( );
<a name="l02796"></a>02796 
<a name="l02797"></a>02797     <span class="keywordflow">if</span> ( tab == NULL )
<a name="l02798"></a>02798         <span class="keywordflow">return</span> iterator;
<a name="l02799"></a>02799 
<a name="l02800"></a>02800     <span class="keywordflow">for</span> ( i = 0; i &lt; tab -&gt; len; i++ )
<a name="l02801"></a>02801     {
<a name="l02802"></a>02802         new_string = g_ptr_array_index ( tab, i );
<a name="l02803"></a>02803         iterator =  <a class="code" href="gsb__file__save_8c.html#a53abd581b16b2e5974e4b7b8cbfbd321">gsb_file_save_append_part</a> ( iterator,
<a name="l02804"></a>02804                                         length_calculated,
<a name="l02805"></a>02805                                         file_content,
<a name="l02806"></a>02806                                         new_string );
<a name="l02807"></a>02807     }
<a name="l02808"></a>02808 
<a name="l02809"></a>02809     <span class="comment">/* and return the new iterator */</span>
<a name="l02810"></a>02810     <span class="keywordflow">return</span> iterator;
<a name="l02811"></a>02811 }
<a name="l02812"></a>02812 
<a name="l02813"></a>02813 
<a name="l02814"></a>02814 <span class="comment">/* Local Variables: */</span>
<a name="l02815"></a>02815 <span class="comment">/* c-basic-offset: 4 */</span>
<a name="l02816"></a>02816 <span class="comment">/* End: */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Généré le Sat Aug 7 22:12:02 2010 pour Grisbi par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
