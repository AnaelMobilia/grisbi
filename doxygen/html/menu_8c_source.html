<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Grisbi:  Fichier source de menu.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&nbsp;associées</span></a></li>
      <li><a href="annotated.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
    </ul>
  </div>
<h1>menu.c</h1><a href="menu_8c.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ************************************************************************** */</span>
<a name="l00002"></a>00002 <span class="comment">/* Ce fichier contient les définitions de tous les menus et barres d&#39;outils   */</span>
<a name="l00003"></a>00003 <span class="comment">/*                                                                            */</span>
<a name="l00004"></a>00004 <span class="comment">/*                                  menu.c                                    */</span>
<a name="l00005"></a>00005 <span class="comment">/*                                                                            */</span>
<a name="l00006"></a>00006 <span class="comment">/*     Copyright (C)    2000-2008 Cédric Auger (cedric@grisbi.org)           */</span>
<a name="l00007"></a>00007 <span class="comment">/*                      2004-2009 Benjamin Drieu (bdrieu@april.org)           */</span>
<a name="l00008"></a>00008 <span class="comment">/*                      http://www.grisbi.org                                 */</span>
<a name="l00009"></a>00009 <span class="comment">/*                                                                            */</span>
<a name="l00010"></a>00010 <span class="comment">/*  This program is free software; you can redistribute it and/or modify      */</span>
<a name="l00011"></a>00011 <span class="comment">/*  it under the terms of the GNU General Public License as published by      */</span>
<a name="l00012"></a>00012 <span class="comment">/*  the Free Software Foundation; either version 2 of the License, or         */</span>
<a name="l00013"></a>00013 <span class="comment">/*  (at your option) any later version.                                       */</span>
<a name="l00014"></a>00014 <span class="comment">/*                                                                            */</span>
<a name="l00015"></a>00015 <span class="comment">/*  This program is distributed in the hope that it will be useful,           */</span>
<a name="l00016"></a>00016 <span class="comment">/*  but WITHOUT ANY WARRANTY; without even the implied warranty of            */</span>
<a name="l00017"></a>00017 <span class="comment">/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             */</span>
<a name="l00018"></a>00018 <span class="comment">/*  GNU General Public License for more details.                              */</span>
<a name="l00019"></a>00019 <span class="comment">/*                                                                            */</span>
<a name="l00020"></a>00020 <span class="comment">/*  You should have received a copy of the GNU General Public License         */</span>
<a name="l00021"></a>00021 <span class="comment">/*  along with this program; if not, write to the Free Software               */</span>
<a name="l00022"></a>00022 <span class="comment">/*  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */</span>
<a name="l00023"></a>00023 <span class="comment">/*                                                                            */</span>
<a name="l00024"></a>00024 <span class="comment">/* ************************************************************************** */</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="comment">/*START_INCLUDE*/</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="menu_8h.html">menu.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="help_8h.html">help.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="barre__outils_8h.html">barre_outils.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="gsb__transactions__list_8h.html">gsb_transactions_list.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="navigation_8h.html">navigation.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="export_8h.html">export.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="file__obfuscate__qif_8h.html">file_obfuscate_qif.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="file__obfuscate_8h.html">file_obfuscate.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="tip_8h.html">tip.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="gsb__account_8h.html">gsb_account.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="gsb__assistant__account_8h.html">gsb_assistant_account.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="gsb__assistant__archive__export_8h.html">gsb_assistant_archive_export.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="gsb__assistant__archive_8h.html">gsb_assistant_archive.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__account_8h.html">gsb_data_account.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="gsb__debug_8h.html">gsb_debug.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="erreur_8h.html">erreur.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="gsb__file_8h.html">gsb_file.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="gsb__form_8h.html">gsb_form.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="main_8h.html">main.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="import_8h.html">import.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="utils_8h.html">utils.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="traitement__variables_8h.html">traitement_variables.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="parametres_8h.html">parametres.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="erreur_8h.html">erreur.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="structures_8h.html">structures.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="comment">/*END_INCLUDE*/</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">/*START_STATIC*/</span>
<a name="l00059"></a>00059 <span class="keyword">static</span> <span class="keywordtype">void</span> gsb_gui_toggle_line_view_mode ( GtkRadioAction * action, GtkRadioAction *current, 
<a name="l00060"></a>00060                                      gpointer user_data );
<a name="l00061"></a>00061 <span class="keyword">static</span> gboolean gsb_gui_toggle_show_closed_accounts ( <span class="keywordtype">void</span> );
<a name="l00062"></a>00062 <span class="keyword">static</span> gboolean gsb_gui_toggle_show_form ( <span class="keywordtype">void</span> );
<a name="l00063"></a>00063 <span class="keyword">static</span> gboolean help_bugreport ( <span class="keywordtype">void</span> );
<a name="l00064"></a>00064 <span class="keyword">static</span> gboolean help_manual ( <span class="keywordtype">void</span> );
<a name="l00065"></a>00065 <span class="keyword">static</span> gboolean help_quick_start ( <span class="keywordtype">void</span> );
<a name="l00066"></a>00066 <span class="keyword">static</span> gboolean help_translation ( <span class="keywordtype">void</span> );
<a name="l00067"></a>00067 <span class="keyword">static</span> gboolean help_website ( <span class="keywordtype">void</span> );
<a name="l00068"></a>00068 <span class="keyword">static</span> <span class="keywordtype">void</span> menu_add_widget (GtkUIManager * p_uiManager, GtkWidget * p_widget, 
<a name="l00069"></a>00069                              GtkContainer * p_box) ;
<a name="l00070"></a>00070 <span class="comment">/*END_STATIC*/</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">/*START_EXTERN*/</span>
<a name="l00075"></a>00075 <span class="keyword">extern</span> GtkTreeModel * <a class="code" href="menu_8c.html#af25f8dd6dec7eb5cb22b4a710e686d29">navigation_model</a>;
<a name="l00076"></a>00076 <span class="keyword">extern</span> gsize <a class="code" href="gsb__file_8c.html#a602b7cdee2b4750d17e89e642189e6ba">nb_derniers_fichiers_ouverts</a>;
<a name="l00077"></a>00077 <span class="keyword">extern</span> gint <a class="code" href="gsb__file_8c.html#a691d56f7a427c60a7714f6bec232807b">nb_max_derniers_fichiers_ouverts</a>;
<a name="l00078"></a>00078 <span class="keyword">extern</span> gchar **<a class="code" href="gsb__file_8c.html#a29a380dfbc7b7bc62547a1c0f5d95ff4">tab_noms_derniers_fichiers_ouverts</a>;
<a name="l00079"></a>00079 <span class="keyword">extern</span> GtkWidget *<a class="code" href="accueil_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>;
<a name="l00080"></a>00080 <span class="comment">/*END_EXTERN*/</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="menu_8c.html#a148929df9268caccbe39dfef840fe42d">00083</a> gboolean <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> = FALSE;
<a name="l00084"></a><a class="code" href="menu_8c.html#aa6a3b64b294a67080fe530ae293bce63">00084</a> GtkUIManager * <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>;
<a name="l00085"></a>00085 <span class="keyword">static</span> gint recent_files_merge_id = -1, move_to_account_merge_id = -1;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="keyword">static</span> gchar * buffer = 
<a name="l00088"></a>00088 <span class="stringliteral">&quot;&lt;ui&gt;&quot;</span>
<a name="l00089"></a>00089 <span class="stringliteral">&quot;  &lt;menubar name=&#39;MenuBar&#39;&gt;&quot;</span>
<a name="l00090"></a>00090 <span class="stringliteral">&quot;    &lt;menu action=&#39;FileMenu&#39;&gt;&quot;</span>
<a name="l00091"></a>00091 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;New&#39;/&gt;&quot;</span>
<a name="l00092"></a>00092 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Open&#39;/&gt;&quot;</span>
<a name="l00093"></a>00093 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Save&#39;/&gt;&quot;</span>
<a name="l00094"></a>00094 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;SaveAs&#39;/&gt;&quot;</span>
<a name="l00095"></a>00095 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00096"></a>00096 <span class="stringliteral">&quot;      &lt;menu action=&#39;RecentFiles&#39;&gt;&quot;</span>
<a name="l00097"></a>00097 <span class="stringliteral">&quot;      &lt;/menu&gt;&quot;</span>
<a name="l00098"></a>00098 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00099"></a>00099 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ImportFile&#39;/&gt;&quot;</span>
<a name="l00100"></a>00100 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ExportFile&#39;/&gt;&quot;</span>
<a name="l00101"></a>00101 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00102"></a>00102 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;CreateArchive&#39;/&gt;&quot;</span>
<a name="l00103"></a>00103 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ExportArchive&#39;/&gt;&quot;</span>
<a name="l00104"></a>00104 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00105"></a>00105 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;DebugFile&#39;/&gt;&quot;</span>
<a name="l00106"></a>00106 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Obfuscate&#39;/&gt;&quot;</span>
<a name="l00107"></a>00107 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ObfuscateQif&#39;/&gt;&quot;</span>
<a name="l00108"></a>00108 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;DebugMode&#39;/&gt;&quot;</span>
<a name="l00109"></a>00109 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00110"></a>00110 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Close&#39;/&gt;&quot;</span>
<a name="l00111"></a>00111 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Quit&#39;/&gt;&quot;</span>
<a name="l00112"></a>00112 <span class="stringliteral">&quot;    &lt;/menu&gt;&quot;</span>
<a name="l00113"></a>00113 <span class="stringliteral">&quot;    &lt;menu action=&#39;EditMenu&#39;&gt;&quot;</span>
<a name="l00114"></a>00114 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;NewTransaction&#39;/&gt;&quot;</span>
<a name="l00115"></a>00115 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;RemoveTransaction&#39;/&gt;&quot;</span>
<a name="l00116"></a>00116 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;CloneTransaction&#39;/&gt;&quot;</span>
<a name="l00117"></a>00117 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;EditTransaction&#39;/&gt;&quot;</span>
<a name="l00118"></a>00118 <span class="stringliteral">&quot;       &lt;separator/&gt;&quot;</span>
<a name="l00119"></a>00119 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;ConvertToScheduled&#39;/&gt;&quot;</span>
<a name="l00120"></a>00120 <span class="stringliteral">&quot;       &lt;menu action=&#39;MoveToAnotherAccount&#39;&gt;&quot;</span>
<a name="l00121"></a>00121 <span class="stringliteral">&quot;       &lt;/menu&gt;&quot;</span>
<a name="l00122"></a>00122 <span class="stringliteral">&quot;       &lt;separator/&gt;&quot;</span>
<a name="l00123"></a>00123 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;NewAccount&#39;/&gt;&quot;</span>
<a name="l00124"></a>00124 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;RemoveAccount&#39;/&gt;&quot;</span>
<a name="l00125"></a>00125 <span class="stringliteral">&quot;       &lt;separator/&gt;&quot;</span>
<a name="l00126"></a>00126 <span class="stringliteral">&quot;       &lt;menuitem action=&#39;Preferences&#39;/&gt;&quot;</span>
<a name="l00127"></a>00127 <span class="stringliteral">&quot;    &lt;/menu&gt;&quot;</span>
<a name="l00128"></a>00128 <span class="stringliteral">&quot;    &lt;menu action=&#39;ViewMenu&#39;&gt;&quot;</span>
<a name="l00129"></a>00129 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowTransactionForm&#39;/&gt;&quot;</span>
<a name="l00130"></a>00130 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowReconciled&#39;/&gt;&quot;</span>
<a name="l00131"></a>00131 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowArchived&#39;/&gt;&quot;</span>
<a name="l00132"></a>00132 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowClosed&#39;/&gt;&quot;</span>
<a name="l00133"></a>00133 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00134"></a>00134 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowOneLine&#39;/&gt;&quot;</span>
<a name="l00135"></a>00135 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowTwoLines&#39;/&gt;&quot;</span>
<a name="l00136"></a>00136 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowThreeLines&#39;/&gt;&quot;</span>
<a name="l00137"></a>00137 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ShowFourLines&#39;/&gt;&quot;</span>
<a name="l00138"></a>00138 <span class="stringliteral">&quot;    &lt;/menu&gt;&quot;</span>
<a name="l00139"></a>00139 <span class="stringliteral">&quot;    &lt;menu action=&#39;HelpMenu&#39;&gt;&quot;</span>
<a name="l00140"></a>00140 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Manual&#39;/&gt;&quot;</span>
<a name="l00141"></a>00141 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;QuickStart&#39;/&gt;&quot;</span>
<a name="l00142"></a>00142 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Translation&#39;/&gt;&quot;</span>
<a name="l00143"></a>00143 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;About&#39;/&gt;&quot;</span>
<a name="l00144"></a>00144 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00145"></a>00145 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;GrisbiWebsite&#39;/&gt;&quot;</span>
<a name="l00146"></a>00146 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;ReportBug&#39;/&gt;&quot;</span>
<a name="l00147"></a>00147 <span class="stringliteral">&quot;      &lt;separator/&gt;&quot;</span>
<a name="l00148"></a>00148 <span class="stringliteral">&quot;      &lt;menuitem action=&#39;Tip&#39;/&gt;&quot;</span>
<a name="l00149"></a>00149 <span class="stringliteral">&quot;    &lt;/menu&gt;&quot;</span>
<a name="l00150"></a>00150 <span class="stringliteral">&quot;  &lt;/menubar&gt;&quot;</span>
<a name="l00151"></a>00151 <span class="stringliteral">&quot;&lt;/ui&gt;&quot;</span>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="keyword">static</span> <span class="keywordtype">void</span> menu_add_widget (GtkUIManager * p_uiManager, GtkWidget * p_widget, 
<a name="l00155"></a>00155                              GtkContainer * p_box) 
<a name="l00156"></a>00156 { 
<a name="l00157"></a>00157     gtk_box_pack_start (GTK_BOX (p_box), p_widget, FALSE, FALSE, 0);
<a name="l00158"></a>00158     gtk_widget_show (p_widget); 
<a name="l00159"></a>00159     <span class="keywordflow">return</span>; 
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="menu_8h.html#a797e59b4900aa4af71181ca9b7145aa4">00164</a> GtkWidget *<a class="code" href="menu_8c.html#a797e59b4900aa4af71181ca9b7145aa4">init_menus</a> ( GtkWidget *vbox )
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166     GtkWidget * barre_menu;
<a name="l00167"></a>00167     GtkActionGroup * action_group;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="comment">/* remind of GtkActionEntry : name, stock_id, label, accelerator, tooltip, callback */</span>
<a name="l00170"></a>00170     GtkActionEntry entries[] = {
<a name="l00171"></a>00171         { <span class="stringliteral">&quot;FileMenu&quot;</span>,           NULL,                   _(<span class="stringliteral">&quot;_File&quot;</span>),
<a name="l00172"></a>00172           NULL,                 NULL,                   G_CALLBACK( NULL ) },
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         { <span class="stringliteral">&quot;New&quot;</span>,                GTK_STOCK_NEW,          _(<span class="stringliteral">&quot;_New account file...&quot;</span>),
<a name="l00175"></a>00175           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="gsb__file_8c.html#a35c7bcb0049be8ba81b58621f30aeaa4">gsb_file_new</a> ) },
<a name="l00176"></a>00176 
<a name="l00177"></a>00177         { <span class="stringliteral">&quot;Open&quot;</span>,               GTK_STOCK_OPEN,         _(<span class="stringliteral">&quot;_Open...&quot;</span>),
<a name="l00178"></a>00178           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="gsb__file_8c.html#ae6bf4262fe73b7727f10eddb0c835b73">gsb_file_open_menu</a> ) },
<a name="l00179"></a>00179 
<a name="l00180"></a>00180         { <span class="stringliteral">&quot;RecentFiles&quot;</span>,        NULL,                   _(<span class="stringliteral">&quot;_Recently opened files&quot;</span>),
<a name="l00181"></a>00181           NULL,                 NULL,                   G_CALLBACK( NULL ) },
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         { <span class="stringliteral">&quot;Save&quot;</span>,               GTK_STOCK_SAVE,         _(<span class="stringliteral">&quot;_Save&quot;</span>),
<a name="l00184"></a>00184           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="gsb__file_8c.html#a986804bbb7d965c1f15c325de610a7ef">gsb_file_save</a> ) },
<a name="l00185"></a>00185 
<a name="l00186"></a>00186         { <span class="stringliteral">&quot;SaveAs&quot;</span>,             GTK_STOCK_SAVE_AS,      _(<span class="stringliteral">&quot;_Save as...&quot;</span>),
<a name="l00187"></a>00187           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="gsb__file_8c.html#ac88aac4aa8b7ad7c91d5703b36c08eed">gsb_file_save_as</a> ) },       
<a name="l00188"></a>00188 
<a name="l00189"></a>00189         { <span class="stringliteral">&quot;ImportFile&quot;</span>,         GTK_STOCK_CONVERT,      _(<span class="stringliteral">&quot;_Import file...&quot;</span>),
<a name="l00190"></a>00190           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="import_8c.html#a109c976310f1373efb8fdb52b3ee4263">importer_fichier</a> ) },
<a name="l00191"></a>00191 
<a name="l00192"></a>00192         { <span class="stringliteral">&quot;ExportFile&quot;</span>,         GTK_STOCK_CONVERT,      _(<span class="stringliteral">&quot;_Export accounts as QIF/CSV file...&quot;</span>),
<a name="l00193"></a>00193           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="export_8c.html#a9aac8675a6963d748b4c566cd5a8912c">export_accounts</a> ) },
<a name="l00194"></a>00194 
<a name="l00195"></a>00195         { <span class="stringliteral">&quot;CreateArchive&quot;</span>,      GTK_STOCK_CLEAR,        _(<span class="stringliteral">&quot;Archive transactions...&quot;</span>),
<a name="l00196"></a>00196           NULL,                 NULL,                   G_CALLBACK(<a class="code" href="gsb__assistant__archive_8c.html#a57e51811453ac3de14dd07bfa3b752e2">gsb_assistant_archive_run_by_menu</a>) },
<a name="l00197"></a>00197 
<a name="l00198"></a>00198         { <span class="stringliteral">&quot;ExportArchive&quot;</span>,      GTK_STOCK_HARDDISK,     _(<span class="stringliteral">&quot;_Export an archive as GSB/QIF/CSV file...&quot;</span>),
<a name="l00199"></a>00199           NULL,                 NULL,                   G_CALLBACK(<a class="code" href="gsb__assistant__archive__export_8c.html#a40ac4dec2f544da685d1013e9d3d84bb">gsb_assistant_archive_export_run</a>) },
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         { <span class="stringliteral">&quot;DebugFile&quot;</span>,          GTK_STOCK_FIND,         _(<span class="stringliteral">&quot;_Debug account file...&quot;</span>),
<a name="l00202"></a>00202           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__debug_8c.html#a0f8015596839d99fcbdf93c38bc8cf34">gsb_debug</a> ) },
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         { <span class="stringliteral">&quot;Obfuscate&quot;</span>,          GTK_STOCK_FIND,         _(<span class="stringliteral">&quot;_Obfuscate account file...&quot;</span>),
<a name="l00205"></a>00205           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="file__obfuscate_8c.html#ab4c30cf882f9fd42b304325a0501e3b1">file_obfuscate_run</a> ) },
<a name="l00206"></a>00206 
<a name="l00207"></a>00207         { <span class="stringliteral">&quot;ObfuscateQif&quot;</span>,       GTK_STOCK_FIND,         _(<span class="stringliteral">&quot;_Obfuscate QIF file...&quot;</span>),
<a name="l00208"></a>00208           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="file__obfuscate__qif_8c.html#a19232ad6d6ddf92d4640c3a897ebba9b">file_obfuscate_qif_run</a> ) },
<a name="l00209"></a>00209 
<a name="l00210"></a>00210         { <span class="stringliteral">&quot;Close&quot;</span>,              GTK_STOCK_CLOSE,        _(<span class="stringliteral">&quot;_Close&quot;</span>),
<a name="l00211"></a>00211           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="gsb__file_8c.html#a74157bdabf438bfbda5a6040a5c1cc15">gsb_file_close</a> ) },
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         { <span class="stringliteral">&quot;Quit&quot;</span>,               GTK_STOCK_QUIT,         _(<span class="stringliteral">&quot;_Quit&quot;</span>),
<a name="l00214"></a>00214           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="main_8c.html#a4d6c21c259d467499784d537bccb61e5">gsb_grisbi_close</a> ) },
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         { <span class="stringliteral">&quot;EditMenu&quot;</span>,           NULL,                   _(<span class="stringliteral">&quot;_Edit&quot;</span>),
<a name="l00217"></a>00217           NULL,                 NULL,                   G_CALLBACK( NULL ) },
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         { <span class="stringliteral">&quot;NewTransaction&quot;</span>,     GTK_STOCK_NEW,          _(<span class="stringliteral">&quot;_New transaction&quot;</span>),  
<a name="l00220"></a>00220           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__transactions__list_8c.html#a2f2bb8bf01af048e33c47d43c8370a21">new_transaction</a> ) },
<a name="l00221"></a>00221 
<a name="l00222"></a>00222         { <span class="stringliteral">&quot;RemoveTransaction&quot;</span>,  GTK_STOCK_DELETE,       _(<span class="stringliteral">&quot;_Remove transaction&quot;</span>),       
<a name="l00223"></a>00223           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__transactions__list_8c.html#aa52082e3faa52c7be3aa7d5dd41d0731">remove_transaction</a> ) },
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         { <span class="stringliteral">&quot;CloneTransaction&quot;</span>,   GTK_STOCK_COPY,         _(<span class="stringliteral">&quot;_Clone transaction&quot;</span>),        
<a name="l00226"></a>00226           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__transactions__list_8c.html#a8da0807401b34e59349e9534ed0e9cd9">clone_selected_transaction</a> ) },
<a name="l00227"></a>00227 
<a name="l00228"></a>00228         { <span class="stringliteral">&quot;EditTransaction&quot;</span>,    GTK_STOCK_PROPERTIES,   _(<span class="stringliteral">&quot;_Edit transaction&quot;</span>), 
<a name="l00229"></a>00229           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__transactions__list_8c.html#a78ae21515e884855e82af687571bb3c2">gsb_transactions_list_edit_current_transaction</a> ) },
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         { <span class="stringliteral">&quot;ConvertToScheduled&quot;</span>, GTK_STOCK_CONVERT,      _(<span class="stringliteral">&quot;Convert to _scheduled transaction&quot;</span>),
<a name="l00232"></a>00232           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="gsb__transactions__list_8c.html#a57f2d9faad61b1154270e444656bd275">schedule_selected_transaction</a> ) },
<a name="l00233"></a>00233 
<a name="l00234"></a>00234         { <span class="stringliteral">&quot;MoveToAnotherAccount&quot;</span>,NULL,                  _(<span class="stringliteral">&quot;_Move transaction to another account&quot;</span>),
<a name="l00235"></a>00235           NULL,                 NULL,                   G_CALLBACK( NULL ) },
<a name="l00236"></a>00236 
<a name="l00237"></a>00237         { <span class="stringliteral">&quot;Preferences&quot;</span>,        GTK_STOCK_PREFERENCES,  _(<span class="stringliteral">&quot;_Preferences&quot;</span>),
<a name="l00238"></a>00238           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="parametres_8c.html#a11ca21a8e0c2101e89252e4b391530bf">preferences</a> ) },
<a name="l00239"></a>00239 
<a name="l00240"></a>00240         <span class="comment">/* View menu */</span>
<a name="l00241"></a>00241         { <span class="stringliteral">&quot;ViewMenu&quot;</span>,           NULL,                   _(<span class="stringliteral">&quot;_View&quot;</span>),
<a name="l00242"></a>00242           NULL,                 NULL,                   G_CALLBACK( NULL ) },
<a name="l00243"></a>00243 
<a name="l00244"></a>00244         { <span class="stringliteral">&quot;NewAccount&quot;</span>,         GTK_STOCK_NEW,          _(<span class="stringliteral">&quot;_New account&quot;</span>),
<a name="l00245"></a>00245           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__assistant__account_8c.html#a8813f2fd12b26961beca70c591b499e1">gsb_assistant_account_run</a> ) },
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         { <span class="stringliteral">&quot;RemoveAccount&quot;</span>,      GTK_STOCK_DELETE,       _(<span class="stringliteral">&quot;_Remove current account&quot;</span>),
<a name="l00248"></a>00248           <span class="stringliteral">&quot;&quot;</span>,                   NULL,                   G_CALLBACK( <a class="code" href="gsb__account_8c.html#a7400463771b2b5905b261cb177c2524e">gsb_account_delete</a> ) },
<a name="l00249"></a>00249 
<a name="l00250"></a>00250         <span class="comment">/* Help Menu */</span>
<a name="l00251"></a>00251         { <span class="stringliteral">&quot;HelpMenu&quot;</span>,           NULL,                   _(<span class="stringliteral">&quot;_Help&quot;</span>),
<a name="l00252"></a>00252           NULL,                 NULL,                   G_CALLBACK( NULL ) },
<a name="l00253"></a>00253 
<a name="l00254"></a>00254         { <span class="stringliteral">&quot;Manual&quot;</span>,             GTK_STOCK_HELP,         _(<span class="stringliteral">&quot;_Manual&quot;</span>),
<a name="l00255"></a>00255           NULL,                 NULL,                   G_CALLBACK( help_manual ) },
<a name="l00256"></a>00256 
<a name="l00257"></a>00257         { <span class="stringliteral">&quot;QuickStart&quot;</span>,         NULL,                   _(<span class="stringliteral">&quot;_Quick start&quot;</span>),
<a name="l00258"></a>00258           NULL,                 NULL,                   G_CALLBACK( help_quick_start ) },
<a name="l00259"></a>00259 
<a name="l00260"></a>00260         { <span class="stringliteral">&quot;Translation&quot;</span>,        NULL,                   _(<span class="stringliteral">&quot;_Translation&quot;</span>),
<a name="l00261"></a>00261           NULL,                 NULL,                   G_CALLBACK( help_translation ) },
<a name="l00262"></a>00262 
<a name="l00263"></a>00263         { <span class="stringliteral">&quot;About&quot;</span>,              GTK_STOCK_ABOUT,        _(<span class="stringliteral">&quot;_About Grisbi...&quot;</span>),
<a name="l00264"></a>00264           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="help_8c.html#a8236087b365d84362a2c5431468d1ba3">a_propos</a> ) },
<a name="l00265"></a>00265 
<a name="l00266"></a>00266         { <span class="stringliteral">&quot;GrisbiWebsite&quot;</span>,      NULL,                   _(<span class="stringliteral">&quot;_Grisbi website&quot;</span>),
<a name="l00267"></a>00267           NULL,                 NULL,                   G_CALLBACK( help_website ) },
<a name="l00268"></a>00268 
<a name="l00269"></a>00269         { <span class="stringliteral">&quot;ReportBug&quot;</span>,          NULL,                   _(<span class="stringliteral">&quot;_Report a bug&quot;</span>),
<a name="l00270"></a>00270           NULL,                 NULL,                   G_CALLBACK( help_bugreport ) },
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         { <span class="stringliteral">&quot;Tip&quot;</span>,                GTK_STOCK_DIALOG_INFO,  _(<span class="stringliteral">&quot;_Tip of the day&quot;</span>),
<a name="l00273"></a>00273           NULL,                 NULL,                   G_CALLBACK( <a class="code" href="tip_8c.html#a52290240d6d8d2a09291865bab161a6d">force_display_tip</a> ) },
<a name="l00274"></a>00274     };
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     GtkRadioActionEntry radio_entries[] = {
<a name="l00277"></a>00277         { <span class="stringliteral">&quot;ShowOneLine&quot;</span>,        NULL,                   _(<span class="stringliteral">&quot;Show _one line per transaction&quot;</span>),
<a name="l00278"></a>00278           NULL,                 NULL,                   <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afad1b37b5a85fad14be2069ae9b0789602">ONE_LINE_PER_TRANSACTION</a> },
<a name="l00279"></a>00279 
<a name="l00280"></a>00280         { <span class="stringliteral">&quot;ShowTwoLines&quot;</span>,       NULL,                   _(<span class="stringliteral">&quot;Show _two lines per transaction&quot;</span>),
<a name="l00281"></a>00281           NULL,                 NULL,                   <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afa8eda7ab74da19a27e5fdad7a2fc89f5f">TWO_LINES_PER_TRANSACTION</a> },
<a name="l00282"></a>00282 
<a name="l00283"></a>00283         { <span class="stringliteral">&quot;ShowThreeLines&quot;</span>,     NULL,                   _(<span class="stringliteral">&quot;Show _three lines per transaction&quot;</span>),
<a name="l00284"></a>00284           NULL,                 NULL,                   <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afafdf1c38795a05970d769285014ea8a15">THREE_LINES_PER_TRANSACTION</a> },
<a name="l00285"></a>00285 
<a name="l00286"></a>00286         { <span class="stringliteral">&quot;ShowFourLines&quot;</span>,      NULL,                   _(<span class="stringliteral">&quot;Show _four lines per transaction&quot;</span>),
<a name="l00287"></a>00287           NULL,                 NULL,                   <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afa1380a41d0a0688980da82d64763ff6d3">FOUR_LINES_PER_TRANSACTION</a> },
<a name="l00288"></a>00288     }; 
<a name="l00289"></a>00289     GtkToggleActionEntry toggle_entries[] = {
<a name="l00290"></a>00290         { <span class="stringliteral">&quot;DebugMode&quot;</span>,          NULL,                   _(<span class="stringliteral">&quot;Debug mode&quot;</span>),
<a name="l00291"></a>00291           NULL,                 NULL,                   G_CALLBACK(<a class="code" href="erreur_8c.html#a8321053275e249fd34c4890aec24ab1e">gsb_debug_start_log</a> ),
<a name="l00292"></a>00292           <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a34dce90a505d952d0fad5ec91297cd9a">debug_mode</a> },
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         { <span class="stringliteral">&quot;ShowTransactionForm&quot;</span>,NULL,                   _(<span class="stringliteral">&quot;Show transaction _form&quot;</span>),
<a name="l00295"></a>00295           NULL,                 NULL,                   G_CALLBACK ( gsb_gui_toggle_show_form ), 
<a name="l00296"></a>00296           <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a87c3eec6adcbac2891ad3f762802fc7f">formulaire_toujours_affiche</a> },
<a name="l00297"></a>00297         { <span class="stringliteral">&quot;ShowReconciled&quot;</span>,     NULL,                   _(<span class="stringliteral">&quot;Show _reconciled&quot;</span>),
<a name="l00298"></a>00298           <span class="stringliteral">&quot;&lt;Alt&gt;R&quot;</span>, 
<a name="l00299"></a>00299           NULL,                 G_CALLBACK ( <a class="code" href="menu_8c.html#aeb017cf19bed8e724d46231072994de9">gsb_gui_toggle_show_reconciled</a> ),
<a name="l00300"></a>00300           0 },
<a name="l00301"></a>00301         { <span class="stringliteral">&quot;ShowArchived&quot;</span>,       NULL,                   _(<span class="stringliteral">&quot;Show _lines archives&quot;</span>),
<a name="l00302"></a>00302           <span class="stringliteral">&quot;&lt;Alt&gt;L&quot;</span>, 
<a name="l00303"></a>00303           NULL,                 G_CALLBACK ( <a class="code" href="menu_8c.html#aa2af14ac64481c25621aef9c3e43eea5">gsb_gui_toggle_show_archived</a> ),
<a name="l00304"></a>00304           0 },
<a name="l00305"></a>00305         { <span class="stringliteral">&quot;ShowClosed&quot;</span>,         NULL,                   _(<span class="stringliteral">&quot;Show _closed accounts&quot;</span>),
<a name="l00306"></a>00306           NULL,                 NULL,                   G_CALLBACK ( gsb_gui_toggle_show_closed_accounts ),
<a name="l00307"></a>00307           <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a2bc8b82e44468eaed090b64ef81956f1">show_closed_accounts</a> } 
<a name="l00308"></a>00308     };
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a> = gtk_ui_manager_new ();
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     g_signal_connect ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, <span class="stringliteral">&quot;add_widget&quot;</span>, G_CALLBACK( menu_add_widget ), vbox );
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     action_group = gtk_action_group_new ( <span class="stringliteral">&quot;Group&quot;</span> );
<a name="l00315"></a>00315     gtk_action_group_add_actions ( action_group, entries, G_N_ELEMENTS( entries ), NULL );
<a name="l00316"></a>00316     gtk_action_group_add_radio_actions ( action_group, radio_entries, 
<a name="l00317"></a>00317                                          G_N_ELEMENTS( radio_entries ), 
<a name="l00318"></a>00318                                          -1, G_CALLBACK(gsb_gui_toggle_line_view_mode), 
<a name="l00319"></a>00319                                          NULL );
<a name="l00320"></a>00320     gtk_action_group_add_toggle_actions ( action_group, toggle_entries, 
<a name="l00321"></a>00321                                           G_N_ELEMENTS( toggle_entries ), 
<a name="l00322"></a>00322                                           NULL );
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     gtk_ui_manager_insert_action_group ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, action_group, 0 );
<a name="l00325"></a>00325     gtk_ui_manager_add_ui_from_string ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, buffer, strlen(buffer), NULL );
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     gtk_window_add_accel_group (GTK_WINDOW (<a class="code" href="accueil_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>),
<a name="l00328"></a>00328                                 gtk_ui_manager_get_accel_group (<a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>));
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     barre_menu = gtk_ui_manager_get_widget ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, <span class="stringliteral">&quot;/menubar&quot;</span> );
<a name="l00331"></a>00331  
<a name="l00332"></a>00332     <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( <span class="stringliteral">&quot;EditMenu&quot;</span>, <span class="stringliteral">&quot;NewTransaction&quot;</span>, NULL, FALSE );
<a name="l00333"></a>00333     <a class="code" href="menu_8c.html#a2cd0fa9a87d28146f743c30d75c3ee00">gsb_menu_transaction_operations_set_sensitive</a> ( FALSE );
<a name="l00334"></a>00334 
<a name="l00335"></a>00335     <span class="keywordflow">return</span> barre_menu;
<a name="l00336"></a>00336 }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 
<a name="l00343"></a><a class="code" href="menu_8h.html#a31e1f092a06fca742e15442a4fd44313">00343</a> <span class="keywordtype">void</span> <a class="code" href="menu_8c.html#a31e1f092a06fca742e15442a4fd44313">efface_derniers_fichiers_ouverts</a> ( <span class="keywordtype">void</span> )
<a name="l00344"></a>00344 {
<a name="l00345"></a>00345     gtk_ui_manager_remove_ui ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, recent_files_merge_id );
<a name="l00346"></a>00346 }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 
<a name="l00353"></a><a class="code" href="menu_8h.html#a7b48dc605d99995e31545dc3bdad1d85">00353</a> gboolean <a class="code" href="menu_8c.html#a7b48dc605d99995e31545dc3bdad1d85">affiche_derniers_fichiers_ouverts</a> ( <span class="keywordtype">void</span> )
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355     gint i;
<a name="l00356"></a>00356     GtkActionGroup * action_group;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     <a class="code" href="menu_8c.html#a31e1f092a06fca742e15442a4fd44313">efface_derniers_fichiers_ouverts</a> ();
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     <span class="keywordflow">if</span> ( <a class="code" href="gsb__file_8c.html#a602b7cdee2b4750d17e89e642189e6ba">nb_derniers_fichiers_ouverts</a> &gt; <a class="code" href="gsb__file_8c.html#a691d56f7a427c60a7714f6bec232807b">nb_max_derniers_fichiers_ouverts</a> )
<a name="l00361"></a>00361     {
<a name="l00362"></a>00362         <a class="code" href="gsb__file_8c.html#a602b7cdee2b4750d17e89e642189e6ba">nb_derniers_fichiers_ouverts</a> = <a class="code" href="gsb__file_8c.html#a691d56f7a427c60a7714f6bec232807b">nb_max_derniers_fichiers_ouverts</a>;
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364         
<a name="l00365"></a>00365     <span class="keywordflow">if</span> ( ! <a class="code" href="gsb__file_8c.html#a602b7cdee2b4750d17e89e642189e6ba">nb_derniers_fichiers_ouverts</a> || ! <a class="code" href="gsb__file_8c.html#a691d56f7a427c60a7714f6bec232807b">nb_max_derniers_fichiers_ouverts</a> )
<a name="l00366"></a>00366     {
<a name="l00367"></a>00367         <span class="keywordflow">return</span> FALSE;
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     action_group = gtk_action_group_new ( <span class="stringliteral">&quot;Group2&quot;</span> );
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <span class="keywordflow">for</span> ( i=0 ; i&lt;<a class="code" href="gsb__file_8c.html#a602b7cdee2b4750d17e89e642189e6ba">nb_derniers_fichiers_ouverts</a> ; i++ )
<a name="l00373"></a>00373     {
<a name="l00374"></a>00374         gchar * tmp_name = g_strdup_printf ( <span class="stringliteral">&quot;LastFile%d&quot;</span>, i );
<a name="l00375"></a>00375         GtkAction * action = gtk_action_new ( tmp_name, 
<a name="l00376"></a>00376                                               <a class="code" href="gsb__file_8c.html#a29a380dfbc7b7bc62547a1c0f5d95ff4">tab_noms_derniers_fichiers_ouverts</a>[i], 
<a name="l00377"></a>00377                                               <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );
<a name="l00378"></a>00378         g_free ( tmp_name );
<a name="l00379"></a>00379         g_signal_connect ( action, <span class="stringliteral">&quot;activate&quot;</span>, G_CALLBACK(<a class="code" href="gsb__file_8c.html#ae81c7e970f67f50db0660466c2a05ac3">gsb_file_open_direct_menu</a>), 
<a name="l00380"></a>00380                            GINT_TO_POINTER(i) );
<a name="l00381"></a>00381         gtk_action_group_add_action ( action_group, action );
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     gtk_ui_manager_insert_action_group ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, action_group, 1 );
<a name="l00385"></a>00385 
<a name="l00386"></a>00386     recent_files_merge_id = gtk_ui_manager_new_merge_id ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a> );
<a name="l00387"></a>00387 
<a name="l00388"></a>00388     <span class="keywordflow">for</span> ( i=0 ; i&lt;nb_derniers_fichiers_ouverts ; i++ )
<a name="l00389"></a>00389     {
<a name="l00390"></a>00390         gchar * tmp_name = g_strdup_printf ( <span class="stringliteral">&quot;LastFile%d&quot;</span>, i );
<a name="l00391"></a>00391         gchar * tmp_label = g_strdup_printf ( <span class="stringliteral">&quot;_%d LastFile%d&quot;</span>, i, i );
<a name="l00392"></a>00392 
<a name="l00393"></a>00393         gtk_ui_manager_add_ui ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, recent_files_merge_id, 
<a name="l00394"></a>00394                                 <span class="stringliteral">&quot;/MenuBar/FileMenu/RecentFiles/&quot;</span>,
<a name="l00395"></a>00395                                 tmp_label, tmp_name, GTK_UI_MANAGER_MENUITEM, FALSE );
<a name="l00396"></a>00396         g_free ( tmp_name );
<a name="l00397"></a>00397         g_free ( tmp_label );
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399     gtk_ui_manager_ensure_update ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a> );
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     <span class="keywordflow">return</span> FALSE;
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 
<a name="l00412"></a>00412 gboolean help_manual ( <span class="keywordtype">void</span> )
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414     gchar *lang = _(<span class="stringliteral">&quot;en&quot;</span>);
<a name="l00415"></a>00415     gchar *string;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <span class="keywordtype">string</span> = g_strconcat ( HELP_PATH, <span class="stringliteral">&quot;/&quot;</span>, lang, <span class="stringliteral">&quot;/manual.html&quot;</span>, NULL );
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="keywordflow">if</span> (g_file_test ( <span class="keywordtype">string</span>,
<a name="l00420"></a>00420                       G_FILE_TEST_EXISTS ))
<a name="l00421"></a>00421     {
<a name="l00422"></a>00422         <a class="code" href="utils_8c.html#ac95e13303adfcd6b449afd319bc040ab">lance_navigateur_web</a> (<span class="keywordtype">string</span>);
<a name="l00423"></a>00423         g_free (<span class="keywordtype">string</span>);
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425     <span class="keywordflow">else</span>
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427         g_free (<span class="keywordtype">string</span>);
<a name="l00428"></a>00428         <span class="keywordtype">string</span> = g_strconcat ( HELP_PATH, <span class="stringliteral">&quot;/&quot;</span>, lang, <span class="stringliteral">&quot;/grisbi-manuel.html&quot;</span>, NULL );
<a name="l00429"></a>00429         <a class="code" href="utils_8c.html#ac95e13303adfcd6b449afd319bc040ab">lance_navigateur_web</a> (<span class="keywordtype">string</span>);
<a name="l00430"></a>00430         g_free (<span class="keywordtype">string</span>);
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     <span class="keywordflow">return</span> FALSE;
<a name="l00434"></a>00434 }
<a name="l00435"></a>00435 
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 
<a name="l00444"></a>00444 gboolean help_quick_start ( <span class="keywordtype">void</span> )
<a name="l00445"></a>00445 {
<a name="l00446"></a>00446     gchar *lang = _(<span class="stringliteral">&quot;en&quot;</span>);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     gchar* tmpstr = g_strconcat ( HELP_PATH, <span class="stringliteral">&quot;/&quot;</span>, lang, <span class="stringliteral">&quot;/quickstart.html&quot;</span>, 
<a name="l00449"></a>00449                                          NULL );
<a name="l00450"></a>00450     <a class="code" href="utils_8c.html#ac95e13303adfcd6b449afd319bc040ab">lance_navigateur_web</a> ( tmpstr );
<a name="l00451"></a>00451     g_free ( tmpstr );
<a name="l00452"></a>00452 
<a name="l00453"></a>00453     <span class="keywordflow">return</span> FALSE;
<a name="l00454"></a>00454 }
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 
<a name="l00464"></a>00464 gboolean help_translation ( <span class="keywordtype">void</span> )
<a name="l00465"></a>00465 {
<a name="l00466"></a>00466     gchar *lang = _(<span class="stringliteral">&quot;en&quot;</span>);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     gchar* tmpstr = g_strconcat ( HELP_PATH, <span class="stringliteral">&quot;/&quot;</span>, lang, <span class="stringliteral">&quot;/translation.html&quot;</span>, 
<a name="l00469"></a>00469                                          NULL );
<a name="l00470"></a>00470     <a class="code" href="utils_8c.html#ac95e13303adfcd6b449afd319bc040ab">lance_navigateur_web</a> ( tmpstr );
<a name="l00471"></a>00471     g_free ( tmpstr );
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     <span class="keywordflow">return</span> FALSE;
<a name="l00474"></a>00474 }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 
<a name="l00483"></a>00483 gboolean help_website ( <span class="keywordtype">void</span> )
<a name="l00484"></a>00484 {
<a name="l00485"></a>00485     <a class="code" href="utils_8c.html#ac95e13303adfcd6b449afd319bc040ab">lance_navigateur_web</a> ( <span class="stringliteral">&quot;http://www.grisbi.org/&quot;</span> );
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">return</span> FALSE;
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 
<a name="l00491"></a>00491 
<a name="l00497"></a>00497 gboolean help_bugreport ( <span class="keywordtype">void</span> )
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499     <a class="code" href="utils_8c.html#ac95e13303adfcd6b449afd319bc040ab">lance_navigateur_web</a> ( <span class="stringliteral">&quot;http://www.grisbi.org/bugtracking/&quot;</span> );
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <span class="keywordflow">return</span> FALSE;
<a name="l00502"></a>00502 }
<a name="l00503"></a>00503 
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 
<a name="l00516"></a><a class="code" href="menu_8h.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">00516</a> gchar * <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( gchar * menu, gchar * submenu, gchar * subsubmenu )
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518   <span class="keywordflow">if</span> ( subsubmenu )
<a name="l00519"></a>00519     <span class="keywordflow">return</span> g_strconcat ( <span class="stringliteral">&quot;/MenuBar/&quot;</span>, menu, <span class="stringliteral">&quot;/&quot;</span>, submenu, <span class="stringliteral">&quot;/&quot;</span>, subsubmenu, NULL );
<a name="l00520"></a>00520   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( submenu )
<a name="l00521"></a>00521     <span class="keywordflow">return</span> g_strconcat ( <span class="stringliteral">&quot;/MenuBar/&quot;</span>, menu, <span class="stringliteral">&quot;/&quot;</span>, submenu, NULL );
<a name="l00522"></a>00522   <span class="keywordflow">else</span>
<a name="l00523"></a>00523     <span class="keywordflow">return</span> g_strconcat ( <span class="stringliteral">&quot;/MenuBar/&quot;</span>, menu, NULL );
<a name="l00524"></a>00524 }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 
<a name="l00539"></a><a class="code" href="menu_8h.html#aa52fc499e8216c49fa496f24c46eb811">00539</a> gboolean <a class="code" href="menu_8c.html#aa52fc499e8216c49fa496f24c46eb811">gsb_gui_sensitive_menu_item_from_string</a> ( gchar * item_name, gboolean state )
<a name="l00540"></a>00540 {
<a name="l00541"></a>00541     GtkWidget * widget;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     widget = gtk_ui_manager_get_widget ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, item_name );
<a name="l00544"></a>00544     
<a name="l00545"></a>00545     <span class="keywordflow">if</span> ( widget &amp;&amp; GTK_IS_WIDGET(widget) )
<a name="l00546"></a>00546     {
<a name="l00547"></a>00547         gtk_widget_set_sensitive ( widget, state );
<a name="l00548"></a>00548         <span class="keywordflow">return</span> TRUE;
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550     <span class="keywordflow">return</span> FALSE;
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553 
<a name="l00554"></a>00554 
<a name="l00565"></a><a class="code" href="menu_8h.html#ad3557028823b3fd30c4d7367b698d2e2">00565</a> gboolean <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( gchar * root_menu_name, gchar * submenu_name,
<a name="l00566"></a>00566                                        gchar * subsubmenu_name, gboolean state )
<a name="l00567"></a>00567 {
<a name="l00568"></a>00568     gchar* tmpstr = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( root_menu_name, submenu_name, subsubmenu_name );
<a name="l00569"></a>00569     gboolean result = <a class="code" href="menu_8c.html#aa52fc499e8216c49fa496f24c46eb811">gsb_gui_sensitive_menu_item_from_string</a> ( tmpstr, state );
<a name="l00570"></a>00570     g_free ( tmpstr );
<a name="l00571"></a>00571     <span class="keywordflow">return</span> result;
<a name="l00572"></a>00572 }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 
<a name="l00579"></a>00579 <span class="keywordtype">void</span> gsb_gui_toggle_line_view_mode ( GtkRadioAction * action, GtkRadioAction *current, 
<a name="l00580"></a>00580                                      gpointer user_data )
<a name="l00581"></a>00581 {
<a name="l00582"></a>00582     <span class="comment">/* FIXME benj: ugly but I cannot find a way to block this ... */</span>
<a name="l00583"></a>00583     <span class="keywordflow">if</span> ( <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> ) <span class="keywordflow">return</span>;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <span class="keywordflow">switch</span> ( gtk_radio_action_get_current_value(current) )
<a name="l00586"></a>00586     {
<a name="l00587"></a>00587         <span class="keywordflow">case</span> <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afad1b37b5a85fad14be2069ae9b0789602">ONE_LINE_PER_TRANSACTION</a>:
<a name="l00588"></a>00588             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> (1);
<a name="l00589"></a>00589             <span class="keywordflow">break</span>;
<a name="l00590"></a>00590         <span class="keywordflow">case</span> <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afa8eda7ab74da19a27e5fdad7a2fc89f5f">TWO_LINES_PER_TRANSACTION</a>:
<a name="l00591"></a>00591             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> (2);
<a name="l00592"></a>00592             <span class="keywordflow">break</span>;
<a name="l00593"></a>00593         <span class="keywordflow">case</span> <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afafdf1c38795a05970d769285014ea8a15">THREE_LINES_PER_TRANSACTION</a>:
<a name="l00594"></a>00594             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> (3);
<a name="l00595"></a>00595             <span class="keywordflow">break</span>;
<a name="l00596"></a>00596         <span class="keywordflow">case</span> <a class="code" href="menu_8h.html#a4fb19928221d9919a926398aae6081afa1380a41d0a0688980da82d64763ff6d3">FOUR_LINES_PER_TRANSACTION</a>:
<a name="l00597"></a>00597             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> (4);
<a name="l00598"></a>00598             <span class="keywordflow">break</span>;
<a name="l00599"></a>00599     }
<a name="l00600"></a>00600 }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 
<a name="l00609"></a>00609 gboolean gsb_gui_toggle_show_form ( <span class="keywordtype">void</span> )
<a name="l00610"></a>00610 {
<a name="l00611"></a>00611     <a class="code" href="erreur_8h.html#a17bfffc4306bc76edd79e060a8947dc4">devel_debug</a> (NULL);
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     <span class="comment">/* FIXME benj: ugly but I cannot find a way to block this ... */</span>
<a name="l00614"></a>00614     <span class="keywordflow">if</span> ( <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> ) <span class="keywordflow">return</span> FALSE;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616     <a class="code" href="gsb__form_8c.html#a1b98eb9782332c6253864efa0dfce2ac">gsb_form_switch_expander</a> ( );
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <span class="keywordflow">return</span> FALSE;
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 
<a name="l00622"></a>00622 
<a name="l00628"></a><a class="code" href="menu_8h.html#aeb017cf19bed8e724d46231072994de9">00628</a> gboolean <a class="code" href="menu_8c.html#aeb017cf19bed8e724d46231072994de9">gsb_gui_toggle_show_reconciled</a> ( <span class="keywordtype">void</span> )
<a name="l00629"></a>00629 {
<a name="l00630"></a>00630     gint current_account;
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <span class="keywordflow">if</span> ( <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> )
<a name="l00633"></a>00633             <span class="keywordflow">return</span> FALSE;
<a name="l00634"></a>00634 
<a name="l00635"></a>00635     current_account = <a class="code" href="navigation_8c.html#a3b668bf52ce71dcff3ea10c9db7be859">gsb_gui_navigation_get_current_account</a> ( );
<a name="l00636"></a>00636     <span class="keywordflow">if</span> ( current_account == -1 )
<a name="l00637"></a>00637         <span class="keywordflow">return</span> FALSE;
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__account_8c.html#aca61a61a56a3e161716a443b366cd899">gsb_data_account_get_r</a> ( current_account ) )
<a name="l00640"></a>00640             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> ( 6 );
<a name="l00641"></a>00641     <span class="keywordflow">else</span>
<a name="l00642"></a>00642             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> ( 5 );
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     <span class="keywordflow">return</span> FALSE;
<a name="l00645"></a>00645 }
<a name="l00646"></a>00646 
<a name="l00647"></a>00647 
<a name="l00653"></a><a class="code" href="menu_8h.html#aa2af14ac64481c25621aef9c3e43eea5">00653</a> gboolean <a class="code" href="menu_8c.html#aa2af14ac64481c25621aef9c3e43eea5">gsb_gui_toggle_show_archived</a> ( <span class="keywordtype">void</span> )
<a name="l00654"></a>00654 {
<a name="l00655"></a>00655     gint current_account;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657     <span class="keywordflow">if</span> ( <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> )
<a name="l00658"></a>00658             <span class="keywordflow">return</span> FALSE;
<a name="l00659"></a>00659 
<a name="l00660"></a>00660     current_account = <a class="code" href="navigation_8c.html#a3b668bf52ce71dcff3ea10c9db7be859">gsb_gui_navigation_get_current_account</a> ( );
<a name="l00661"></a>00661     <span class="keywordflow">if</span> ( current_account == -1 )
<a name="l00662"></a>00662         <span class="keywordflow">return</span> FALSE;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664     <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__account_8c.html#acbc8b219af2e0520506d34eded08ad34">gsb_data_account_get_l</a> ( current_account ) )
<a name="l00665"></a>00665             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> ( 8 );
<a name="l00666"></a>00666     <span class="keywordflow">else</span>
<a name="l00667"></a>00667             <a class="code" href="barre__outils_8c.html#ae695ec2f9683a33728d94f301b83aaa9">change_aspect_liste</a> ( 7 );
<a name="l00668"></a>00668 
<a name="l00669"></a>00669     <span class="keywordflow">return</span> FALSE;
<a name="l00670"></a>00670 }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672 
<a name="l00678"></a>00678 gboolean gsb_gui_toggle_show_closed_accounts ( <span class="keywordtype">void</span> )
<a name="l00679"></a>00679 {
<a name="l00680"></a>00680     <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a2bc8b82e44468eaed090b64ef81956f1">show_closed_accounts</a> = ! <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a2bc8b82e44468eaed090b64ef81956f1">show_closed_accounts</a>;
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     <a class="code" href="navigation_8c.html#a40d9073dbe6df6658ce1c5c45118cd22">create_account_list</a> ( <a class="code" href="menu_8c.html#af25f8dd6dec7eb5cb22b4a710e686d29">navigation_model</a> );
<a name="l00683"></a>00683     <a class="code" href="navigation_8c.html#a4deacb31bc63a27b2ed5b39f79bffc0b">gsb_gui_navigation_update_home_page</a> ( );
<a name="l00684"></a>00684 
<a name="l00685"></a>00685     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l00686"></a>00686         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     <span class="keywordflow">return</span> FALSE;
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 
<a name="l00692"></a>00692 
<a name="l00700"></a><a class="code" href="menu_8h.html#a60f727414d6ce8974582d80ae95c1f81">00700</a> gboolean <a class="code" href="menu_8c.html#a60f727414d6ce8974582d80ae95c1f81">gsb_menu_update_view_menu</a> ( gint account_number )
<a name="l00701"></a>00701 {
<a name="l00702"></a>00702     gchar * item_name = NULL;
<a name="l00703"></a>00703     gchar *tmpstr;
<a name="l00704"></a>00704 
<a name="l00705"></a>00705     <a class="code" href="erreur_8h.html#a10f4eeae4cc251a8d632fd62ec1057fb">devel_debug_int</a> (account_number);
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> = TRUE;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709     <span class="comment">/* update the showing of reconciled transactions */</span>
<a name="l00710"></a>00710     tmpstr = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowReconciled&quot;</span>, NULL );
<a name="l00711"></a>00711     gtk_toggle_action_set_active ( GTK_TOGGLE_ACTION (
<a name="l00712"></a>00712                         gtk_ui_manager_get_action ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, tmpstr) ), 
<a name="l00713"></a>00713                                         <a class="code" href="gsb__data__account_8c.html#aca61a61a56a3e161716a443b366cd899">gsb_data_account_get_r</a> ( account_number ) );
<a name="l00714"></a>00714     g_free ( tmpstr );
<a name="l00715"></a>00715 
<a name="l00716"></a>00716     tmpstr = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowTransactionForm&quot;</span>, NULL );
<a name="l00717"></a>00717     gtk_toggle_action_set_active ( GTK_TOGGLE_ACTION (
<a name="l00718"></a>00718                         gtk_ui_manager_get_action ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, tmpstr) ), 
<a name="l00719"></a>00719                                         <a class="code" href="gsb__form_8c.html#aa8d4c0a5ce5d891427405bcc9ce9372e">gsb_form_is_visible</a> ( ) );
<a name="l00720"></a>00720     g_free ( tmpstr );
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     <span class="comment">/* update the showing of reconciled transactions */</span>
<a name="l00723"></a>00723     tmpstr = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowArchived&quot;</span>, NULL );
<a name="l00724"></a>00724     gtk_toggle_action_set_active ( GTK_TOGGLE_ACTION (
<a name="l00725"></a>00725                         gtk_ui_manager_get_action ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, tmpstr) ), 
<a name="l00726"></a>00726                                         <a class="code" href="gsb__data__account_8c.html#acbc8b219af2e0520506d34eded08ad34">gsb_data_account_get_l</a> ( account_number ) );
<a name="l00727"></a>00727     g_free ( tmpstr );
<a name="l00728"></a>00728 
<a name="l00729"></a>00729     <span class="comment">/* update the number of line showed */</span>
<a name="l00730"></a>00730     <span class="keywordflow">switch</span> ( <a class="code" href="gsb__data__account_8c.html#a3daed40b7bb578a2e1e3f0b948ea0bf6">gsb_data_account_get_nb_rows</a> (account_number))
<a name="l00731"></a>00731     {
<a name="l00732"></a>00732         <span class="keywordflow">default</span>:
<a name="l00733"></a>00733         <span class="keywordflow">case</span> 1 :
<a name="l00734"></a>00734             item_name = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowOneLine&quot;</span>, NULL );
<a name="l00735"></a>00735             <span class="keywordflow">break</span>;
<a name="l00736"></a>00736         <span class="keywordflow">case</span> 2 :
<a name="l00737"></a>00737             item_name = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowTwoLines&quot;</span>, NULL );
<a name="l00738"></a>00738             <span class="keywordflow">break</span>;
<a name="l00739"></a>00739         <span class="keywordflow">case</span> 3 :
<a name="l00740"></a>00740             item_name = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowThreeLines&quot;</span>, NULL );
<a name="l00741"></a>00741             <span class="keywordflow">break</span>;
<a name="l00742"></a>00742         <span class="keywordflow">case</span> 4 :
<a name="l00743"></a>00743             item_name = <a class="code" href="menu_8c.html#a8bf02c2e8820e600ffa71a0ef9f6cce8">menu_name</a> ( <span class="stringliteral">&quot;ViewMenu&quot;</span>, <span class="stringliteral">&quot;ShowFourLines&quot;</span>, NULL );
<a name="l00744"></a>00744             <span class="keywordflow">break</span>;
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747     gtk_toggle_action_set_active ( GTK_TOGGLE_ACTION (
<a name="l00748"></a>00748                         gtk_ui_manager_get_action ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, item_name ) ),
<a name="l00749"></a>00749                                         TRUE );
<a name="l00750"></a>00750     g_free ( item_name );
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     <a class="code" href="barre__outils_8c.html#a148929df9268caccbe39dfef840fe42d">block_menu_cb</a> = FALSE;
<a name="l00753"></a>00753 
<a name="l00754"></a>00754     <span class="keywordflow">return</span> FALSE;
<a name="l00755"></a>00755 }
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 
<a name="l00765"></a><a class="code" href="menu_8h.html#a82ddd4b1a12d79cf3c8211128ef52a88">00765</a> gboolean <a class="code" href="menu_8c.html#a82ddd4b1a12d79cf3c8211128ef52a88">gsb_menu_update_accounts_in_menus</a> ( <span class="keywordtype">void</span> )
<a name="l00766"></a>00766 {
<a name="l00767"></a>00767     GSList *list_tmp;
<a name="l00768"></a>00768     GtkActionGroup * action_group;
<a name="l00769"></a>00769 
<a name="l00770"></a>00770     <span class="keywordflow">if</span> ( move_to_account_merge_id != -1 ) 
<a name="l00771"></a>00771         gtk_ui_manager_remove_ui ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, move_to_account_merge_id );
<a name="l00772"></a>00772 
<a name="l00773"></a>00773     move_to_account_merge_id = gtk_ui_manager_new_merge_id ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a> );
<a name="l00774"></a>00774     action_group = gtk_action_group_new ( <span class="stringliteral">&quot;Group3&quot;</span> );
<a name="l00775"></a>00775 
<a name="l00776"></a>00776     <span class="comment">/* create the closed accounts and accounts in the menu to move a transaction */</span>
<a name="l00777"></a>00777     list_tmp = <a class="code" href="gsb__data__account_8c.html#aaf4d25733c7ea5a0ca263c0ab79e6212">gsb_data_account_get_list_accounts</a> ();
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     <span class="keywordflow">while</span> ( list_tmp )
<a name="l00780"></a>00780     {
<a name="l00781"></a>00781         gint i;
<a name="l00782"></a>00782 
<a name="l00783"></a>00783         i = <a class="code" href="gsb__data__account_8c.html#ad61190b4638c2be7b7ce320470f1cb5a">gsb_data_account_get_no_account</a> ( list_tmp -&gt; data );
<a name="l00784"></a>00784 
<a name="l00785"></a>00785         <span class="keywordflow">if</span> ( !<a class="code" href="gsb__data__account_8c.html#a7d4574a01587e19f2c0ed06c6328cb41">gsb_data_account_get_closed_account</a> ( i ))
<a name="l00786"></a>00786         {
<a name="l00787"></a>00787             gchar * tmp_name = g_strdup_printf ( <span class="stringliteral">&quot;MoveToAccount%d&quot;</span>, i );
<a name="l00788"></a>00788             gchar * account_name = <a class="code" href="gsb__data__account_8c.html#a6b0df19868e38619bff512f2c18ef51e">gsb_data_account_get_name</a>(i);
<a name="l00789"></a>00789             GtkAction * action;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791             <span class="keywordflow">if</span> ( ! account_name )
<a name="l00792"></a>00792             {
<a name="l00793"></a>00793                 account_name = _(<span class="stringliteral">&quot;Unnamed account&quot;</span>);
<a name="l00794"></a>00794             }
<a name="l00795"></a>00795             action = gtk_action_new ( tmp_name, account_name, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );
<a name="l00796"></a>00796 
<a name="l00797"></a>00797             <span class="keywordflow">if</span> ( <a class="code" href="navigation_8c.html#a3b668bf52ce71dcff3ea10c9db7be859">gsb_gui_navigation_get_current_account</a> () == i )
<a name="l00798"></a>00798                 gtk_action_set_sensitive ( action, FALSE );
<a name="l00799"></a>00799 
<a name="l00800"></a>00800             gtk_action_group_add_action ( action_group, action );
<a name="l00801"></a>00801 
<a name="l00802"></a>00802             g_signal_connect ( action, <span class="stringliteral">&quot;activate&quot;</span>, 
<a name="l00803"></a>00803                                G_CALLBACK(<a class="code" href="gsb__transactions__list_8c.html#a28b9f175715bce0ac88b473e29ac2fea">move_selected_operation_to_account_nb</a>), 
<a name="l00804"></a>00804                                GINT_TO_POINTER(i) );
<a name="l00805"></a>00805             gtk_ui_manager_add_ui ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, recent_files_merge_id, 
<a name="l00806"></a>00806                                     <span class="stringliteral">&quot;/MenuBar/EditMenu/MoveToAnotherAccount/&quot;</span>,
<a name="l00807"></a>00807                                     tmp_name, tmp_name,
<a name="l00808"></a>00808                                     GTK_UI_MANAGER_MENUITEM, FALSE );
<a name="l00809"></a>00809             g_free ( tmp_name );
<a name="l00810"></a>00810         }
<a name="l00811"></a>00811 
<a name="l00812"></a>00812         list_tmp = list_tmp -&gt; next;
<a name="l00813"></a>00813     }
<a name="l00814"></a>00814 
<a name="l00815"></a>00815     gtk_ui_manager_insert_action_group ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a>, action_group, 2 );
<a name="l00816"></a>00816     gtk_ui_manager_ensure_update ( <a class="code" href="barre__outils_8c.html#aa6a3b64b294a67080fe530ae293bce63">ui_manager</a> );
<a name="l00817"></a>00817 
<a name="l00818"></a>00818     <span class="keywordflow">return</span> FALSE;
<a name="l00819"></a>00819 }
<a name="l00820"></a>00820 
<a name="l00821"></a>00821 
<a name="l00822"></a>00822 
<a name="l00831"></a><a class="code" href="menu_8h.html#a2cd0fa9a87d28146f743c30d75c3ee00">00831</a> gboolean <a class="code" href="menu_8c.html#a2cd0fa9a87d28146f743c30d75c3ee00">gsb_menu_transaction_operations_set_sensitive</a> ( gboolean sensitive )
<a name="l00832"></a>00832 {
<a name="l00833"></a>00833     <a class="code" href="erreur_8h.html#a17bfffc4306bc76edd79e060a8947dc4">devel_debug</a> ( sensitive ? <span class="stringliteral">&quot;item sensitive&quot;</span> : <span class="stringliteral">&quot;item unsensitive&quot;</span> );
<a name="l00834"></a>00834 
<a name="l00835"></a>00835     <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( <span class="stringliteral">&quot;EditMenu&quot;</span>, <span class="stringliteral">&quot;RemoveTransaction&quot;</span>, NULL, sensitive );
<a name="l00836"></a>00836     <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( <span class="stringliteral">&quot;EditMenu&quot;</span>, <span class="stringliteral">&quot;CloneTransaction&quot;</span>, NULL, sensitive );
<a name="l00837"></a>00837     <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( <span class="stringliteral">&quot;EditMenu&quot;</span>, <span class="stringliteral">&quot;EditTransaction&quot;</span>, NULL, sensitive );
<a name="l00838"></a>00838     <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( <span class="stringliteral">&quot;EditMenu&quot;</span>, <span class="stringliteral">&quot;ConvertToScheduled&quot;</span>, NULL, sensitive );
<a name="l00839"></a>00839     <a class="code" href="menu_8c.html#ad3557028823b3fd30c4d7367b698d2e2">gsb_gui_sensitive_menu_item</a> ( <span class="stringliteral">&quot;EditMenu&quot;</span>, <span class="stringliteral">&quot;MoveToAnotherAccount&quot;</span>, NULL, sensitive );
<a name="l00840"></a>00840 
<a name="l00841"></a>00841     <span class="keywordflow">return</span> FALSE;
<a name="l00842"></a>00842 }
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 
<a name="l00845"></a>00845 <span class="comment">/* Local Variables: */</span>
<a name="l00846"></a>00846 <span class="comment">/* c-basic-offset: 4 */</span>
<a name="l00847"></a>00847 <span class="comment">/* End: */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Généré le Sat Aug 7 22:12:03 2010 pour Grisbi par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
