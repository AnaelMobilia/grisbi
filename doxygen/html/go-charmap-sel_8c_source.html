<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Grisbi:  Fichier source de go-charmap-sel.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&nbsp;associées</span></a></li>
      <li><a href="annotated.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
    </ul>
  </div>
<h1>go-charmap-sel.c</h1><a href="go-charmap-sel_8c.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* vim: set sw=8: -*- Mode: C; tab-width: 8; indent-tabs-mode: t; c-basic-offset: 8 -*- */</span>
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> * A charmap selector widget.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  Copyright (C) 2003-2005 Andreas J. Guelzow</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> *  based on code by:</span>
<a name="l00008"></a>00008 <span class="comment"> *  Copyright (C) 2000 Marco Pesenti Gritti</span>
<a name="l00009"></a>00009 <span class="comment"> *  from the galeon code base</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> *  This program is free software; you can redistribute it and/or modify</span>
<a name="l00012"></a>00012 <span class="comment"> *  it under the terms of the GNU General Public License as published by</span>
<a name="l00013"></a>00013 <span class="comment"> *  the Free Software Foundation; either version 2, or (at your option)</span>
<a name="l00014"></a>00014 <span class="comment"> *  any later version.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> *  This program is distributed in the hope that it will be useful,</span>
<a name="l00017"></a>00017 <span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00018"></a>00018 <span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00019"></a>00019 <span class="comment"> *  GNU General Public License for more details.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> *  You should have received a copy of the GNU General Public License</span>
<a name="l00022"></a>00022 <span class="comment"> *  along with this program; if not, write to the Free Software</span>
<a name="l00023"></a>00023 <span class="comment"> *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301, USA.</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">/*START_INCLUDE*/</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="go-charmap-sel_8h.html">go-charmap-sel.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="go-optionmenu_8h.html">go-optionmenu.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="utils__str_8h.html">utils_str.h</a>&quot;</span>
<a name="l00032"></a><a class="code" href="structcb__find__entry.html#a53aa5270e1d5b5f0c2df8c232cd696cb">00032</a> <span class="preprocessor">#include &quot;<a class="code" href="go-optionmenu_8h.html">go-optionmenu.h</a>&quot;</span>
<a name="l00033"></a><a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">00033</a> <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00034"></a><a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">00034</a> <span class="comment">/*END_INCLUDE*/</span>
<a name="l00035"></a><a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">00035</a> 
<a name="l00036"></a><a class="code" href="structcb__find__entry.html">00036</a> <span class="keyword">struct </span><a class="code" href="structcb__find__entry.html">cb_find_entry</a> {
<a name="l00037"></a>00037         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structcb__find__entry.html#a53aa5270e1d5b5f0c2df8c232cd696cb">enc</a>;
<a name="l00038"></a>00038         gboolean <a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">found</a>;
<a name="l00039"></a>00039         <span class="keywordtype">int</span> <a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a>;
<a name="l00040"></a>00040         GSList *<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>;
<a name="l00041"></a>00041 };
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">/*START_STATIC*/</span>
<a name="l00044"></a>00044 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structcb__find__entry.html">cb_find_entry</a> (GtkMenuItem *w, <span class="keyword">struct</span> <a class="code" href="structcb__find__entry.html">cb_find_entry</a> *cl);
<a name="l00045"></a>00045 <span class="keyword">static</span> <span class="keywordtype">int</span> charset_order (<span class="keyword">const</span> <span class="keywordtype">void</span> *_a, <span class="keyword">const</span> <span class="keywordtype">void</span> *_b);
<a name="l00046"></a>00046 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_build_menu (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs);
<a name="l00047"></a>00047 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_class_init (GtkWidgetClass *widget_klass);
<a name="l00048"></a>00048 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_emphasize_label (GtkLabel *label);
<a name="l00049"></a>00049 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_get_property (GObject     *<span class="keywordtype">object</span>,
<a name="l00050"></a>00050                  guint        prop_id,
<a name="l00051"></a>00051                  GValue      *value,
<a name="l00052"></a>00052                  GParamSpec  *pspec);
<a name="l00053"></a>00053 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_init (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs);
<a name="l00054"></a>00054 <span class="keyword">static</span> gboolean cs_mnemonic_activate (GtkWidget *w, gboolean group_cycling);
<a name="l00055"></a>00055 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_set_property (GObject      *<span class="keywordtype">object</span>,
<a name="l00056"></a>00056                  guint         prop_id,
<a name="l00057"></a>00057                  <span class="keyword">const</span> GValue *value,
<a name="l00058"></a>00058                  GParamSpec   *pspec);
<a name="l00059"></a>00059 <span class="keyword">static</span> <span class="keywordtype">void</span> encodings_changed_cb (<a class="code" href="struct__GOOptionMenu.html">GOOptionMenu</a> *optionmenu, <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs);
<a name="l00060"></a>00060 <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> * get_locale_encoding_name (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs);
<a name="l00061"></a>00061 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * go_charmap_sel_get_encoding_name (G_GNUC_UNUSED <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs,
<a name="l00062"></a>00062                                     <span class="keyword">const</span> <span class="keywordtype">char</span> *encoding);
<a name="l00063"></a>00063 <span class="keyword">static</span> gboolean iconv_supported (<span class="keyword">const</span> <span class="keywordtype">char</span> *to, <span class="keyword">const</span> <span class="keywordtype">char</span> *from);
<a name="l00064"></a>00064 <span class="keyword">static</span> <span class="keywordtype">int</span> lgroups_order (<span class="keyword">const</span> <span class="keywordtype">void</span> *_a, <span class="keyword">const</span> <span class="keywordtype">void</span> *_b);
<a name="l00065"></a>00065 <span class="keyword">static</span> <span class="keywordtype">void</span> set_menu_to_default (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs, gint item);
<a name="l00066"></a>00066 <span class="comment">/*END_STATIC*/</span>
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">/*START_EXTERN*/</span>
<a name="l00069"></a>00069 <span class="comment">/*END_EXTERN*/</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="go-charmap-sel_8h.html">go-charmap-sel.h</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="go-optionmenu_8h.html">go-optionmenu.h</a>&quot;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &lt;gtk/gtkcheckmenuitem.h&gt;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &lt;gtk/gtkhbox.h&gt;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include &lt;gtk/gtklabel.h&gt;</span>
<a name="l00077"></a>00077 <span class="preprocessor">#include &lt;gtk/gtkmenu.h&gt;</span>
<a name="l00078"></a>00078 <span class="preprocessor">#include &lt;gtk/gtkmenuitem.h&gt;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include &lt;gtk/gtkseparatormenuitem.h&gt;</span>
<a name="l00080"></a>00080 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="go-charmap-sel_8c.html#a1178db9855c046720f7b764ce8caafad">00083</a> <span class="preprocessor">#define CS(x) GO_CHARMAP_SEL (x)</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>
<a name="l00085"></a><a class="code" href="go-charmap-sel_8c.html#aa2d5961ee58c88d2a88625dac7264112">00085</a> <span class="preprocessor">#define CHARMAP_NAME_KEY &quot;Name of Character Encoding&quot;</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="comment">/* name -&gt; CharsetInfo* mapping */</span>
<a name="l00089"></a>00089 <span class="keyword">static</span> GHashTable *encoding_hash;
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="struct__GOCharmapSel.html">00091</a> <span class="keyword">struct </span><a class="code" href="struct__GOCharmapSel.html">_GOCharmapSel</a> {
<a name="l00092"></a><a class="code" href="struct__GOCharmapSel.html#ac12df2bfd1f8b8714a3b4827b8011253">00092</a>         GtkHBox <a class="code" href="struct__GOCharmapSel.html#ac12df2bfd1f8b8714a3b4827b8011253">box</a>;
<a name="l00093"></a><a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">00093</a>         <a class="code" href="struct__GOOptionMenu.html">GOOptionMenu</a> *<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>;
<a name="l00094"></a><a class="code" href="struct__GOCharmapSel.html#ab31ddccd79af3d634401309b2214d29c">00094</a>         GtkMenu *<a class="code" href="struct__GOCharmapSel.html#ab31ddccd79af3d634401309b2214d29c">encodings_menu</a>;
<a name="l00095"></a><a class="code" href="struct__GOCharmapSel.html#a6258edc5b54d1ac2943c448348b2036f">00095</a>         <a class="code" href="go-charmap-sel_8h.html#a758de5be5c36f44240e2a4fb4fcd7912">GOCharmapSelTestDirection</a> <a class="code" href="struct__GOCharmapSel.html#a6258edc5b54d1ac2943c448348b2036f">test</a>;
<a name="l00096"></a>00096 };
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="structGOCharmapSelClass.html">00098</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00099"></a><a class="code" href="structGOCharmapSelClass.html#af991fbaae0c077dd8009b0d3989626eb">00099</a>         GtkHBoxClass parent_class;
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="structGOCharmapSelClass.html#a9bb2d476af00f15c18c3ae42be56c9ab">00101</a>         gboolean (* charmap_changed) (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs, <span class="keywordtype">char</span> <span class="keyword">const</span> *new_charmap);
<a name="l00102"></a>00102 } <a class="code" href="structGOCharmapSelClass.html">GOCharmapSelClass</a>;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="go-charmap-sel_8c.html#a98bb6ea1d67f7e272c0fe7be5eec1ea4">00105</a> <span class="keyword">typedef</span> <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> <a class="code" href="struct__GOCharmapSel.html">Cs</a>;
<a name="l00106"></a><a class="code" href="go-charmap-sel_8c.html#a8aedb7fb0d65217b02b2136a2a891321">00106</a> <span class="keyword">typedef</span> <a class="code" href="structGOCharmapSelClass.html">GOCharmapSelClass</a> <a class="code" href="structGOCharmapSelClass.html">CsClass</a>;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="comment">/* Signals we emit */</span>
<a name="l00109"></a>00109 <span class="keyword">enum</span> {
<a name="l00110"></a><a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a2d46d269c28f1438b81445027ac2fbc0">00110</a>         <a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a2d46d269c28f1438b81445027ac2fbc0">CHARMAP_CHANGED</a>,
<a name="l00111"></a><a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a0c34d85df8279641afad9e3c9b3a54ce">00111</a>         <a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a0c34d85df8279641afad9e3c9b3a54ce">LAST_SIGNAL</a>
<a name="l00112"></a>00112 };
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="keyword">enum</span> {
<a name="l00115"></a><a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04ac37dda0da1a44e10c0504afeeb863f3c">00115</a>         <a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04ac37dda0da1a44e10c0504afeeb863f3c">PROP_0</a>,
<a name="l00116"></a><a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04a625d5a11efb0a06be0cda62720db125d">00116</a>         <a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04a625d5a11efb0a06be0cda62720db125d">PROP_TEST_DIRECTION</a>
<a name="l00117"></a>00117 };
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="preprocessor">#define GSF_CLASS_FULL(name, prefix, base_init, base_finalize, \</span>
<a name="l00120"></a>00120 <span class="preprocessor">                           class_init, class_finalize, instance_init, parent_type, \</span>
<a name="l00121"></a><a class="code" href="go-charmap-sel_8c.html#ab8bbf5e25cc18dc87db85348fad1d5e7">00121</a> <span class="preprocessor">                       abstract, interface_decl) \</span>
<a name="l00122"></a>00122 <span class="preprocessor">GType                                                                   \</span>
<a name="l00123"></a>00123 <span class="preprocessor">prefix ## _get_type (void)                                              \</span>
<a name="l00124"></a>00124 <span class="preprocessor">{                                                                       \</span>
<a name="l00125"></a>00125 <span class="preprocessor">        static GType type = 0;                                          \</span>
<a name="l00126"></a>00126 <span class="preprocessor">        if (type == 0) {                                                \</span>
<a name="l00127"></a>00127 <span class="preprocessor">                static GTypeInfo const object_info = {                  \</span>
<a name="l00128"></a>00128 <span class="preprocessor">                        sizeof (name ## Class),                         \</span>
<a name="l00129"></a>00129 <span class="preprocessor">                        (GBaseInitFunc) base_init,                      \</span>
<a name="l00130"></a>00130 <span class="preprocessor">                        (GBaseFinalizeFunc) base_finalize,              \</span>
<a name="l00131"></a>00131 <span class="preprocessor">                        (GClassInitFunc) class_init,                    \</span>
<a name="l00132"></a>00132 <span class="preprocessor">                        (GClassFinalizeFunc) class_finalize,            \</span>
<a name="l00133"></a>00133 <span class="preprocessor">                        NULL,   </span><span class="comment">/* class_data */</span>                        \
<a name="l00134"></a>00134                         sizeof (name),                                  \
<a name="l00135"></a>00135                         0,      <span class="comment">/* n_preallocs */</span>                       \
<a name="l00136"></a>00136                         (GInstanceInitFunc) instance_init,              \
<a name="l00137"></a>00137                         NULL                                            \
<a name="l00138"></a>00138                 };                                                      \
<a name="l00139"></a>00139                 type = g_type_register_static (parent_type, #name,      \
<a name="l00140"></a>00140                         &amp;object_info, (GTypeFlags) abstract);           \
<a name="l00141"></a>00141                 interface_decl                                          \
<a name="l00142"></a>00142         }                                                               \
<a name="l00143"></a>00143         return type;                                                    \
<a name="l00144"></a>00144 }
<a name="l00145"></a><a class="code" href="go-charmap-sel_8c.html#ac4ecfb8448b614434a0d0f685a87cbaf">00145</a> <span class="preprocessor">#define GSF_CLASS(name, prefix, class_init, instance_init, parent) \</span>
<a name="l00146"></a>00146 <span class="preprocessor">        GSF_CLASS_FULL(name, prefix, NULL, NULL, class_init, NULL, \</span>
<a name="l00147"></a>00147 <span class="preprocessor">                                instance_init, parent, 0, {})</span>
<a name="l00148"></a><a class="code" href="go-charmap-sel_8c.html#aae247185acba9c3087636aa05049b932">00148</a> <span class="preprocessor"></span><a class="code" href="go-charmap-sel_8c.html#ac4ecfb8448b614434a0d0f685a87cbaf">GSF_CLASS</a> (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a>, go_charmap_sel,
<a name="l00149"></a>00149            cs_class_init, cs_init, GTK_TYPE_HBOX)
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="comment">/* ------------------------------------------------------------------------- */</span>
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 typedef enum {
<a name="l00154"></a>00154         LG_ARABIC,
<a name="l00155"></a>00155         LG_BALTIC,
<a name="l00156"></a>00156         LG_CENTRAL_EUROPEAN,
<a name="l00157"></a>00157         LG_CHINESE,
<a name="l00158"></a>00158         LG_CYRILLIC,
<a name="l00159"></a>00159         LG_GREEK,
<a name="l00160"></a>00160         LG_HEBREW,
<a name="l00161"></a>00161         LG_INDIAN,
<a name="l00162"></a>00162         LG_JAPANESE,
<a name="l00163"></a>00163         LG_KOREAN,
<a name="l00164"></a>00164         LG_TURKISH,
<a name="l00165"></a>00165         LG_UNICODE,
<a name="l00166"></a>00166         LG_VIETNAMESE,
<a name="l00167"></a>00167         LG_WESTERN,
<a name="l00168"></a>00168         LG_OTHER,
<a name="l00169"></a>00169         LG_LAST
<a name="l00170"></a><a class="code" href="go-charmap-sel_8c.html#acc162ef6fd12567a701dc17144498ff3">00170</a> } <a class="code" href="go-charmap-sel_8c.html#acc162ef6fd12567a701dc17144498ff3">LanguageGroup</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="structLGroupInfo.html">00172</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00173"></a><a class="code" href="structLGroupInfo.html#a850ca0480725e307e0fd7ae879bdfcc1">00173</a>         <span class="keywordtype">char</span> <span class="keyword">const</span> *group_name;
<a name="l00174"></a><a class="code" href="structLGroupInfo.html#ac64bc610640dad9a0db5729f0f5b6a4d">00174</a>         <a class="code" href="go-charmap-sel_8c.html#acc162ef6fd12567a701dc17144498ff3">LanguageGroup</a> <span class="keyword">const</span> lgroup;
<a name="l00175"></a>00175         <span class="comment">/* Generated stuff follows.  */</span>
<a name="l00176"></a><a class="code" href="structLGroupInfo.html#acde944e9ed66c9d6ecf420474e4fbcec">00176</a>         <span class="keywordtype">char</span> *collate_key;
<a name="l00177"></a>00177 } <a class="code" href="structLGroupInfo.html">LGroupInfo</a>;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="keyword">static</span> <a class="code" href="structLGroupInfo.html">LGroupInfo</a> lgroups[] = {
<a name="l00180"></a>00180         {N_(<span class="stringliteral">&quot;Arabic&quot;</span>), LG_ARABIC},
<a name="l00181"></a>00181         {N_(<span class="stringliteral">&quot;Baltic&quot;</span>), LG_BALTIC},
<a name="l00182"></a>00182         {N_(<span class="stringliteral">&quot;Central European&quot;</span>), LG_CENTRAL_EUROPEAN},
<a name="l00183"></a>00183         {N_(<span class="stringliteral">&quot;Chinese&quot;</span>), LG_CHINESE},
<a name="l00184"></a>00184         {N_(<span class="stringliteral">&quot;Cyrillic&quot;</span>), LG_CYRILLIC},
<a name="l00185"></a>00185         {N_(<span class="stringliteral">&quot;Greek&quot;</span>), LG_GREEK},
<a name="l00186"></a>00186         {N_(<span class="stringliteral">&quot;Hebrew&quot;</span>), LG_HEBREW},
<a name="l00187"></a>00187         {N_(<span class="stringliteral">&quot;Indian&quot;</span>), LG_INDIAN},
<a name="l00188"></a>00188         {N_(<span class="stringliteral">&quot;Japanese&quot;</span>), LG_JAPANESE},
<a name="l00189"></a>00189         {N_(<span class="stringliteral">&quot;Korean&quot;</span>), LG_KOREAN},
<a name="l00190"></a>00190         {N_(<span class="stringliteral">&quot;Turkish&quot;</span>), LG_TURKISH},
<a name="l00191"></a>00191         {N_(<span class="stringliteral">&quot;Unicode&quot;</span>), LG_UNICODE},
<a name="l00192"></a>00192         {N_(<span class="stringliteral">&quot;Vietnamese&quot;</span>), LG_VIETNAMESE},
<a name="l00193"></a>00193         {N_(<span class="stringliteral">&quot;Western&quot;</span>), LG_WESTERN},
<a name="l00194"></a>00194         {N_(<span class="stringliteral">&quot;Other&quot;</span>), LG_OTHER},
<a name="l00195"></a>00195         {NULL, LG_LAST}
<a name="l00196"></a>00196 };
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 <span class="keyword">static</span> <span class="keywordtype">int</span> lgroups_order (<span class="keyword">const</span> <span class="keywordtype">void</span> *_a, <span class="keyword">const</span> <span class="keywordtype">void</span> *_b)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200         <span class="keyword">const</span> <a class="code" href="structLGroupInfo.html">LGroupInfo</a> *a = (<span class="keyword">const</span> <a class="code" href="structLGroupInfo.html">LGroupInfo</a> *)_a;
<a name="l00201"></a>00201         <span class="keyword">const</span> <a class="code" href="structLGroupInfo.html">LGroupInfo</a> *b = (<span class="keyword">const</span> <a class="code" href="structLGroupInfo.html">LGroupInfo</a> *)_b;
<a name="l00202"></a>00202 
<a name="l00203"></a>00203         <span class="keywordflow">return</span> strcmp (a-&gt;<a class="code" href="structLGroupInfo.html#acde944e9ed66c9d6ecf420474e4fbcec">collate_key</a>, b-&gt;<a class="code" href="structLGroupInfo.html#acde944e9ed66c9d6ecf420474e4fbcec">collate_key</a>);
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">/* ------------------------------------------------------------------------- */</span>
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1">00208</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00209"></a><a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">00209</a>      <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>,
<a name="l00210"></a><a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1a343a36bb261bcdfca1fa391026ee3e8f">00210</a>      <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1a343a36bb261bcdfca1fa391026ee3e8f">CI_MAJOR</a>
<a name="l00211"></a>00211 } <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1">CharsetImportance</a>;
<a name="l00212"></a>00212 
<a name="l00213"></a><a class="code" href="structCharsetInfo.html">00213</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00214"></a><a class="code" href="structCharsetInfo.html#ab76c922cedb7af43ea2d10e6abfa2a0c">00214</a>         gchar <span class="keyword">const</span> *charset_title;
<a name="l00215"></a><a class="code" href="structCharsetInfo.html#a7895f6da6e540877778378bcac0bfd3e">00215</a>         gchar <span class="keyword">const</span> *aliases;
<a name="l00216"></a><a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">00216</a>         <a class="code" href="go-charmap-sel_8c.html#acc162ef6fd12567a701dc17144498ff3">LanguageGroup</a> <span class="keyword">const</span> lgroup;
<a name="l00217"></a><a class="code" href="structCharsetInfo.html#a8cb95902370f8b495f7d3896c94147f6">00217</a>         <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1">CharsetImportance</a> <span class="keyword">const</span> imp;
<a name="l00218"></a>00218         <span class="comment">/* Generated stuff follows.  */</span>
<a name="l00219"></a><a class="code" href="structCharsetInfo.html#a3207f8911d52a4e447671f267f284e8a">00219</a>         <span class="keywordtype">char</span> *collate_key;
<a name="l00220"></a><a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">00220</a>         <span class="keywordtype">char</span> *to_utf8_iconv_name, *from_utf8_iconv_name;
<a name="l00221"></a>00221 } <a class="code" href="structCharsetInfo.html">CharsetInfo</a>;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="keyword">static</span> <a class="code" href="structCharsetInfo.html">CharsetInfo</a> charset_trans_array[] = {
<a name="l00224"></a>00224         {N_(<span class="stringliteral">&quot;Arabic (IBM-864)&quot;</span>),                  <span class="stringliteral">&quot;IBM864&quot;</span>,                LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00225"></a>00225         {N_(<span class="stringliteral">&quot;Arabic (IBM-864-I)&quot;</span>),                <span class="stringliteral">&quot;IBM864i&quot;</span>,               LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00226"></a>00226         {N_(<span class="stringliteral">&quot;Arabic (ISO-8859-6)&quot;</span>),               <span class="stringliteral">&quot;ISO-8859-6&quot;</span>,            LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00227"></a>00227         {N_(<span class="stringliteral">&quot;Arabic (ISO-8859-6-E)&quot;</span>),             <span class="stringliteral">&quot;ISO-8859-6-E&quot;</span>,          LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00228"></a>00228 
<a name="l00229"></a>00229         {N_(<span class="stringliteral">&quot;Arabic (ISO-8859-6-I)&quot;</span>),             <span class="stringliteral">&quot;ISO-8859-6-I&quot;</span>,          LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00230"></a>00230         {N_(<span class="stringliteral">&quot;Arabic (MacArabic)&quot;</span>),                <span class="stringliteral">&quot;x-mac-arabic&quot;</span>,          LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00231"></a>00231         {N_(<span class="stringliteral">&quot;Arabic (Windows-1256)&quot;</span>),             <span class="stringliteral">&quot;windows-1256&quot;</span>,          LG_ARABIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00232"></a>00232         {N_(<span class="stringliteral">&quot;Armenian (ARMSCII-8)&quot;</span>),              <span class="stringliteral">&quot;armscii-8&quot;</span>,             LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00233"></a>00233         {N_(<span class="stringliteral">&quot;Baltic (ISO-8859-13)&quot;</span>),              <span class="stringliteral">&quot;ISO-8859-13&quot;</span>,           LG_BALTIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00234"></a>00234         {N_(<span class="stringliteral">&quot;Baltic (ISO-8859-4)&quot;</span>),               <span class="stringliteral">&quot;ISO-8859-4&quot;</span>,            LG_BALTIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00235"></a>00235         {N_(<span class="stringliteral">&quot;Baltic (Windows-1257)&quot;</span>),             <span class="stringliteral">&quot;windows-1257&quot;</span>,          LG_BALTIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00236"></a>00236         {N_(<span class="stringliteral">&quot;Celtic (ISO-8859-14)&quot;</span>),              <span class="stringliteral">&quot;ISO-8859-14&quot;</span>,           LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00237"></a>00237         {N_(<span class="stringliteral">&quot;Central European (IBM-852)&quot;</span>),        <span class="stringliteral">&quot;IBM852&quot;</span>,                LG_CENTRAL_EUROPEAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00238"></a>00238         {N_(<span class="stringliteral">&quot;Central European (ISO-8859-2)&quot;</span>),     <span class="stringliteral">&quot;ISO-8859-2&quot;</span>,            LG_CENTRAL_EUROPEAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00239"></a>00239         {N_(<span class="stringliteral">&quot;Central European (MacCE)&quot;</span>),          <span class="stringliteral">&quot;x-mac-ce&quot;</span>,              LG_CENTRAL_EUROPEAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00240"></a>00240         {N_(<span class="stringliteral">&quot;Central European (Windows-1250)&quot;</span>),   <span class="stringliteral">&quot;windows-1250&quot;</span>,          LG_CENTRAL_EUROPEAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00241"></a>00241         {N_(<span class="stringliteral">&quot;Chinese Simplified (GB18030)&quot;</span>),      <span class="stringliteral">&quot;gb18030&quot;</span>,               LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00242"></a>00242         {N_(<span class="stringliteral">&quot;Chinese Simplified (GB2312)&quot;</span>),       <span class="stringliteral">&quot;GB2312&quot;</span>,                LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00243"></a>00243         {N_(<span class="stringliteral">&quot;Chinese Simplified (GBK)&quot;</span>),          <span class="stringliteral">&quot;x-gbk&quot;</span>,                 LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00244"></a>00244         {N_(<span class="stringliteral">&quot;Chinese Simplified (HZ)&quot;</span>),           <span class="stringliteral">&quot;HZ-GB-2312&quot;</span>,            LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00245"></a>00245         {N_(<span class="stringliteral">&quot;Chinese Simplified (Windows-936)&quot;</span>),  <span class="stringliteral">&quot;windows-936&quot;</span>,           LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00246"></a>00246         {N_(<span class="stringliteral">&quot;Chinese Traditional (Big5)&quot;</span>),        <span class="stringliteral">&quot;Big5&quot;</span>,                  LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00247"></a>00247         {N_(<span class="stringliteral">&quot;Chinese Traditional (Big5-HKSCS)&quot;</span>),  <span class="stringliteral">&quot;Big5-HKSCS&quot;</span>,            LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00248"></a>00248         {N_(<span class="stringliteral">&quot;Chinese Traditional (EUC-TW)&quot;</span>),      <span class="stringliteral">&quot;x-euc-tw&quot;</span>,              LG_CHINESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00249"></a>00249         {N_(<span class="stringliteral">&quot;Croatian (MacCroatian)&quot;</span>),            <span class="stringliteral">&quot;x-mac-croatian&quot;</span>,        LG_CENTRAL_EUROPEAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00250"></a>00250         {N_(<span class="stringliteral">&quot;Cyrillic (IBM-855)&quot;</span>),                <span class="stringliteral">&quot;IBM855&quot;</span>,                LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00251"></a>00251         {N_(<span class="stringliteral">&quot;Cyrillic (ISO-8859-5)&quot;</span>),             <span class="stringliteral">&quot;ISO-8859-5&quot;</span>,            LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00252"></a>00252         {N_(<span class="stringliteral">&quot;Cyrillic (ISO-IR-111)&quot;</span>),             <span class="stringliteral">&quot;ISO-IR-111&quot;</span>,            LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00253"></a>00253         {N_(<span class="stringliteral">&quot;Cyrillic (KOI8-R)&quot;</span>),                 <span class="stringliteral">&quot;KOI8-R&quot;</span>,                LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00254"></a>00254         {N_(<span class="stringliteral">&quot;Cyrillic (MacCyrillic)&quot;</span>),            <span class="stringliteral">&quot;x-mac-cyrillic&quot;</span>,        LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00255"></a>00255         {N_(<span class="stringliteral">&quot;Cyrillic (Windows-1251)&quot;</span>),           <span class="stringliteral">&quot;windows-1251&quot;</span>,          LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00256"></a>00256         {N_(<span class="stringliteral">&quot;Russian (CP-866)&quot;</span>),                  <span class="stringliteral">&quot;IBM866&quot;</span>,                LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00257"></a>00257         {N_(<span class="stringliteral">&quot;Ukrainian (KOI8-U)&quot;</span>),                <span class="stringliteral">&quot;KOI8-U&quot;</span>,                LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00258"></a>00258         {N_(<span class="stringliteral">&quot;Ukrainian (MacUkrainian)&quot;</span>),          <span class="stringliteral">&quot;x-mac-ukrainian&quot;</span>,       LG_CYRILLIC, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00259"></a>00259         {N_(<span class="stringliteral">&quot;English (ASCII)&quot;</span>),                   <span class="stringliteral">&quot;ANSI_X3.4-1968#ASCII&quot;</span>,  LG_WESTERN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1a343a36bb261bcdfca1fa391026ee3e8f">CI_MAJOR</a>},
<a name="l00260"></a>00260         {N_(<span class="stringliteral">&quot;Farsi (MacFarsi)&quot;</span>),                  <span class="stringliteral">&quot;x-mac-farsi&quot;</span>,           LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00261"></a>00261         {N_(<span class="stringliteral">&quot;Georgian (GEOSTD8)&quot;</span>),                <span class="stringliteral">&quot;geostd8&quot;</span>,               LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00262"></a>00262         {N_(<span class="stringliteral">&quot;Greek (ISO-8859-7)&quot;</span>),                <span class="stringliteral">&quot;ISO-8859-7&quot;</span>,            LG_GREEK, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00263"></a>00263         {N_(<span class="stringliteral">&quot;Greek (MacGreek)&quot;</span>),                  <span class="stringliteral">&quot;x-mac-greek&quot;</span>,           LG_GREEK, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00264"></a>00264         {N_(<span class="stringliteral">&quot;Greek (Windows-1253)&quot;</span>),              <span class="stringliteral">&quot;windows-1253&quot;</span>,          LG_GREEK, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00265"></a>00265         {N_(<span class="stringliteral">&quot;Gujarati (MacGujarati)&quot;</span>),            <span class="stringliteral">&quot;x-mac-gujarati&quot;</span>,        LG_INDIAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00266"></a>00266         {N_(<span class="stringliteral">&quot;Gurmukhi (MacGurmukhi)&quot;</span>),            <span class="stringliteral">&quot;x-mac-gurmukhi&quot;</span>,        LG_INDIAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00267"></a>00267         {N_(<span class="stringliteral">&quot;Hebrew (IBM-862)&quot;</span>),                  <span class="stringliteral">&quot;IBM862&quot;</span>,                LG_HEBREW, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00268"></a>00268         {N_(<span class="stringliteral">&quot;Hebrew (ISO-8859-8-E)&quot;</span>),             <span class="stringliteral">&quot;ISO-8859-8-E&quot;</span>,          LG_HEBREW, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00269"></a>00269         {N_(<span class="stringliteral">&quot;Hebrew (ISO-8859-8-I)&quot;</span>),             <span class="stringliteral">&quot;ISO-8859-8-I&quot;</span>,          LG_HEBREW, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00270"></a>00270         {N_(<span class="stringliteral">&quot;Hebrew (MacHebrew)&quot;</span>),                <span class="stringliteral">&quot;x-mac-hebrew&quot;</span>,          LG_HEBREW, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00271"></a>00271         {N_(<span class="stringliteral">&quot;Hebrew (Windows-1255)&quot;</span>),             <span class="stringliteral">&quot;windows-1255&quot;</span>,          LG_HEBREW, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00272"></a>00272         {N_(<span class="stringliteral">&quot;Hindi (MacDevanagari)&quot;</span>),             <span class="stringliteral">&quot;x-mac-devanagari&quot;</span>,      LG_INDIAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00273"></a>00273         {N_(<span class="stringliteral">&quot;Icelandic (MacIcelandic)&quot;</span>),          <span class="stringliteral">&quot;x-mac-icelandic&quot;</span>,       LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00274"></a>00274         {N_(<span class="stringliteral">&quot;Japanese (EUC-JP)&quot;</span>),                 <span class="stringliteral">&quot;EUC-JP&quot;</span>,                LG_JAPANESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00275"></a>00275         {N_(<span class="stringliteral">&quot;Japanese (ISO-2022-JP)&quot;</span>),            <span class="stringliteral">&quot;ISO-2022-JP&quot;</span>,           LG_JAPANESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00276"></a>00276         {N_(<span class="stringliteral">&quot;Japanese (Shift_JIS)&quot;</span>),              <span class="stringliteral">&quot;Shift_JIS&quot;</span>,             LG_JAPANESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00277"></a>00277         {N_(<span class="stringliteral">&quot;Korean (EUC-KR)&quot;</span>),                   <span class="stringliteral">&quot;EUC-KR&quot;</span>,                LG_KOREAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00278"></a>00278         {N_(<span class="stringliteral">&quot;Korean (ISO-2022-KR)&quot;</span>),              <span class="stringliteral">&quot;ISO-2022-KR&quot;</span>,           LG_KOREAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00279"></a>00279         {N_(<span class="stringliteral">&quot;Korean (JOHAB)&quot;</span>),                    <span class="stringliteral">&quot;x-johab&quot;</span>,               LG_KOREAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00280"></a>00280         {N_(<span class="stringliteral">&quot;Korean (UHC)&quot;</span>),                      <span class="stringliteral">&quot;x-windows-949&quot;</span>,         LG_KOREAN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00281"></a>00281         {N_(<span class="stringliteral">&quot;Nordic (ISO-8859-10)&quot;</span>),              <span class="stringliteral">&quot;ISO-8859-10&quot;</span>,           LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00282"></a>00282         {N_(<span class="stringliteral">&quot;Romanian (MacRomanian)&quot;</span>),            <span class="stringliteral">&quot;x-mac-romanian&quot;</span>,        LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00283"></a>00283         {N_(<span class="stringliteral">&quot;Romanian (ISO-8859-16)&quot;</span>),            <span class="stringliteral">&quot;ISO-8859-16&quot;</span>,           LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00284"></a>00284         {N_(<span class="stringliteral">&quot;South European (ISO-8859-3)&quot;</span>),       <span class="stringliteral">&quot;ISO-8859-3&quot;</span>,            LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00285"></a>00285         {N_(<span class="stringliteral">&quot;Thai (TIS-620)&quot;</span>),                    <span class="stringliteral">&quot;TIS-620&quot;</span>,               LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00286"></a>00286         {N_(<span class="stringliteral">&quot;Turkish (IBM-857)&quot;</span>),                 <span class="stringliteral">&quot;IBM857&quot;</span>,                LG_TURKISH, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00287"></a>00287         {N_(<span class="stringliteral">&quot;Turkish (ISO-8859-9)&quot;</span>),              <span class="stringliteral">&quot;ISO-8859-9&quot;</span>,            LG_TURKISH, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00288"></a>00288         {N_(<span class="stringliteral">&quot;Turkish (MacTurkish)&quot;</span>),              <span class="stringliteral">&quot;x-mac-turkish&quot;</span>,         LG_TURKISH, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00289"></a>00289         {N_(<span class="stringliteral">&quot;Turkish (Windows-1254)&quot;</span>),            <span class="stringliteral">&quot;windows-1254&quot;</span>,          LG_TURKISH, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00290"></a>00290         {N_(<span class="stringliteral">&quot;Unicode (UTF-7)&quot;</span>),                   <span class="stringliteral">&quot;UTF-7&quot;</span>,                 LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00291"></a>00291         {N_(<span class="stringliteral">&quot;Unicode (UTF-8)&quot;</span>),                   <span class="stringliteral">&quot;UTF-8&quot;</span>,                 LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1a343a36bb261bcdfca1fa391026ee3e8f">CI_MAJOR</a>},
<a name="l00292"></a>00292         {N_(<span class="stringliteral">&quot;Unicode (UTF-16BE)&quot;</span>),                <span class="stringliteral">&quot;UTF-16BE&quot;</span>,              LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00293"></a>00293         {N_(<span class="stringliteral">&quot;Unicode (UTF-16LE)&quot;</span>),                <span class="stringliteral">&quot;UTF-16LE&quot;</span>,              LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00294"></a>00294         {N_(<span class="stringliteral">&quot;Unicode (UTF-32BE)&quot;</span>),                <span class="stringliteral">&quot;UTF-32BE&quot;</span>,              LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00295"></a>00295         {N_(<span class="stringliteral">&quot;Unicode (UTF-32LE)&quot;</span>),                <span class="stringliteral">&quot;UTF-32LE&quot;</span>,              LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00296"></a>00296         {N_(<span class="stringliteral">&quot;User Defined&quot;</span>),                      <span class="stringliteral">&quot;x-user-defined&quot;</span>,        LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00297"></a>00297         {N_(<span class="stringliteral">&quot;Vietnamese (TCVN)&quot;</span>),                 <span class="stringliteral">&quot;x-viet-tcvn5712&quot;</span>,       LG_VIETNAMESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00298"></a>00298         {N_(<span class="stringliteral">&quot;Vietnamese (VISCII)&quot;</span>),               <span class="stringliteral">&quot;VISCII&quot;</span>,                LG_VIETNAMESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00299"></a>00299         {N_(<span class="stringliteral">&quot;Vietnamese (VPS)&quot;</span>),                  <span class="stringliteral">&quot;x-viet-vps&quot;</span>,            LG_VIETNAMESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00300"></a>00300         {N_(<span class="stringliteral">&quot;Vietnamese (Windows-1258)&quot;</span>),         <span class="stringliteral">&quot;windows-1258&quot;</span>,          LG_VIETNAMESE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00301"></a>00301         {N_(<span class="stringliteral">&quot;Visual Hebrew (ISO-8859-8)&quot;</span>),        <span class="stringliteral">&quot;ISO-8859-8&quot;</span>,            LG_HEBREW, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00302"></a>00302         {N_(<span class="stringliteral">&quot;Western (IBM-850)&quot;</span>),                 <span class="stringliteral">&quot;IBM850&quot;</span>,                LG_WESTERN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00303"></a>00303         {N_(<span class="stringliteral">&quot;Western (ISO-8859-1)&quot;</span>),              <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,            LG_WESTERN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1a343a36bb261bcdfca1fa391026ee3e8f">CI_MAJOR</a>},
<a name="l00304"></a>00304         {N_(<span class="stringliteral">&quot;Western (ISO-8859-15)&quot;</span>),             <span class="stringliteral">&quot;ISO-8859-15&quot;</span>,           LG_WESTERN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00305"></a>00305         {N_(<span class="stringliteral">&quot;Western (MacRoman)&quot;</span>),                <span class="stringliteral">&quot;x-mac-roman&quot;</span>,           LG_WESTERN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00306"></a>00306         {N_(<span class="stringliteral">&quot;Western (Windows-1252)&quot;</span>),            <span class="stringliteral">&quot;windows-1252&quot;</span>,          LG_WESTERN, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00307"></a>00307         <span class="comment">/* charsets without possibly translatable names */</span>
<a name="l00308"></a>00308         {<span class="stringliteral">&quot;T61.8bit&quot;</span>,                              <span class="stringliteral">&quot;T61.8bit&quot;</span>,              LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00309"></a>00309         {<span class="stringliteral">&quot;x-imap4-modified-utf7&quot;</span>,                 <span class="stringliteral">&quot;x-imap4-modified-utf7&quot;</span>, LG_UNICODE, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00310"></a>00310         {<span class="stringliteral">&quot;x-u-escaped&quot;</span>,                           <span class="stringliteral">&quot;x-u-escaped&quot;</span>,           LG_OTHER, <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1ab652466c74b6b6eb53919239a0c69810">CI_MINOR</a>},
<a name="l00311"></a>00311         {NULL,                                    NULL,                    LG_LAST, 0}
<a name="l00312"></a>00312 };
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 <span class="keyword">static</span> <span class="keywordtype">int</span> charset_order (<span class="keyword">const</span> <span class="keywordtype">void</span> *_a, <span class="keyword">const</span> <span class="keywordtype">void</span> *_b)
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316         <span class="keyword">const</span> <a class="code" href="structCharsetInfo.html">CharsetInfo</a> *a = (<span class="keyword">const</span> <a class="code" href="structCharsetInfo.html">CharsetInfo</a> *)_a;
<a name="l00317"></a>00317         <span class="keyword">const</span> <a class="code" href="structCharsetInfo.html">CharsetInfo</a> *b = (<span class="keyword">const</span> <a class="code" href="structCharsetInfo.html">CharsetInfo</a> *)_b;
<a name="l00318"></a>00318 
<a name="l00319"></a>00319         <span class="keywordflow">if</span> (a-&gt;<a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">lgroup</a> != b-&gt;<a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">lgroup</a>)
<a name="l00320"></a>00320                 <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)b-&gt;<a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">lgroup</a> - (int)a-&gt;<a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">lgroup</a>;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322         if (a-&gt;<a class="code" href="structCharsetInfo.html#a8cb95902370f8b495f7d3896c94147f6">imp</a> != b-&gt;<a class="code" href="structCharsetInfo.html#a8cb95902370f8b495f7d3896c94147f6">imp</a>)
<a name="l00323"></a>00323                 <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)b-&gt;<a class="code" href="structCharsetInfo.html#a8cb95902370f8b495f7d3896c94147f6">imp</a> - (int)a-&gt;<a class="code" href="structCharsetInfo.html#a8cb95902370f8b495f7d3896c94147f6">imp</a>;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325         <span class="keywordflow">return</span> strcmp (a-&gt;<a class="code" href="structCharsetInfo.html#a3207f8911d52a4e447671f267f284e8a">collate_key</a>, b-&gt;<a class="code" href="structCharsetInfo.html#a3207f8911d52a4e447671f267f284e8a">collate_key</a>);
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="comment">/* ------------------------------------------------------------------------- */</span>
<a name="l00329"></a>00329 
<a name="l00330"></a>00330 <span class="keyword">static</span> guint cs_signals[<a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a0c34d85df8279641afad9e3c9b3a54ce">LAST_SIGNAL</a>] = { 0 };
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_set_property      (GObject          *<span class="keywordtype">object</span>,
<a name="l00333"></a>00333                                   guint             prop_id,
<a name="l00334"></a>00334                                   <span class="keyword">const</span> GValue     *value,
<a name="l00335"></a>00335                                   GParamSpec       *pspec);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_get_property      (GObject          *<span class="keywordtype">object</span>,
<a name="l00338"></a>00338                                   guint             prop_id,
<a name="l00339"></a>00339                                   GValue           *value,
<a name="l00340"></a>00340                                   GParamSpec       *pspec);
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="keyword">static</span> gboolean iconv_supported (<span class="keyword">const</span> <span class="keywordtype">char</span> *to, <span class="keyword">const</span> <span class="keywordtype">char</span> *from)
<a name="l00343"></a>00343 {
<a name="l00344"></a>00344         GIConv ic = g_iconv_open (to, from);
<a name="l00345"></a>00345         <span class="keywordflow">if</span> (ic == NULL || ic == (GIConv)-1)
<a name="l00346"></a>00346                 <span class="keywordflow">return</span> FALSE;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348         g_iconv_close (ic);
<a name="l00349"></a>00349         <span class="keywordflow">return</span> TRUE;
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="keyword">const</span> <span class="keywordtype">char</span> * go_charmap_sel_get_encoding_name (G_GNUC_UNUSED <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs,
<a name="l00353"></a>00353                                     <span class="keyword">const</span> <span class="keywordtype">char</span> *encoding)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355         <a class="code" href="structCharsetInfo.html">CharsetInfo</a> <span class="keyword">const</span> *ci;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357         g_return_val_if_fail (encoding != NULL, NULL);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359         ci = g_hash_table_lookup (encoding_hash, encoding);
<a name="l00360"></a>00360         <span class="keywordflow">return</span> ci ? _(ci-&gt;<a class="code" href="structCharsetInfo.html#ab76c922cedb7af43ea2d10e6abfa2a0c">charset_title</a>) : NULL;
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> * get_locale_encoding_name (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs)
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365         <span class="keywordtype">char</span> <span class="keyword">const</span> *locale_encoding;
<a name="l00366"></a>00366         <span class="keywordtype">char</span> <span class="keyword">const</span> *name;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368         g_get_charset (&amp;locale_encoding);
<a name="l00369"></a>00369         name = go_charmap_sel_get_encoding_name (cs, locale_encoding);
<a name="l00370"></a>00370         <span class="keywordflow">return</span> name ? name : locale_encoding;
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 <span class="keyword">static</span> <span class="keywordtype">void</span> encodings_changed_cb (<a class="code" href="struct__GOOptionMenu.html">GOOptionMenu</a> *optionmenu, <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375         g_return_if_fail (<a class="code" href="go-charmap-sel_8h.html#a6047824b054a7bdcfbe0824e1809fbdb">IS_GO_CHARMAP_SEL</a> (cs));
<a name="l00376"></a>00376         g_return_if_fail (optionmenu == cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>);
<a name="l00377"></a>00377 
<a name="l00378"></a>00378         g_signal_emit (G_OBJECT (cs),
<a name="l00379"></a>00379                        cs_signals[<a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a2d46d269c28f1438b81445027ac2fbc0">CHARMAP_CHANGED</a>],
<a name="l00380"></a>00380                        0,
<a name="l00381"></a>00381                        <a class="code" href="go-charmap-sel_8c.html#a17a7ca06cfc5d9a8d0e08f764d50b7f8">go_charmap_sel_get_encoding</a> (cs));
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="keyword">static</span> <span class="keywordtype">void</span> set_menu_to_default (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs, gint item)
<a name="l00385"></a>00385 {
<a name="l00386"></a>00386         GSList sel = { GINT_TO_POINTER (item - 1), NULL};
<a name="l00387"></a>00387 
<a name="l00388"></a>00388         g_return_if_fail (cs != NULL &amp;&amp; <a class="code" href="go-charmap-sel_8h.html#a6047824b054a7bdcfbe0824e1809fbdb">IS_GO_CHARMAP_SEL</a> (cs));
<a name="l00389"></a>00389 
<a name="l00390"></a>00390         <a class="code" href="go-optionmenu_8c.html#a782e70fffc9fb338b491ab5292015a4f">go_option_menu_set_history</a> (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>, &amp;sel);
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="keyword">static</span> gboolean cs_mnemonic_activate (GtkWidget *w, gboolean group_cycling)
<a name="l00394"></a>00394 {
<a name="l00395"></a>00395         <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs = <a class="code" href="go-charmap-sel_8h.html#ab9c1182640953af0f29175052b3301d2">GO_CHARMAP_SEL</a> (w);
<a name="l00396"></a>00396         gtk_widget_grab_focus (GTK_WIDGET (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>));
<a name="l00397"></a>00397         <span class="keywordflow">return</span> TRUE;
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_emphasize_label (GtkLabel *label)
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402         <span class="keywordtype">char</span> *text = g_strconcat (<span class="stringliteral">&quot;&lt;b&gt;&quot;</span>, gtk_label_get_label (label), <span class="stringliteral">&quot;&lt;/b&gt;&quot;</span>, NULL);
<a name="l00403"></a>00403 
<a name="l00404"></a>00404         gtk_label_set_use_underline (label, FALSE);
<a name="l00405"></a>00405         gtk_label_set_use_markup (label, TRUE);
<a name="l00406"></a>00406         gtk_label_set_label (label, text);
<a name="l00407"></a>00407         g_free (text);
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_init (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs)
<a name="l00411"></a>00411 {
<a name="l00412"></a>00412         cs-&gt;<a class="code" href="struct__GOCharmapSel.html#a6258edc5b54d1ac2943c448348b2036f">test</a> = <a class="code" href="go-charmap-sel_8h.html#a758de5be5c36f44240e2a4fb4fcd7912a8d47de8eb25d43aebcf157ed4ab82418">GO_CHARMAP_SEL_TO_UTF8</a>;
<a name="l00413"></a>00413 
<a name="l00414"></a>00414         <span class="comment">/* There is a problem in mk_include as we access</span>
<a name="l00415"></a>00415 <span class="comment">         * go_option_menu_get_type(); through a macro.  So, KEEP this</span>
<a name="l00416"></a>00416 <span class="comment">         * comment to make mk_include happy.  --benj  */</span>
<a name="l00417"></a>00417         cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a> = <a class="code" href="go-optionmenu_8h.html#ad5ed3feee959f2f515aace48cfdf4145">GO_OPTION_MENU</a> (<a class="code" href="go-optionmenu_8c.html#a65b28f33d04bd58f3961f16233e2a907">go_option_menu_new</a> ());
<a name="l00418"></a>00418 
<a name="l00419"></a>00419         g_signal_connect (G_OBJECT (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>), <span class="stringliteral">&quot;changed&quot;</span>,
<a name="l00420"></a>00420                           G_CALLBACK (encodings_changed_cb), cs);
<a name="l00421"></a>00421         gtk_box_pack_start (GTK_BOX (cs), GTK_WIDGET (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>),
<a name="l00422"></a>00422                             TRUE, TRUE, 0);
<a name="l00423"></a>00423 }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_build_menu (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs)
<a name="l00427"></a>00427 {
<a name="l00428"></a>00428         GtkWidget *item;
<a name="l00429"></a>00429         GtkMenu *menu;
<a name="l00430"></a>00430         <a class="code" href="structLGroupInfo.html">LGroupInfo</a> <span class="keyword">const</span> *lgroup = lgroups;
<a name="l00431"></a>00431         gint lg_cnt = 0;
<a name="l00432"></a>00432 
<a name="l00433"></a>00433         menu = GTK_MENU (gtk_menu_new ());
<a name="l00434"></a>00434 
<a name="l00435"></a>00435         <span class="keywordflow">while</span> (lgroup-&gt;<a class="code" href="structLGroupInfo.html#a850ca0480725e307e0fd7ae879bdfcc1">group_name</a>) {
<a name="l00436"></a>00436                 <a class="code" href="structCharsetInfo.html">CharsetInfo</a> <span class="keyword">const</span> *charset_trans;
<a name="l00437"></a>00437                 GtkMenu *submenu;
<a name="l00438"></a>00438                 gint cnt = 0;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440                 item = gtk_menu_item_new_with_label (_(lgroup-&gt;<a class="code" href="structLGroupInfo.html#a850ca0480725e307e0fd7ae879bdfcc1">group_name</a>));
<a name="l00441"></a>00441 
<a name="l00442"></a>00442                 submenu = GTK_MENU (gtk_menu_new ());
<a name="l00443"></a>00443                 charset_trans = charset_trans_array;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445                 <span class="keywordflow">while</span> (charset_trans-&gt;<a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">lgroup</a> != LG_LAST) {
<a name="l00446"></a>00446                         GtkWidget *subitem;
<a name="l00447"></a>00447                         <span class="keywordflow">if</span> (charset_trans-&gt;<a class="code" href="structCharsetInfo.html#a820f039cda853057aede7358a372066f">lgroup</a> == lgroup-&gt;<a class="code" href="structLGroupInfo.html#ac64bc610640dad9a0db5729f0f5b6a4d">lgroup</a>) {
<a name="l00448"></a>00448                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *name = (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#a6258edc5b54d1ac2943c448348b2036f">test</a> == <a class="code" href="go-charmap-sel_8h.html#a758de5be5c36f44240e2a4fb4fcd7912a8d47de8eb25d43aebcf157ed4ab82418">GO_CHARMAP_SEL_TO_UTF8</a>)
<a name="l00449"></a>00449                                         ? charset_trans-&gt;<a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">to_utf8_iconv_name</a>
<a name="l00450"></a>00450                                         : charset_trans-&gt;<a class="code" href="structCharsetInfo.html#ab2301e27c7df88620d2a1ccac08a46a7">from_utf8_iconv_name</a>;
<a name="l00451"></a>00451                                 if (name) {
<a name="l00452"></a>00452                                         subitem = gtk_check_menu_item_new_with_label
<a name="l00453"></a>00453                                                 (_(charset_trans-&gt;<a class="code" href="structCharsetInfo.html#ab76c922cedb7af43ea2d10e6abfa2a0c">charset_title</a>));
<a name="l00454"></a>00454                                         gtk_widget_show (subitem);
<a name="l00455"></a>00455                                         gtk_menu_shell_append ( GTK_MENU_SHELL (submenu), subitem );
<a name="l00456"></a>00456                                         <span class="keywordflow">if</span> (charset_trans-&gt;<a class="code" href="structCharsetInfo.html#a8cb95902370f8b495f7d3896c94147f6">imp</a> == <a class="code" href="go-charmap-sel_8c.html#a70f8d6bd79d25b8f86d16e27dc6e9af1a343a36bb261bcdfca1fa391026ee3e8f">CI_MAJOR</a>)
<a name="l00457"></a>00457                                                 cs_emphasize_label (GTK_LABEL (gtk_bin_get_child (GTK_BIN (subitem))));
<a name="l00458"></a>00458                                         g_object_set_data (G_OBJECT (subitem), <a class="code" href="go-charmap-sel_8c.html#aa2d5961ee58c88d2a88625dac7264112">CHARMAP_NAME_KEY</a>,
<a name="l00459"></a>00459                                                            (gpointer)name);
<a name="l00460"></a>00460                                         cnt++;
<a name="l00461"></a>00461                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0) {
<a name="l00462"></a>00462                                         g_print (<span class="stringliteral">&quot;Unsupported: %s\n&quot;</span>, charset_trans-&gt;<a class="code" href="structCharsetInfo.html#a7895f6da6e540877778378bcac0bfd3e">aliases</a>);
<a name="l00463"></a>00463                                 }
<a name="l00464"></a>00464                         }
<a name="l00465"></a>00465                         charset_trans++;
<a name="l00466"></a>00466                 }
<a name="l00467"></a>00467                 <span class="keywordflow">if</span> (cnt &gt; 0) {
<a name="l00468"></a>00468                         gtk_menu_item_set_submenu ( GTK_MENU_ITEM (item), GTK_WIDGET (submenu) );
<a name="l00469"></a>00469                         gtk_widget_show (item);
<a name="l00470"></a>00470                         gtk_menu_shell_append ( GTK_MENU_SHELL (menu), item );
<a name="l00471"></a>00471                         lg_cnt++;
<a name="l00472"></a>00472                 } <span class="keywordflow">else</span> {
<a name="l00473"></a>00473                         g_object_unref (item);
<a name="l00474"></a>00474                 }
<a name="l00475"></a>00475                 lgroup++;
<a name="l00476"></a>00476         }
<a name="l00477"></a>00477         item = gtk_separator_menu_item_new ();
<a name="l00478"></a>00478         gtk_widget_show (item);
<a name="l00479"></a>00479         gtk_menu_shell_append ( GTK_MENU_SHELL (menu), item );
<a name="l00480"></a>00480         lg_cnt++;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482         {
<a name="l00483"></a>00483                 <span class="keywordtype">char</span> *locale_encoding_menu_title = g_strconcat (_(<span class="stringliteral">&quot;Locale: &quot;</span>),
<a name="l00484"></a>00484                                                               get_locale_encoding_name (cs),
<a name="l00485"></a>00485                                                               NULL);
<a name="l00486"></a>00486                 item = gtk_check_menu_item_new_with_label (locale_encoding_menu_title);
<a name="l00487"></a>00487                 g_free (locale_encoding_menu_title);
<a name="l00488"></a>00488                 gtk_widget_show (item);
<a name="l00489"></a>00489                 gtk_menu_shell_append ( GTK_MENU_SHELL (menu), item );
<a name="l00490"></a>00490                 lg_cnt++;
<a name="l00491"></a>00491                 cs_emphasize_label (GTK_LABEL (gtk_bin_get_child (GTK_BIN (item))));
<a name="l00492"></a>00492         }
<a name="l00493"></a>00493 
<a name="l00494"></a>00494         <a class="code" href="go-optionmenu_8c.html#ab42257d264938db93bcd16dbb6e78ec3">go_option_menu_set_menu</a> (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>, GTK_WIDGET (menu));
<a name="l00495"></a>00495         cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ab31ddccd79af3d634401309b2214d29c">encodings_menu</a> = menu;
<a name="l00496"></a>00496         set_menu_to_default (cs, lg_cnt);
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_class_init (GtkWidgetClass *widget_klass)
<a name="l00500"></a>00500 {
<a name="l00501"></a>00501         <a class="code" href="structCharsetInfo.html">CharsetInfo</a> *ci;
<a name="l00502"></a>00502         <span class="keywordtype">size_t</span> i;
<a name="l00503"></a>00503 
<a name="l00504"></a>00504         GObjectClass *gobject_class = G_OBJECT_CLASS (widget_klass);
<a name="l00505"></a>00505         widget_klass-&gt;mnemonic_activate = cs_mnemonic_activate;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507         gobject_class-&gt;set_property = cs_set_property;
<a name="l00508"></a>00508         gobject_class-&gt;get_property = cs_get_property;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510         cs_signals[<a class="code" href="go-charmap-sel_8c.html#a99fb83031ce9923c84392b4e92f956b5a2d46d269c28f1438b81445027ac2fbc0">CHARMAP_CHANGED</a>] =
<a name="l00511"></a>00511                 g_signal_new (<span class="stringliteral">&quot;charmap_changed&quot;</span>,
<a name="l00512"></a>00512                               <a class="code" href="go-charmap-sel_8h.html#ac6cf70df7480c351ce26c60b6c5c70c1">GO_CHARMAP_SEL_TYPE</a>,
<a name="l00513"></a>00513                               G_SIGNAL_RUN_LAST,
<a name="l00514"></a>00514                               G_STRUCT_OFFSET (<a class="code" href="structGOCharmapSelClass.html">GOCharmapSelClass</a>, charmap_changed),
<a name="l00515"></a>00515                               NULL, NULL,
<a name="l00516"></a>00516                               g_cclosure_marshal_VOID__POINTER,
<a name="l00517"></a>00517                               G_TYPE_NONE, 1, G_TYPE_POINTER);
<a name="l00518"></a>00518 
<a name="l00519"></a>00519         g_object_class_install_property (gobject_class,
<a name="l00520"></a>00520                                          <a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04a625d5a11efb0a06be0cda62720db125d">PROP_TEST_DIRECTION</a>,
<a name="l00521"></a>00521                                          g_param_spec_uint (<span class="stringliteral">&quot;TestDirection&quot;</span>,
<a name="l00522"></a>00522                                                             _(<span class="stringliteral">&quot;Conversion Direction&quot;</span>),
<a name="l00523"></a>00523                                                             _(<span class="stringliteral">&quot;This value determines which iconv test to perform.&quot;</span>),
<a name="l00524"></a>00524                                                             (guint)<a class="code" href="go-charmap-sel_8h.html#a758de5be5c36f44240e2a4fb4fcd7912a8d47de8eb25d43aebcf157ed4ab82418">GO_CHARMAP_SEL_TO_UTF8</a>,
<a name="l00525"></a>00525                                                             (guint)<a class="code" href="go-charmap-sel_8h.html#a758de5be5c36f44240e2a4fb4fcd7912a1d7f51cea57d63a621d84cfa53d2152d">GO_CHARMAP_SEL_FROM_UTF8</a>,
<a name="l00526"></a>00526                                                             (guint)GO_CHARMAP_SEL_TO_UTF8,
<a name="l00527"></a>00527                                                             G_PARAM_READWRITE));
<a name="l00528"></a>00528 
<a name="l00529"></a>00529         <span class="comment">/* ---------------------------------------- */</span>
<a name="l00530"></a>00530         <span class="comment">/* Sort the groups by translated name.  */</span>
<a name="l00531"></a>00531 
<a name="l00532"></a>00532         <span class="keywordflow">for</span> (i = 0; i &lt; G_N_ELEMENTS (lgroups) - 2; i++) {
<a name="l00533"></a>00533                 <span class="keyword">const</span> <span class="keywordtype">char</span> *cgroup_name = lgroups[i].<a class="code" href="structLGroupInfo.html#a850ca0480725e307e0fd7ae879bdfcc1">group_name</a>;
<a name="l00534"></a>00534                 <span class="keyword">const</span> <span class="keywordtype">char</span> *group_name = _(cgroup_name);
<a name="l00535"></a>00535                 lgroups[i].<a class="code" href="structLGroupInfo.html#acde944e9ed66c9d6ecf420474e4fbcec">collate_key</a> = g_utf8_collate_key (group_name, -1);
<a name="l00536"></a>00536                 <span class="keywordflow">if</span> (!lgroups[i].collate_key) {
<a name="l00537"></a>00537                         g_warning (<span class="stringliteral">&quot;Failed to generate collation key for [%s] [%s]&quot;</span>,
<a name="l00538"></a>00538                                    cgroup_name, group_name);
<a name="l00539"></a>00539                         <span class="keywordflow">if</span> ( lgroups[i].collate_key ) 
<a name="l00540"></a>00540                              g_free ( lgroups[i].collate_key );
<a name="l00541"></a>00541                         lgroups[i].<a class="code" href="structLGroupInfo.html#acde944e9ed66c9d6ecf420474e4fbcec">collate_key</a> = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (group_name);
<a name="l00542"></a>00542                 }
<a name="l00543"></a>00543         }
<a name="l00544"></a>00544         qsort (lgroups, G_N_ELEMENTS (lgroups) - 2, <span class="keyword">sizeof</span> (lgroups[0]),
<a name="l00545"></a>00545                lgroups_order);
<a name="l00546"></a>00546         <span class="keywordflow">for</span> (i = 0; i &lt; G_N_ELEMENTS (lgroups) - 2; i++) {
<a name="l00547"></a>00547                 g_free (lgroups[i].collate_key);
<a name="l00548"></a>00548                 lgroups[i].<a class="code" href="structLGroupInfo.html#acde944e9ed66c9d6ecf420474e4fbcec">collate_key</a> = NULL;
<a name="l00549"></a>00549         }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551         <span class="comment">/* ---------------------------------------- */</span>
<a name="l00552"></a>00552         <span class="comment">/* Sort charsets by group/importance/title.  */</span>
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="keywordflow">for</span> (i = 0; i &lt; G_N_ELEMENTS (charset_trans_array) - 1; i++) {
<a name="l00555"></a>00555                 <span class="keyword">const</span> <span class="keywordtype">char</span> *ctitle = charset_trans_array[i].<a class="code" href="structCharsetInfo.html#ab76c922cedb7af43ea2d10e6abfa2a0c">charset_title</a>;
<a name="l00556"></a>00556                 <span class="keyword">const</span> <span class="keywordtype">char</span> *title = _(ctitle);
<a name="l00557"></a>00557                 charset_trans_array[i].<a class="code" href="structCharsetInfo.html#a3207f8911d52a4e447671f267f284e8a">collate_key</a> = g_utf8_collate_key (title, -1);
<a name="l00558"></a>00558                 <span class="keywordflow">if</span> (!charset_trans_array[i].collate_key) {
<a name="l00559"></a>00559                         g_warning (<span class="stringliteral">&quot;Failed to generate collation key for [%s] [%s]&quot;</span>,
<a name="l00560"></a>00560                                    ctitle, title);
<a name="l00561"></a>00561                         <span class="keywordflow">if</span> ( charset_trans_array[i].collate_key ) 
<a name="l00562"></a>00562                             g_free ( charset_trans_array[i].collate_key );
<a name="l00563"></a>00563                         charset_trans_array[i].<a class="code" href="structCharsetInfo.html#a3207f8911d52a4e447671f267f284e8a">collate_key</a> = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (title);
<a name="l00564"></a>00564                 }
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566         qsort (charset_trans_array, G_N_ELEMENTS (charset_trans_array) - 1,
<a name="l00567"></a>00567                <span class="keyword">sizeof</span> (charset_trans_array[0]), charset_order);
<a name="l00568"></a>00568         <span class="keywordflow">for</span> (i = 0; i &lt; G_N_ELEMENTS (charset_trans_array) - 1; i++) {
<a name="l00569"></a>00569                 g_free (charset_trans_array[i].collate_key);
<a name="l00570"></a>00570                 charset_trans_array[i].<a class="code" href="structCharsetInfo.html#a3207f8911d52a4e447671f267f284e8a">collate_key</a> = NULL;
<a name="l00571"></a>00571         }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573         <span class="comment">/* ---------------------------------------- */</span>
<a name="l00574"></a>00574 
<a name="l00575"></a>00575         encoding_hash =
<a name="l00576"></a>00576                 g_hash_table_new_full (g_str_hash,
<a name="l00577"></a>00577                                        g_str_equal,
<a name="l00578"></a>00578                                        (GDestroyNotify)g_free,
<a name="l00579"></a>00579                                        NULL);
<a name="l00580"></a>00580 
<a name="l00581"></a>00581         <span class="keywordflow">for</span> (ci = charset_trans_array; ci-&gt;<a class="code" href="structCharsetInfo.html#ab76c922cedb7af43ea2d10e6abfa2a0c">charset_title</a>; ci++) {
<a name="l00582"></a>00582                 <span class="keyword">const</span> <span class="keywordtype">char</span> *aliases = ci-&gt;<a class="code" href="structCharsetInfo.html#a7895f6da6e540877778378bcac0bfd3e">aliases</a>;
<a name="l00583"></a>00583                 <span class="keywordtype">char</span> *autoaliases = NULL;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585                 <span class="keywordflow">if</span> (strchr (aliases, <span class="charliteral">&#39;#&#39;</span>) == 0) {
<a name="l00586"></a>00586                         <span class="comment">/* Sigh.  This sucks quite a lot.  */</span>
<a name="l00587"></a>00587                         <span class="keywordflow">if</span> (strncmp (aliases, <span class="stringliteral">&quot;ISO-&quot;</span>, 4) == 0) {
<a name="l00588"></a>00588                                 autoaliases =
<a name="l00589"></a>00589                                         g_strconcat (aliases,
<a name="l00590"></a>00590                                                      <span class="stringliteral">&quot;#ISO&quot;</span>, aliases + 4,
<a name="l00591"></a>00591                                                      <span class="stringliteral">&quot;#ISO_&quot;</span>, aliases + 4,
<a name="l00592"></a>00592                                                      NULL);
<a name="l00593"></a>00593                         }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595                         <span class="keywordflow">if</span> (autoaliases)
<a name="l00596"></a>00596                                 aliases = autoaliases;
<a name="l00597"></a>00597                 }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599                 ci-&gt;<a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">to_utf8_iconv_name</a> = ci-&gt;<a class="code" href="structCharsetInfo.html#ab2301e27c7df88620d2a1ccac08a46a7">from_utf8_iconv_name</a> = NULL;
<a name="l00600"></a>00600                 <span class="keywordflow">while</span> (aliases) {
<a name="l00601"></a>00601                         <span class="keyword">const</span> <span class="keywordtype">char</span> *sep = strchr (aliases, <span class="charliteral">&#39;#&#39;</span>);
<a name="l00602"></a>00602                         <span class="keywordtype">char</span> *alias;
<a name="l00603"></a>00603 
<a name="l00604"></a>00604                         <span class="keywordflow">if</span> (sep) {
<a name="l00605"></a>00605                                 alias = g_strndup (aliases, sep - aliases);
<a name="l00606"></a>00606                                 aliases = sep + 1;
<a name="l00607"></a>00607                         } <span class="keywordflow">else</span> {
<a name="l00608"></a>00608                                 alias = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (aliases);
<a name="l00609"></a>00609                                 aliases = NULL;
<a name="l00610"></a>00610                         }
<a name="l00611"></a>00611 
<a name="l00612"></a>00612                         <span class="keywordflow">if</span> (ci-&gt;<a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">to_utf8_iconv_name</a> == NULL &amp;&amp;
<a name="l00613"></a>00613                             iconv_supported (<span class="stringliteral">&quot;UTF-8&quot;</span>, alias)) {
<a name="l00614"></a>00614                                 <span class="keywordflow">if</span> ( ci-&gt;<a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">to_utf8_iconv_name</a> )
<a name="l00615"></a>00615                                     g_free ( ci-&gt;<a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">to_utf8_iconv_name</a> );
<a name="l00616"></a>00616                                 ci-&gt;<a class="code" href="structCharsetInfo.html#a19ba916ae24c200553e67035284fe06c">to_utf8_iconv_name</a> = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (alias);
<a name="l00617"></a>00617                         }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619                         <span class="keywordflow">if</span> (ci-&gt;<a class="code" href="structCharsetInfo.html#ab2301e27c7df88620d2a1ccac08a46a7">from_utf8_iconv_name</a> == NULL &amp;&amp;
<a name="l00620"></a>00620                             iconv_supported (alias, <span class="stringliteral">&quot;UTF-8&quot;</span>)) {
<a name="l00621"></a>00621                                 <span class="keywordflow">if</span> ( ci-&gt;<a class="code" href="structCharsetInfo.html#ab2301e27c7df88620d2a1ccac08a46a7">from_utf8_iconv_name</a> )
<a name="l00622"></a>00622                                     g_free ( ci-&gt;<a class="code" href="structCharsetInfo.html#ab2301e27c7df88620d2a1ccac08a46a7">from_utf8_iconv_name</a> );
<a name="l00623"></a>00623                                 ci-&gt;<a class="code" href="structCharsetInfo.html#ab2301e27c7df88620d2a1ccac08a46a7">from_utf8_iconv_name</a> = <a class="code" href="utils__str_8c.html#ad9a37361694eeaa2847b0fe11389824d">my_strdup</a> (alias);
<a name="l00624"></a>00624                         }
<a name="l00625"></a>00625 
<a name="l00626"></a>00626                         g_hash_table_insert (encoding_hash, alias, ci);
<a name="l00627"></a>00627                 }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629                 g_free (autoaliases);
<a name="l00630"></a>00630         }
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 
<a name="l00633"></a><a class="code" href="go-charmap-sel_8h.html#a68d9a2dfcd7e29cf4585e4d830abfba4">00633</a> GtkWidget * <a class="code" href="go-charmap-sel_8c.html#a68d9a2dfcd7e29cf4585e4d830abfba4">go_charmap_sel_new</a> (<a class="code" href="go-charmap-sel_8h.html#a758de5be5c36f44240e2a4fb4fcd7912">GOCharmapSelTestDirection</a> test)
<a name="l00634"></a>00634 {
<a name="l00635"></a>00635         <span class="keywordflow">return</span> g_object_new (<a class="code" href="go-charmap-sel_8h.html#ac6cf70df7480c351ce26c60b6c5c70c1">GO_CHARMAP_SEL_TYPE</a>, <span class="stringliteral">&quot;TestDirection&quot;</span>, test, NULL);
<a name="l00636"></a>00636 }
<a name="l00637"></a>00637 
<a name="l00638"></a><a class="code" href="go-charmap-sel_8h.html#a17a7ca06cfc5d9a8d0e08f764d50b7f8">00638</a> gchar <span class="keyword">const</span> * <a class="code" href="go-charmap-sel_8c.html#a17a7ca06cfc5d9a8d0e08f764d50b7f8">go_charmap_sel_get_encoding</a> (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs)
<a name="l00639"></a>00639 {
<a name="l00640"></a>00640     GtkMenuItem *selection;
<a name="l00641"></a>00641     <span class="keywordtype">char</span> <span class="keyword">const</span> *locale_encoding;
<a name="l00642"></a>00642     <span class="keywordtype">char</span> <span class="keyword">const</span> *encoding;
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     g_get_charset (&amp;locale_encoding);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     g_return_val_if_fail (<a class="code" href="go-charmap-sel_8h.html#a6047824b054a7bdcfbe0824e1809fbdb">IS_GO_CHARMAP_SEL</a> (cs), locale_encoding);
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     selection = GTK_MENU_ITEM (<a class="code" href="go-optionmenu_8c.html#aa1e286812b1e20892052fbd0d1ba96fd">go_option_menu_get_history</a> (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>));
<a name="l00649"></a>00649     encoding = (<span class="keywordtype">char</span> <span class="keyword">const</span> *) g_object_get_data (G_OBJECT (selection),
<a name="l00650"></a>00650                                                  <a class="code" href="go-charmap-sel_8c.html#aa2d5961ee58c88d2a88625dac7264112">CHARMAP_NAME_KEY</a>);
<a name="l00651"></a>00651     <span class="keywordflow">return</span> encoding ? encoding : locale_encoding;
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structcb__find__entry.html">cb_find_entry</a> (GtkMenuItem *w, <span class="keyword">struct</span> <a class="code" href="structcb__find__entry.html">cb_find_entry</a> *cl)
<a name="l00655"></a>00655 {
<a name="l00656"></a>00656         GtkWidget *sub;
<a name="l00657"></a>00657 
<a name="l00658"></a>00658         <span class="keywordflow">if</span> (cl-&gt;<a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">found</a>)
<a name="l00659"></a>00659                 <span class="keywordflow">return</span>;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661         sub = gtk_menu_item_get_submenu (w);
<a name="l00662"></a>00662         <span class="keywordflow">if</span> (sub) {
<a name="l00663"></a>00663                 GSList *tmp = cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a> = g_slist_prepend (cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>, GINT_TO_POINTER (cl-&gt;<a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a>));
<a name="l00664"></a>00664                 cl-&gt;<a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a> = 0;
<a name="l00665"></a>00665 
<a name="l00666"></a>00666                 gtk_container_foreach (GTK_CONTAINER (sub), (GtkCallback)<a class="code" href="structcb__find__entry.html">cb_find_entry</a>, cl);
<a name="l00667"></a>00667                 <span class="keywordflow">if</span> (cl-&gt;<a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">found</a>)
<a name="l00668"></a>00668                         <span class="keywordflow">return</span>;
<a name="l00669"></a>00669                 
<a name="l00670"></a>00670                 cl-&gt;<a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a> = GPOINTER_TO_INT (cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>-&gt;data);
<a name="l00671"></a>00671                 cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a> = cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>-&gt;next;
<a name="l00672"></a>00672                 g_slist_free_1 (tmp);
<a name="l00673"></a>00673         } <span class="keywordflow">else</span> {
<a name="l00674"></a>00674                 <span class="keyword">const</span> <span class="keywordtype">char</span> *this_enc =
<a name="l00675"></a>00675                         g_object_get_data (G_OBJECT (w), <a class="code" href="go-charmap-sel_8c.html#aa2d5961ee58c88d2a88625dac7264112">CHARMAP_NAME_KEY</a>);
<a name="l00676"></a>00676                 <span class="keywordflow">if</span> (this_enc &amp;&amp; strcmp (this_enc, cl-&gt;<a class="code" href="structcb__find__entry.html#a53aa5270e1d5b5f0c2df8c232cd696cb">enc</a>) == 0) {
<a name="l00677"></a>00677                         cl-&gt;<a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">found</a> = TRUE;
<a name="l00678"></a>00678                         cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a> = g_slist_prepend (cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>, GINT_TO_POINTER (cl-&gt;<a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a>));
<a name="l00679"></a>00679                         cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a> = g_slist_reverse (cl-&gt;<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>);
<a name="l00680"></a>00680                         <span class="keywordflow">return</span>;
<a name="l00681"></a>00681                 }
<a name="l00682"></a>00682         }
<a name="l00683"></a>00683         cl-&gt;<a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a>++;
<a name="l00684"></a>00684 }
<a name="l00685"></a>00685 
<a name="l00686"></a>00686 <span class="comment">/* </span>
<a name="l00687"></a>00687 <span class="comment"> * TODO dOm : this function seems not to be used :</span>
<a name="l00688"></a>00688 <span class="comment"> * warning: ‘go_charmap_sel_set_encoding’ defined but not used</span>
<a name="l00689"></a>00689 <span class="comment"> * Is it possible to remove it ? */</span>
<a name="l00690"></a><a class="code" href="go-charmap-sel_8h.html#afaad94b300355324942ac3632d75377b">00690</a> gboolean <a class="code" href="go-charmap-sel_8c.html#afaad94b300355324942ac3632d75377b">go_charmap_sel_set_encoding</a> (<a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs, <span class="keyword">const</span> <span class="keywordtype">char</span> *enc)
<a name="l00691"></a>00691 {
<a name="l00692"></a>00692         <span class="keyword">struct </span><a class="code" href="structcb__find__entry.html">cb_find_entry</a> cl;
<a name="l00693"></a>00693         <a class="code" href="structCharsetInfo.html">CharsetInfo</a> <span class="keyword">const</span> *ci;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695         g_return_val_if_fail (<a class="code" href="go-charmap-sel_8h.html#a6047824b054a7bdcfbe0824e1809fbdb">IS_GO_CHARMAP_SEL</a> (cs), FALSE);
<a name="l00696"></a>00696         g_return_val_if_fail (enc != NULL, FALSE);
<a name="l00697"></a>00697 
<a name="l00698"></a>00698         ci = g_hash_table_lookup (encoding_hash, enc);
<a name="l00699"></a>00699         <span class="keywordflow">if</span> (!ci)
<a name="l00700"></a>00700                 <span class="keywordflow">return</span> FALSE;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702         enc = ci-&gt;to_utf8_iconv_name;
<a name="l00703"></a>00703         <span class="keywordflow">if</span> (!enc)
<a name="l00704"></a>00704                 <span class="keywordflow">return</span> FALSE;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706         cl.<a class="code" href="structcb__find__entry.html#a53aa5270e1d5b5f0c2df8c232cd696cb">enc</a> = enc;
<a name="l00707"></a>00707         cl.<a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">found</a> = FALSE;
<a name="l00708"></a>00708         cl.<a class="code" href="structcb__find__entry.html#a13d741e057687aa2571f57f2e4a9e8ee">i</a> = 0;
<a name="l00709"></a>00709         cl.<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a> = NULL;
<a name="l00710"></a>00710 
<a name="l00711"></a>00711         gtk_container_foreach (GTK_CONTAINER (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ab31ddccd79af3d634401309b2214d29c">encodings_menu</a>),
<a name="l00712"></a>00712                                (GtkCallback)<a class="code" href="structcb__find__entry.html">cb_find_entry</a>,
<a name="l00713"></a>00713                                &amp;cl);
<a name="l00714"></a>00714         <span class="keywordflow">if</span> (!cl.<a class="code" href="structcb__find__entry.html#ab3f2bc990f468ee8869f102d3e55a117">found</a>)
<a name="l00715"></a>00715                 <span class="keywordflow">return</span> FALSE;
<a name="l00716"></a>00716 
<a name="l00717"></a>00717         <a class="code" href="go-optionmenu_8c.html#a782e70fffc9fb338b491ab5292015a4f">go_option_menu_set_history</a> (cs-&gt;<a class="code" href="struct__GOCharmapSel.html#ae808b4b1705da8b7e3b75a99f31d5c6c">encodings</a>, cl.<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>);
<a name="l00718"></a>00718         g_slist_free (cl.<a class="code" href="structcb__find__entry.html#a439266ccf79e1b44ef78cf2de0211c56">path</a>);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720         <span class="keywordflow">return</span> TRUE;
<a name="l00721"></a>00721 }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_set_property (GObject      *<span class="keywordtype">object</span>,
<a name="l00725"></a>00725                  guint         prop_id,
<a name="l00726"></a>00726                  <span class="keyword">const</span> GValue *value,
<a name="l00727"></a>00727                  GParamSpec   *pspec)
<a name="l00728"></a>00728 {
<a name="l00729"></a>00729         <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs = <a class="code" href="go-charmap-sel_8h.html#ab9c1182640953af0f29175052b3301d2">GO_CHARMAP_SEL</a> (<span class="keywordtype">object</span>);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731         <span class="keywordflow">switch</span> (prop_id) {
<a name="l00732"></a>00732         <span class="keywordflow">case</span> <a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04a625d5a11efb0a06be0cda62720db125d">PROP_TEST_DIRECTION</a>:
<a name="l00733"></a>00733                 cs-&gt;<a class="code" href="struct__GOCharmapSel.html#a6258edc5b54d1ac2943c448348b2036f">test</a> = g_value_get_uint (value);
<a name="l00734"></a>00734                 cs_build_menu (cs);
<a name="l00735"></a>00735                 <span class="keywordflow">break</span>;
<a name="l00736"></a>00736         <span class="keywordflow">default</span>:
<a name="l00737"></a>00737                 G_OBJECT_WARN_INVALID_PROPERTY_ID (<span class="keywordtype">object</span>, prop_id, pspec);
<a name="l00738"></a>00738                 <span class="keywordflow">break</span>;
<a name="l00739"></a>00739         }
<a name="l00740"></a>00740 }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742 
<a name="l00743"></a>00743 <span class="keyword">static</span> <span class="keywordtype">void</span> cs_get_property (GObject     *<span class="keywordtype">object</span>,
<a name="l00744"></a>00744                  guint        prop_id,
<a name="l00745"></a>00745                  GValue      *value,
<a name="l00746"></a>00746                  GParamSpec  *pspec)
<a name="l00747"></a>00747 {
<a name="l00748"></a>00748         <a class="code" href="struct__GOCharmapSel.html">GOCharmapSel</a> *cs = <a class="code" href="go-charmap-sel_8h.html#ab9c1182640953af0f29175052b3301d2">GO_CHARMAP_SEL</a> (<span class="keywordtype">object</span>);
<a name="l00749"></a>00749 
<a name="l00750"></a>00750         <span class="keywordflow">switch</span> (prop_id) {
<a name="l00751"></a>00751         <span class="keywordflow">case</span> <a class="code" href="go-charmap-sel_8c.html#abc6126af1d45847bc59afa0aa3216b04a625d5a11efb0a06be0cda62720db125d">PROP_TEST_DIRECTION</a>:
<a name="l00752"></a>00752                 g_value_set_uint (value, (guint)cs-&gt;<a class="code" href="struct__GOCharmapSel.html#a6258edc5b54d1ac2943c448348b2036f">test</a>);
<a name="l00753"></a>00753                 <span class="keywordflow">break</span>;
<a name="l00754"></a>00754         <span class="keywordflow">default</span>:
<a name="l00755"></a>00755                 G_OBJECT_WARN_INVALID_PROPERTY_ID (<span class="keywordtype">object</span>, prop_id, pspec);
<a name="l00756"></a>00756                 <span class="keywordflow">break</span>;
<a name="l00757"></a>00757         }
<a name="l00758"></a>00758 }
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Généré le Sat Aug 7 22:12:01 2010 pour Grisbi par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
