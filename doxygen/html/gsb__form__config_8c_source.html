<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Grisbi:  Fichier source de gsb_form_config.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&nbsp;associées</span></a></li>
      <li><a href="annotated.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
    </ul>
  </div>
<h1>gsb_form_config.c</h1><a href="gsb__form__config_8c.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ************************************************************************** */</span>
<a name="l00002"></a>00002 <span class="comment">/*                                                                            */</span>
<a name="l00003"></a>00003 <span class="comment">/*     copyright (c)    2000-2008 Cédric Auger (cedric@grisbi.org)               */</span>
<a name="l00004"></a>00004 <span class="comment">/*                      2004-2008 Benjamin Drieu (bdrieu@april.org)                       */</span>
<a name="l00005"></a>00005 <span class="comment">/*                      http://www.grisbi.org                                                         */</span>
<a name="l00006"></a>00006 <span class="comment">/*                                                                            */</span>
<a name="l00007"></a>00007 <span class="comment">/*  This program is free software; you can redistribute it and/or modify      */</span>
<a name="l00008"></a>00008 <span class="comment">/*  it under the terms of the GNU General Public License as published by      */</span>
<a name="l00009"></a>00009 <span class="comment">/*  the Free Software Foundation; either version 2 of the License, or         */</span>
<a name="l00010"></a>00010 <span class="comment">/*  (at your option) any later version.                                       */</span>
<a name="l00011"></a>00011 <span class="comment">/*                                                                            */</span>
<a name="l00012"></a>00012 <span class="comment">/*  This program is distributed in the hope that it will be useful,           */</span>
<a name="l00013"></a>00013 <span class="comment">/*  but WITHOUT ANY WARRANTY; without even the implied warranty of            */</span>
<a name="l00014"></a>00014 <span class="comment">/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             */</span>
<a name="l00015"></a>00015 <span class="comment">/*  GNU General Public License for more details.                              */</span>
<a name="l00016"></a>00016 <span class="comment">/*                                                                            */</span>
<a name="l00017"></a>00017 <span class="comment">/*  You should have received a copy of the GNU General Public License         */</span>
<a name="l00018"></a>00018 <span class="comment">/*  along with this program; if not, write to the Free Software               */</span>
<a name="l00019"></a>00019 <span class="comment">/*  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */</span>
<a name="l00020"></a>00020 <span class="comment">/*                                                                            */</span>
<a name="l00021"></a>00021 <span class="comment">/* ************************************************************************** */</span>
<a name="l00022"></a>00022 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">/*START_INCLUDE*/</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="gsb__form__config_8h.html">gsb_form_config.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="utils_8h.html">utils.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="dialog_8h.html">dialog.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="gsb__account_8h.html">gsb_account.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="gsb__automem_8h.html">gsb_automem.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__account_8h.html">gsb_data_account.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__form_8h.html">gsb_data_form.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="gsb__form_8h.html">gsb_form.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="gsb__form__widget_8h.html">gsb_form_widget.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="navigation_8h.html">navigation.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="utils__str_8h.html">utils_str.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="traitement__variables_8h.html">traitement_variables.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="gsb__data__form_8h.html">gsb_data_form.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="structures_8h.html">structures.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="comment">/*END_INCLUDE*/</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment">/*START_STATIC*/</span>
<a name="l00049"></a>00049 <span class="keyword">static</span> gboolean gsb_form_config_add_column ( <span class="keywordtype">void</span> );
<a name="l00050"></a>00050 <span class="keyword">static</span> gboolean gsb_form_config_add_line ( <span class="keywordtype">void</span> );
<a name="l00051"></a>00051 <span class="keyword">static</span> gboolean gsb_form_config_change_account_choice ( GtkWidget *combobox,
<a name="l00052"></a>00052                                                  gpointer null );
<a name="l00053"></a>00053 <span class="keyword">static</span> gboolean gsb_form_config_change_column_size ( GtkWidget *tree_view,
<a name="l00054"></a>00054                                               GtkAllocation *allocation,
<a name="l00055"></a>00055                                               gpointer null );
<a name="l00056"></a>00056 <span class="keyword">static</span> gboolean gsb_form_config_check_for_removing ( gint account_number,
<a name="l00057"></a>00057                                               gint removing_row );
<a name="l00058"></a>00058 <span class="keyword">static</span> GtkWidget *gsb_form_config_create_buttons_table ( <span class="keywordtype">void</span> );
<a name="l00059"></a>00059 <span class="keyword">static</span> GtkWidget *gsb_form_config_create_sizing_buttons_line ( <span class="keywordtype">void</span> );
<a name="l00060"></a>00060 <span class="keyword">static</span> GtkListStore *gsb_form_config_create_store ( <span class="keywordtype">void</span> );
<a name="l00061"></a>00061 <span class="keyword">static</span> GtkWidget *gsb_form_config_create_tree_view ( GtkListStore *store );
<a name="l00062"></a>00062 <span class="keyword">static</span> gboolean gsb_form_config_drag_begin ( GtkWidget *tree_view,
<a name="l00063"></a>00063                                       GdkDragContext *drag_context,
<a name="l00064"></a>00064                                       gpointer null );
<a name="l00065"></a>00065 <span class="keyword">static</span> gboolean gsb_form_config_drag_end ( GtkWidget *tree_view,
<a name="l00066"></a>00066                                     GdkDragContext *drag_context,
<a name="l00067"></a>00067                                     gpointer null );
<a name="l00068"></a>00068 <span class="keyword">static</span> gboolean gsb_form_config_fill_store ( gint account_number );
<a name="l00069"></a>00069 <span class="keyword">static</span> <span class="keywordtype">void</span> gsb_form_config_make_configuration_box ( GtkWidget *vbox_parent );
<a name="l00070"></a>00070 <span class="keyword">static</span> gboolean gsb_form_config_realized ( GtkWidget *tree_view,
<a name="l00071"></a>00071                                     gpointer null );
<a name="l00072"></a>00072 <span class="keyword">static</span> gboolean gsb_form_config_remove_column ( <span class="keywordtype">void</span> );
<a name="l00073"></a>00073 <span class="keyword">static</span> gboolean gsb_form_config_remove_line ( <span class="keywordtype">void</span> );
<a name="l00074"></a>00074 <span class="keyword">static</span> gboolean gsb_form_config_toggle_element_button ( GtkWidget *toggle_button );
<a name="l00075"></a>00075 <span class="keyword">static</span> gboolean gsb_form_config_update_form_config ( gint account_number );
<a name="l00076"></a>00076 <span class="comment">/*END_STATIC*/</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">/*START_EXTERN*/</span>
<a name="l00079"></a>00079 <span class="keyword">extern</span> GtkWidget *<a class="code" href="accueil_8c.html#afb5de72ed97c05cc117b44cf61adfb86">form_transaction_part</a>;
<a name="l00080"></a>00080 <span class="keyword">extern</span> gint <a class="code" href="gsb__form_8c.html#ae4729003de616a56e4a3f22732d2061f">saved_allocation_size</a>;
<a name="l00081"></a>00081 <span class="keyword">extern</span> GtkWidget *<a class="code" href="accueil_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>;
<a name="l00082"></a>00082 <span class="comment">/*END_EXTERN*/</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00087"></a>00087 <span class="keyword">static</span> gint start_drag_column;
<a name="l00088"></a>00088 <span class="keyword">static</span> gint start_drag_row;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/* buttons to config the form */</span>
<a name="l00091"></a>00091 <span class="keyword">static</span> GtkWidget *form_config_buttons[<a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0afe4e95e3f2c92829d49740981b2e0c44">TRANSACTION_FORM_WIDGET_NB</a>-3];
<a name="l00092"></a>00092 
<a name="l00094"></a>00094 <span class="keyword">static</span> GtkWidget *accounts_combobox;
<a name="l00095"></a>00095 
<a name="l00097"></a>00097 <span class="keyword">static</span> GtkWidget *form_config_tree_view;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00109"></a><a class="code" href="gsb__form__config_8h.html#a18d33ebc2a3da624ca405227c6db0a4f">00109</a> GtkWidget *<a class="code" href="gsb__form__config_8c.html#a18d33ebc2a3da624ca405227c6db0a4f">gsb_form_config_create_page</a> ( <span class="keywordtype">void</span> )
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111     GtkWidget *vbox_pref;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     vbox_pref = <a class="code" href="utils_8c.html#a3baab3fba6974f2ebf35757198ac8911">new_vbox_with_title_and_icon</a> ( _(<span class="stringliteral">&quot;Transaction form&quot;</span>), <span class="stringliteral">&quot;form.png&quot;</span> );
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* add the page into the box */</span>
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     gsb_form_config_make_configuration_box (vbox_pref);
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="keywordflow">if</span> ( !<a class="code" href="gsb__data__account_8c.html#a56c9a589563db8c15800e41378908b27">gsb_data_account_get_accounts_amount</a> () )
<a name="l00120"></a>00120     {
<a name="l00121"></a>00121         gtk_widget_set_sensitive ( vbox_pref, FALSE );
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     <span class="keywordflow">return</span> vbox_pref;
<a name="l00125"></a>00125 }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 
<a name="l00136"></a>00136 <span class="keywordtype">void</span> gsb_form_config_make_configuration_box ( GtkWidget *vbox_parent )
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     GtkWidget *sw;
<a name="l00139"></a>00139     GtkWidget *hbox;
<a name="l00140"></a>00140     GtkWidget *paddingbox;
<a name="l00141"></a>00141     GtkListStore* list_store;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <span class="comment">/* create the paddingbox into the parent */</span>
<a name="l00144"></a>00144     paddingbox = <a class="code" href="utils_8c.html#a22ba81fcf046b5bec6cf6d55d440abc5">new_paddingbox_with_title</a> ( vbox_parent, TRUE, _(<span class="stringliteral">&quot;Form structure preview&quot;</span>));
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <span class="comment">/* we can organize the form</span>
<a name="l00147"></a>00147 <span class="comment">     * either the same for all the accounts</span>
<a name="l00148"></a>00148 <span class="comment">     * either each account has its own configuration */</span>
<a name="l00149"></a>00149     hbox = gtk_hbox_new ( FALSE, 5 );
<a name="l00150"></a>00150     gtk_box_pack_start ( GTK_BOX (paddingbox), hbox, FALSE, FALSE, 0 );
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <span class="comment">/* the accounts option_menu */</span>
<a name="l00153"></a>00153     accounts_combobox = <a class="code" href="gsb__account_8c.html#a252b9f3c12c50f00a1d1db3e4321460c">gsb_account_create_combo_list</a> ((GtkSignalFunc) gsb_form_config_change_account_choice, NULL, FALSE );
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="comment">/*create the scolled window for tree_view */</span>
<a name="l00156"></a>00156     sw = gtk_scrolled_window_new ( NULL, NULL);
<a name="l00157"></a>00157     gtk_scrolled_window_set_policy ( GTK_SCROLLED_WINDOW ( sw ),
<a name="l00158"></a>00158                         GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
<a name="l00159"></a>00159     gtk_box_pack_start ( GTK_BOX ( paddingbox), sw, TRUE, TRUE, 0 );
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="comment">/* create the tree_view */</span>
<a name="l00162"></a>00162     list_store = gsb_form_config_create_store ();
<a name="l00163"></a>00163     form_config_tree_view = gsb_form_config_create_tree_view (list_store);
<a name="l00164"></a>00164     g_object_unref (G_OBJECT(list_store));
<a name="l00165"></a>00165     gtk_scrolled_window_add_with_viewport ( GTK_SCROLLED_WINDOW ( sw ),
<a name="l00166"></a>00166                         form_config_tree_view );
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <span class="comment">/* set the buttons line to increase/decrease the form */</span>
<a name="l00169"></a>00169     gtk_box_pack_start ( GTK_BOX ( paddingbox ),
<a name="l00170"></a>00170                         gsb_form_config_create_sizing_buttons_line (), FALSE, FALSE, 0 );
<a name="l00171"></a>00171 
<a name="l00172"></a>00172     <span class="comment">/* set the box with the buttons */</span>
<a name="l00173"></a>00173     paddingbox = <a class="code" href="utils_8c.html#a22ba81fcf046b5bec6cf6d55d440abc5">new_paddingbox_with_title</a> ( vbox_parent, FALSE, _(<span class="stringliteral">&quot;Form structure content&quot;</span>) );
<a name="l00174"></a>00174     gtk_box_pack_start ( GTK_BOX ( paddingbox ),
<a name="l00175"></a>00175                         gsb_form_config_create_buttons_table (), FALSE, FALSE, 0 );
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     gtk_widget_show_all (paddingbox);
<a name="l00178"></a>00178 }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 
<a name="l00188"></a>00188 GtkListStore *gsb_form_config_create_store ( <span class="keywordtype">void</span> )
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190     GtkListStore *store;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     store = gtk_list_store_new ( <a class="code" href="gsb__data__form_8h.html#a0e9d4003787634607af9e97e14b9668b">MAX_WIDTH</a>,
<a name="l00193"></a>00193                                  G_TYPE_STRING,
<a name="l00194"></a>00194                                  G_TYPE_STRING,
<a name="l00195"></a>00195                                  G_TYPE_STRING,
<a name="l00196"></a>00196                                  G_TYPE_STRING,
<a name="l00197"></a>00197                                  G_TYPE_STRING,
<a name="l00198"></a>00198                                  G_TYPE_STRING );
<a name="l00199"></a>00199      <span class="keywordflow">return</span> store;
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 
<a name="l00212"></a>00212 GtkWidget *gsb_form_config_create_tree_view ( GtkListStore *store )
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214     GtkWidget *tree_view;
<a name="l00215"></a>00215     gint column;
<a name="l00216"></a>00216     GtkTargetEntry target_entry[] = {
<a name="l00217"></a>00217         { <span class="stringliteral">&quot;text&quot;</span>, GTK_TARGET_SAME_WIDGET, 0 }
<a name="l00218"></a>00218     };
<a name="l00219"></a>00219     gchar *columns_titles[6] = {
<a name="l00220"></a>00220         N_(<span class="stringliteral">&quot;Col 1&quot;</span>),
<a name="l00221"></a>00221         N_(<span class="stringliteral">&quot;Col 2&quot;</span>),
<a name="l00222"></a>00222         N_(<span class="stringliteral">&quot;Col 3&quot;</span>),
<a name="l00223"></a>00223         N_(<span class="stringliteral">&quot;Col 4&quot;</span>),
<a name="l00224"></a>00224         N_(<span class="stringliteral">&quot;Col 5&quot;</span>),
<a name="l00225"></a>00225         N_(<span class="stringliteral">&quot;Col 6&quot;</span>)
<a name="l00226"></a>00226     };
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     <span class="keywordflow">if</span> ( !store )
<a name="l00229"></a>00229         <span class="keywordflow">return</span> NULL;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     <span class="comment">/* create the tree_view, it would be better to set it into a scrolled window,</span>
<a name="l00232"></a>00232 <span class="comment">     * but when we do that, there is automatickly a line on the bottom of the list</span>
<a name="l00233"></a>00233 <span class="comment">     * and it&#39;s annoying for the drag&#39;n drop ; i didn&#39;t succeed in removing that line...[cedric]</span>
<a name="l00234"></a>00234 <span class="comment">     * the problem of the choice here is if we try to increase too much the width of the column,</span>
<a name="l00235"></a>00235 <span class="comment">     * the config box increase too */</span>
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     tree_view = gtk_tree_view_new_with_model ( GTK_TREE_MODEL ( store ));
<a name="l00238"></a>00238     
<a name="l00239"></a>00239     gtk_tree_selection_set_mode ( GTK_TREE_SELECTION ( gtk_tree_view_get_selection (GTK_TREE_VIEW (tree_view))),
<a name="l00240"></a>00240                                   GTK_SELECTION_NONE );
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <span class="comment">/* set the columns */</span>
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <span class="keywordflow">for</span> ( column=0 ; column&lt; <a class="code" href="gsb__data__form_8h.html#a0e9d4003787634607af9e97e14b9668b">MAX_WIDTH</a> ; column++ )
<a name="l00245"></a>00245     {
<a name="l00246"></a>00246         GtkTreeViewColumn *tree_view_column;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248         tree_view_column = gtk_tree_view_column_new_with_attributes ( columns_titles[column],
<a name="l00249"></a>00249                                                                       gtk_cell_renderer_text_new (),
<a name="l00250"></a>00250                                                                       <span class="stringliteral">&quot;text&quot;</span>, column,
<a name="l00251"></a>00251                                                                       NULL );
<a name="l00252"></a>00252         gtk_tree_view_append_column ( GTK_TREE_VIEW ( tree_view ),
<a name="l00253"></a>00253                                       GTK_TREE_VIEW_COLUMN ( tree_view_column));
<a name="l00254"></a>00254         gtk_tree_view_column_set_sizing ( GTK_TREE_VIEW_COLUMN (tree_view_column),
<a name="l00255"></a>00255                                           GTK_TREE_VIEW_COLUMN_FIXED );
<a name="l00256"></a>00256         gtk_tree_view_column_set_resizable ( GTK_TREE_VIEW_COLUMN (tree_view_column),
<a name="l00257"></a>00257                                              TRUE );
<a name="l00258"></a>00258     }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="comment">/* we will fill the form and size the columns when the window will be realized */</span>
<a name="l00261"></a>00261     g_signal_connect ( G_OBJECT ( tree_view ),
<a name="l00262"></a>00262                        <span class="stringliteral">&quot;realize&quot;</span>,
<a name="l00263"></a>00263                        G_CALLBACK ( gsb_form_config_realized ),
<a name="l00264"></a>00264                        NULL );
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="comment">/* save and modify the form when change the size of the columns */</span>
<a name="l00267"></a>00267     g_signal_connect ( G_OBJECT (tree_view),
<a name="l00268"></a>00268                        <span class="stringliteral">&quot;size_allocate&quot;</span>,
<a name="l00269"></a>00269                        G_CALLBACK ( gsb_form_config_change_column_size ),
<a name="l00270"></a>00270                        NULL );
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <span class="comment">/* enable the drag&#39;n drop, we need to use low-level api because</span>
<a name="l00273"></a>00273 <span class="comment">     * gtk_tree_view api can only move the entire row, not only a cell</span>
<a name="l00274"></a>00274 <span class="comment">     * (at least, didn&#39;t find how...) */</span>
<a name="l00275"></a>00275     gtk_drag_source_set ( tree_view,
<a name="l00276"></a>00276                           GDK_BUTTON1_MASK,
<a name="l00277"></a>00277                           target_entry, 1,
<a name="l00278"></a>00278                           GDK_ACTION_MOVE );
<a name="l00279"></a>00279     g_signal_connect ( G_OBJECT (tree_view),
<a name="l00280"></a>00280                        <span class="stringliteral">&quot;drag-begin&quot;</span>,
<a name="l00281"></a>00281                        G_CALLBACK ( gsb_form_config_drag_begin ),
<a name="l00282"></a>00282                        NULL );
<a name="l00283"></a>00283     gtk_drag_dest_set ( tree_view,
<a name="l00284"></a>00284                         GTK_DEST_DEFAULT_ALL,
<a name="l00285"></a>00285                         target_entry, 1,
<a name="l00286"></a>00286                         GDK_ACTION_MOVE );
<a name="l00287"></a>00287     g_signal_connect ( G_OBJECT (tree_view),
<a name="l00288"></a>00288                        <span class="stringliteral">&quot;drag-end&quot;</span>,
<a name="l00289"></a>00289                        G_CALLBACK ( gsb_form_config_drag_end ),
<a name="l00290"></a>00290                        NULL );
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="keywordflow">return</span> tree_view;
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 
<a name="l00303"></a>00303 GtkWidget *gsb_form_config_create_sizing_buttons_line ( <span class="keywordtype">void</span> )
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305     GtkWidget *hbox, *hbox2;
<a name="l00306"></a>00306     GtkWidget *button;
<a name="l00307"></a>00307     GtkWidget *label;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309     hbox = gtk_hbox_new ( FALSE,
<a name="l00310"></a>00310                           5 );
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="comment">/* line number choice */</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     hbox2 = gtk_hbox_new ( FALSE,
<a name="l00315"></a>00315                            5 );
<a name="l00316"></a>00316     gtk_box_pack_start ( GTK_BOX ( hbox ),
<a name="l00317"></a>00317                          hbox2,
<a name="l00318"></a>00318                          FALSE,
<a name="l00319"></a>00319                          FALSE,
<a name="l00320"></a>00320                          0 );
<a name="l00321"></a>00321     gtk_widget_show ( hbox2 );
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     button = gtk_button_new_from_stock ( GTK_STOCK_REMOVE );
<a name="l00324"></a>00324     g_signal_connect ( G_OBJECT ( button ),
<a name="l00325"></a>00325                        <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00326"></a>00326                        G_CALLBACK ( gsb_form_config_remove_line ),
<a name="l00327"></a>00327                        NULL );
<a name="l00328"></a>00328     gtk_button_set_relief ( GTK_BUTTON( button ),
<a name="l00329"></a>00329                             GTK_RELIEF_NONE );
<a name="l00330"></a>00330     gtk_box_pack_start ( GTK_BOX ( hbox2 ),
<a name="l00331"></a>00331                          button,
<a name="l00332"></a>00332                          FALSE,
<a name="l00333"></a>00333                          FALSE,
<a name="l00334"></a>00334                          0 );
<a name="l00335"></a>00335     gtk_widget_show ( button );
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     label = gtk_label_new ( _(<span class="stringliteral">&quot;rows&quot;</span>));
<a name="l00338"></a>00338     gtk_box_pack_start ( GTK_BOX ( hbox2 ),
<a name="l00339"></a>00339                          label,
<a name="l00340"></a>00340                          FALSE,
<a name="l00341"></a>00341                          FALSE,
<a name="l00342"></a>00342                          0 );
<a name="l00343"></a>00343     gtk_widget_show ( label );
<a name="l00344"></a>00344 
<a name="l00345"></a>00345     button = gtk_button_new_from_stock ( GTK_STOCK_ADD );
<a name="l00346"></a>00346     g_signal_connect ( G_OBJECT ( button ),
<a name="l00347"></a>00347                        <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00348"></a>00348                        G_CALLBACK ( gsb_form_config_add_line ),
<a name="l00349"></a>00349                        NULL );
<a name="l00350"></a>00350     gtk_button_set_relief ( GTK_BUTTON( button ),
<a name="l00351"></a>00351                             GTK_RELIEF_NONE );
<a name="l00352"></a>00352     gtk_box_pack_start ( GTK_BOX ( hbox2 ),
<a name="l00353"></a>00353                          button,
<a name="l00354"></a>00354                          FALSE,
<a name="l00355"></a>00355                          FALSE,
<a name="l00356"></a>00356                          0 );
<a name="l00357"></a>00357     gtk_widget_show ( button );
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="comment">/* columns number choice */</span>
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     hbox2 = gtk_hbox_new ( FALSE,
<a name="l00362"></a>00362                            5 );
<a name="l00363"></a>00363     gtk_box_pack_end ( GTK_BOX ( hbox ),
<a name="l00364"></a>00364                        hbox2,
<a name="l00365"></a>00365                        FALSE,
<a name="l00366"></a>00366                        FALSE,
<a name="l00367"></a>00367                        0 );
<a name="l00368"></a>00368     gtk_widget_show ( hbox2 );
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     button = gtk_button_new_from_stock ( GTK_STOCK_REMOVE );
<a name="l00371"></a>00371     g_signal_connect ( G_OBJECT ( button ),
<a name="l00372"></a>00372                        <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00373"></a>00373                        G_CALLBACK ( gsb_form_config_remove_column ),
<a name="l00374"></a>00374                        NULL );
<a name="l00375"></a>00375     gtk_button_set_relief ( GTK_BUTTON( button ),
<a name="l00376"></a>00376                             GTK_RELIEF_NONE );
<a name="l00377"></a>00377     gtk_box_pack_start ( GTK_BOX ( hbox2 ),
<a name="l00378"></a>00378                          button,
<a name="l00379"></a>00379                          FALSE,
<a name="l00380"></a>00380                          FALSE,
<a name="l00381"></a>00381                          0 );
<a name="l00382"></a>00382     gtk_widget_show ( button );
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     label = gtk_label_new ( _(<span class="stringliteral">&quot;columns&quot;</span>));
<a name="l00385"></a>00385     gtk_box_pack_start ( GTK_BOX ( hbox2 ),
<a name="l00386"></a>00386                          label,
<a name="l00387"></a>00387                          FALSE,
<a name="l00388"></a>00388                          FALSE,
<a name="l00389"></a>00389                          0 );
<a name="l00390"></a>00390     gtk_widget_show ( label );
<a name="l00391"></a>00391 
<a name="l00392"></a>00392     button = gtk_button_new_from_stock ( GTK_STOCK_ADD );
<a name="l00393"></a>00393     g_signal_connect ( G_OBJECT ( button ),
<a name="l00394"></a>00394                        <span class="stringliteral">&quot;clicked&quot;</span>,
<a name="l00395"></a>00395                        G_CALLBACK ( gsb_form_config_add_column ),
<a name="l00396"></a>00396                        NULL );
<a name="l00397"></a>00397     gtk_button_set_relief ( GTK_BUTTON( button ),
<a name="l00398"></a>00398                             GTK_RELIEF_NONE );
<a name="l00399"></a>00399     gtk_box_pack_start ( GTK_BOX ( hbox2 ),
<a name="l00400"></a>00400                          button,
<a name="l00401"></a>00401                          FALSE,
<a name="l00402"></a>00402                          FALSE,
<a name="l00403"></a>00403                          0 );
<a name="l00404"></a>00404     gtk_widget_show ( button );
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     <span class="keywordflow">return</span> hbox;
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 
<a name="l00417"></a>00417 GtkWidget *gsb_form_config_create_buttons_table ( <span class="keywordtype">void</span> )
<a name="l00418"></a>00418 {
<a name="l00419"></a>00419     GtkWidget *table;
<a name="l00420"></a>00420     gint current_element_number;
<a name="l00421"></a>00421     gint row, column;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423     <span class="comment">/* the table is 3x6 buttons */</span>
<a name="l00424"></a>00424     table = gtk_table_new ( 3, 6, FALSE );
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <span class="comment">/* the date, debit and credit are obligatory, so begin to number 4 */</span>
<a name="l00427"></a>00427 
<a name="l00428"></a>00428     current_element_number = 4;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     <span class="keywordflow">for</span> ( row=0 ; row&lt;3 ; row++ )
<a name="l00431"></a>00431         <span class="keywordflow">for</span> ( column=0 ; column&lt;6 ; column++ )
<a name="l00432"></a>00432         {
<a name="l00433"></a>00433             gchar *string;
<a name="l00434"></a>00434             gchar *changed_string;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436             <span class="keywordtype">string</span> = _(<a class="code" href="gsb__form__widget_8c.html#a48e129aec71bef3117effe95f85c4a12">gsb_form_widget_get_name</a> (current_element_number));
<a name="l00437"></a>00437 
<a name="l00438"></a>00438             <span class="keywordflow">if</span> ( <span class="keywordtype">string</span> )
<a name="l00439"></a>00439             {
<a name="l00440"></a>00440                 <span class="comment">/* the max string in the button is 10 characters */</span>
<a name="l00441"></a>00441 
<a name="l00442"></a>00442                 changed_string = <a class="code" href="utils__str_8c.html#a67b348352595edf6bfbb1d64ad7c0f7b">limit_string</a> ( <span class="keywordtype">string</span>,
<a name="l00443"></a>00443                                                 10 );
<a name="l00444"></a>00444 
<a name="l00445"></a>00445                 form_config_buttons[column + row*6] = gtk_toggle_button_new_with_label ( changed_string );
<a name="l00446"></a>00446                 g_object_set_data ( G_OBJECT ( form_config_buttons[column + row*6] ),
<a name="l00447"></a>00447                                     <span class="stringliteral">&quot;element_number&quot;</span>,
<a name="l00448"></a>00448                                     GINT_TO_POINTER ( current_element_number));
<a name="l00449"></a>00449                 g_signal_connect ( G_OBJECT ( form_config_buttons[column + row*6] ),
<a name="l00450"></a>00450                                    <span class="stringliteral">&quot;toggled&quot;</span>,
<a name="l00451"></a>00451                                    G_CALLBACK (gsb_form_config_toggle_element_button),
<a name="l00452"></a>00452                                    NULL );
<a name="l00453"></a>00453                 gtk_table_attach_defaults ( GTK_TABLE ( table ),
<a name="l00454"></a>00454                                             form_config_buttons[column + row*6],
<a name="l00455"></a>00455                                             column, column+1,
<a name="l00456"></a>00456                                             row, row+1 );
<a name="l00457"></a>00457 
<a name="l00458"></a>00458                 <span class="comment">/* set the tooltip with the real name */</span>
<a name="l00459"></a>00459                 <span class="keywordtype">string</span> = g_strconcat ( <span class="stringliteral">&quot; &quot;</span>, <span class="keywordtype">string</span>, <span class="stringliteral">&quot; &quot;</span>, NULL );
<a name="l00460"></a>00460                 gtk_widget_set_tooltip_text ( GTK_WIDGET (form_config_buttons[column + row*6]),
<a name="l00461"></a>00461                                               <span class="keywordtype">string</span>);
<a name="l00462"></a>00462                 g_free (changed_string);
<a name="l00463"></a>00463             }
<a name="l00464"></a>00464 
<a name="l00465"></a>00465             current_element_number++;
<a name="l00466"></a>00466         }
<a name="l00467"></a>00467     <span class="keywordflow">return</span> table;
<a name="l00468"></a>00468 }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470 
<a name="l00478"></a>00478 gboolean gsb_form_config_update_form_config ( gint account_number )
<a name="l00479"></a>00479 {
<a name="l00480"></a>00480     gint row;
<a name="l00481"></a>00481     gint column;
<a name="l00482"></a>00482     gint current_element_number;
<a name="l00483"></a>00483     
<a name="l00484"></a>00484     <span class="comment">/* fill the store */</span>
<a name="l00485"></a>00485     gsb_form_config_fill_store (account_number);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="comment">/* show/hide the necessary columns in the tree view */</span>
<a name="l00488"></a>00488     <span class="keywordflow">for</span> ( column=0 ; column&lt;MAX_WIDTH ; column++ )
<a name="l00489"></a>00489         gtk_tree_view_column_set_visible ( gtk_tree_view_get_column ( GTK_TREE_VIEW ( form_config_tree_view ),
<a name="l00490"></a>00490                                                                       column ),
<a name="l00491"></a>00491                                            column&lt;<a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number ));
<a name="l00492"></a>00492 
<a name="l00493"></a>00493     <span class="comment">/* active/unactive the buttons, begin on the fourth element number because the</span>
<a name="l00494"></a>00494 <span class="comment">     * date, debit and credit are obligatory */</span>
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     current_element_number = 4;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keywordflow">for</span> ( row=0 ; row&lt;3 ; row++ )
<a name="l00499"></a>00499         <span class="keywordflow">for</span> ( column=0 ; column&lt;6 ; column++ )
<a name="l00500"></a>00500         {
<a name="l00501"></a>00501             <span class="keywordflow">if</span> ( column + row*6 &lt; <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0afe4e95e3f2c92829d49740981b2e0c44">TRANSACTION_FORM_WIDGET_NB</a> - 3 &amp;&amp;
<a name="l00502"></a>00502                  form_config_buttons[column + row*6] )
<a name="l00503"></a>00503             {
<a name="l00504"></a>00504                 g_signal_handlers_block_by_func ( G_OBJECT ( form_config_buttons[column + row*6] ),
<a name="l00505"></a>00505                                                   G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00506"></a>00506                                                   NULL );
<a name="l00507"></a>00507                 gtk_toggle_button_set_active ( GTK_TOGGLE_BUTTON ( form_config_buttons[column + row*6] ),
<a name="l00508"></a>00508                                                <a class="code" href="gsb__data__form_8c.html#a011611d3aa6cecc0c619981f69bf2a6e">gsb_data_form_look_for_value</a> ( account_number,
<a name="l00509"></a>00509                                                                               current_element_number,
<a name="l00510"></a>00510                                                                               NULL, NULL ));
<a name="l00511"></a>00511                 g_signal_handlers_unblock_by_func ( G_OBJECT ( form_config_buttons[column + row*6] ),
<a name="l00512"></a>00512                                                     G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00513"></a>00513                                                     NULL );
<a name="l00514"></a>00514             }
<a name="l00515"></a>00515             current_element_number++;
<a name="l00516"></a>00516         }
<a name="l00517"></a>00517     <span class="keywordflow">return</span> FALSE;
<a name="l00518"></a>00518 }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 
<a name="l00528"></a>00528 gboolean gsb_form_config_change_account_choice ( GtkWidget *combobox,
<a name="l00529"></a>00529                                                  gpointer null )
<a name="l00530"></a>00530 {
<a name="l00531"></a>00531     gint account_number;
<a name="l00532"></a>00532 
<a name="l00533"></a>00533     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> (combobox);
<a name="l00534"></a>00534     gsb_form_config_update_form_config ( account_number );
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="keywordflow">return</span> FALSE;
<a name="l00537"></a>00537 }
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00548"></a>00548 gboolean gsb_form_config_toggle_element_button ( GtkWidget *toggle_button )
<a name="l00549"></a>00549 {
<a name="l00550"></a>00550     gint element_number;
<a name="l00551"></a>00551     gint no_second_element;
<a name="l00552"></a>00552     gint i, j;
<a name="l00553"></a>00553     gint account_number;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555     <span class="comment">/* get the element number */</span>
<a name="l00556"></a>00556     element_number = GPOINTER_TO_INT ( g_object_get_data ( G_OBJECT ( toggle_button ),
<a name="l00557"></a>00557                                                            <span class="stringliteral">&quot;element_number&quot;</span> ));
<a name="l00558"></a>00558     <span class="comment">/* set the second element number if necessary */</span>
<a name="l00559"></a>00559     <span class="keywordflow">switch</span> ( element_number )
<a name="l00560"></a>00560     {
<a name="l00561"></a>00561         <span class="keywordflow">case</span> <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0a3ae7bb2abdcc2e5494d0f453108d39ef">TRANSACTION_FORM_TYPE</a>:
<a name="l00562"></a>00562             <span class="comment">/*      c&#39;est le mode de paiement, on met le chq */</span>
<a name="l00563"></a>00563             no_second_element = <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0ab040b10c7b94b662ad06c18899b16451">TRANSACTION_FORM_CHEQUE</a>;
<a name="l00564"></a>00564             <span class="keywordflow">break</span>;
<a name="l00565"></a>00565 
<a name="l00566"></a>00566         <span class="keywordflow">case</span> <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0ab040b10c7b94b662ad06c18899b16451">TRANSACTION_FORM_CHEQUE</a>:
<a name="l00567"></a>00567             <span class="comment">/*      c&#39;est le chq, on met mode de paiement */</span>
<a name="l00568"></a>00568             no_second_element = <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0a3ae7bb2abdcc2e5494d0f453108d39ef">TRANSACTION_FORM_TYPE</a>;
<a name="l00569"></a>00569             <span class="keywordflow">break</span>;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         <span class="keywordflow">case</span> <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0a04a54c703677228b4ae47cab1992554b">TRANSACTION_FORM_DEVISE</a>:
<a name="l00572"></a>00572             <span class="comment">/*      c&#39;est la devise, on met le button de change */</span>
<a name="l00573"></a>00573             no_second_element = <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0a54b913a7cb6769230a2c55ba7a3429d1">TRANSACTION_FORM_CHANGE</a>;
<a name="l00574"></a>00574             <span class="keywordflow">break</span>;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576         <span class="keywordflow">case</span> <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0a54b913a7cb6769230a2c55ba7a3429d1">TRANSACTION_FORM_CHANGE</a>:
<a name="l00577"></a>00577             <span class="comment">/*      c&#39;est le button de change, on met la devise */</span>
<a name="l00578"></a>00578             no_second_element = <a class="code" href="gsb__data__form_8h.html#ae619a9c249e0b3dd1f3eda88078c03b0a04a54c703677228b4ae47cab1992554b">TRANSACTION_FORM_DEVISE</a>;
<a name="l00579"></a>00579             <span class="keywordflow">break</span>;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581         <span class="keywordflow">default</span>:
<a name="l00582"></a>00582             no_second_element = -1;
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l00586"></a>00586 
<a name="l00587"></a>00587     <span class="comment">/* update the table */</span>
<a name="l00588"></a>00588     <span class="keywordflow">if</span> ( gtk_toggle_button_get_active ( GTK_TOGGLE_BUTTON ( toggle_button )))
<a name="l00589"></a>00589     {
<a name="l00590"></a>00590         <span class="comment">/* button is on, append the element */</span>
<a name="l00591"></a>00591         gint place_trouvee = 0;
<a name="l00592"></a>00592         gint ligne_premier_elt = -1;
<a name="l00593"></a>00593         gint colonne_premier_elt = -1;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595         <span class="keywordflow">for</span> ( i=0 ; i &lt; <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) ; i++)
<a name="l00596"></a>00596             <span class="keywordflow">for</span> ( j=0 ; j &lt; <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number) ; j++ )
<a name="l00597"></a>00597                 <span class="keywordflow">if</span> ( !<a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number, j, i ) )
<a name="l00598"></a>00598                 {
<a name="l00599"></a>00599                     <span class="comment">/* if only 1 element, end here, else continue to look after the second one */</span>
<a name="l00600"></a>00600                     <span class="keywordflow">if</span> ( no_second_element == -1 )
<a name="l00601"></a>00601                     {
<a name="l00602"></a>00602                         <span class="comment">/*                      il n&#39;y a qu&#39;un elt */</span>
<a name="l00603"></a>00603                         
<a name="l00604"></a>00604                         <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l00605"></a>00605                                                   j,
<a name="l00606"></a>00606                                                   i,
<a name="l00607"></a>00607                                                   element_number );
<a name="l00608"></a>00608                         place_trouvee = 1;
<a name="l00609"></a>00609                         i = <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number);
<a name="l00610"></a>00610                         j = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l00611"></a>00611                     }
<a name="l00612"></a>00612                     <span class="keywordflow">else</span>
<a name="l00613"></a>00613                     {
<a name="l00614"></a>00614                         <span class="comment">/* there are 2 elements */</span>
<a name="l00615"></a>00615                         <span class="keywordflow">if</span> ( ligne_premier_elt == -1 )
<a name="l00616"></a>00616                         {
<a name="l00617"></a>00617                             <span class="comment">/* found the place for the first element */</span>
<a name="l00618"></a>00618                             ligne_premier_elt = i;
<a name="l00619"></a>00619                             colonne_premier_elt = j;
<a name="l00620"></a>00620                         }
<a name="l00621"></a>00621                         <span class="keywordflow">else</span>
<a name="l00622"></a>00622                         {
<a name="l00623"></a>00623                             <span class="comment">/* found the place for the second element */</span>
<a name="l00624"></a>00624                             <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l00625"></a>00625                                                       colonne_premier_elt,
<a name="l00626"></a>00626                                                       ligne_premier_elt,
<a name="l00627"></a>00627                                                       element_number );
<a name="l00628"></a>00628                             <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l00629"></a>00629                                                       j,
<a name="l00630"></a>00630                                                       i,
<a name="l00631"></a>00631                                                       no_second_element );
<a name="l00632"></a>00632                             place_trouvee = 1;
<a name="l00633"></a>00633                             i = <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number);
<a name="l00634"></a>00634                             j = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l00635"></a>00635                         }
<a name="l00636"></a>00636                     }
<a name="l00637"></a>00637                 }
<a name="l00638"></a>00638 
<a name="l00639"></a>00639         <span class="keywordflow">if</span> ( place_trouvee )
<a name="l00640"></a>00640         {
<a name="l00641"></a>00641             <span class="comment">/* there is a place for the element, active if necessary an associated element */</span>
<a name="l00642"></a>00642             <span class="keywordflow">if</span> ( no_second_element != -1 )
<a name="l00643"></a>00643             {
<a name="l00644"></a>00644                 g_signal_handlers_block_by_func ( G_OBJECT ( form_config_buttons[no_second_element-4] ),
<a name="l00645"></a>00645                                                   G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00646"></a>00646                                                   NULL );
<a name="l00647"></a>00647                 gtk_toggle_button_set_active ( GTK_TOGGLE_BUTTON ( form_config_buttons[no_second_element-4] ),
<a name="l00648"></a>00648                                                TRUE );
<a name="l00649"></a>00649                 g_signal_handlers_unblock_by_func ( G_OBJECT ( form_config_buttons[no_second_element-4] ),
<a name="l00650"></a>00650                                                     G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00651"></a>00651                                                     NULL );
<a name="l00652"></a>00652             }
<a name="l00653"></a>00653         }
<a name="l00654"></a>00654         <span class="keywordflow">else</span>
<a name="l00655"></a>00655         {
<a name="l00656"></a>00656             <span class="comment">/* there is no place to add an element */</span>
<a name="l00657"></a>00657             g_signal_handlers_block_by_func ( G_OBJECT ( toggle_button ),
<a name="l00658"></a>00658                                               G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00659"></a>00659                                               NULL );
<a name="l00660"></a>00660             gtk_toggle_button_set_active ( GTK_TOGGLE_BUTTON ( toggle_button ),
<a name="l00661"></a>00661                                            FALSE );
<a name="l00662"></a>00662             g_signal_handlers_unblock_by_func ( G_OBJECT ( toggle_button ),
<a name="l00663"></a>00663                                                 G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00664"></a>00664                                                 NULL );
<a name="l00665"></a>00665 
<a name="l00666"></a>00666             <span class="keywordflow">if</span> ( no_second_element == -1 )
<a name="l00667"></a>00667                 <a class="code" href="dialog_8c.html#a1ae76010f96aab227a640333d3933277">dialogue_hint</a> ( _(<span class="stringliteral">&quot;There is no place enough to put the element. You need to increase the number of rows or columns to add an element.&quot;</span>),
<a name="l00668"></a>00668                                 _(<span class="stringliteral">&quot;The table is full&quot;</span>));
<a name="l00669"></a>00669             <span class="keywordflow">else</span>
<a name="l00670"></a>00670                 <a class="code" href="dialog_8c.html#a1ae76010f96aab227a640333d3933277">dialogue_hint</a> ( _(<span class="stringliteral">&quot;There is no place enough to put the two elements (you have clicked on an element which contains two). You need to increase the number of rows or columns to add the elements.&quot;</span>),
<a name="l00671"></a>00671                                 _(<span class="stringliteral">&quot;The table is full&quot;</span>));
<a name="l00672"></a>00672 
<a name="l00673"></a>00673             <span class="keywordflow">return</span> TRUE;
<a name="l00674"></a>00674         }
<a name="l00675"></a>00675     }
<a name="l00676"></a>00676     <span class="keywordflow">else</span>
<a name="l00677"></a>00677     {
<a name="l00678"></a>00678         <span class="comment">/* un-toggle the button */</span>
<a name="l00679"></a>00679         <span class="keywordflow">if</span> ( no_second_element != -1 )
<a name="l00680"></a>00680         {
<a name="l00681"></a>00681             g_signal_handlers_block_by_func ( G_OBJECT ( form_config_buttons[no_second_element-4] ),
<a name="l00682"></a>00682                                               G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00683"></a>00683                                               NULL );
<a name="l00684"></a>00684             gtk_toggle_button_set_active ( GTK_TOGGLE_BUTTON ( form_config_buttons[no_second_element-4] ),
<a name="l00685"></a>00685                                            FALSE );
<a name="l00686"></a>00686             g_signal_handlers_unblock_by_func ( G_OBJECT ( form_config_buttons[no_second_element-4] ),
<a name="l00687"></a>00687                                                 G_CALLBACK ( gsb_form_config_toggle_element_button ),
<a name="l00688"></a>00688                                                 NULL );
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691         <span class="keywordflow">for</span> ( i=0 ; i &lt; <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) ; i++ )
<a name="l00692"></a>00692             <span class="keywordflow">for</span> ( j=0 ; j &lt; <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number) ; j++ )
<a name="l00693"></a>00693                 <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> (account_number,
<a name="l00694"></a>00694                                               j,
<a name="l00695"></a>00695                                               i ) == element_number )
<a name="l00696"></a>00696                 {
<a name="l00697"></a>00697                     <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l00698"></a>00698                                               j,
<a name="l00699"></a>00699                                               i,
<a name="l00700"></a>00700                                               0 );
<a name="l00701"></a>00701                     <span class="keywordflow">if</span> ( no_second_element == -1 )
<a name="l00702"></a>00702                     {
<a name="l00703"></a>00703                         i = <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number);
<a name="l00704"></a>00704                         j = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l00705"></a>00705                     }
<a name="l00706"></a>00706                     <span class="keywordflow">else</span>
<a name="l00707"></a>00707                     {
<a name="l00708"></a>00708                         element_number = no_second_element;
<a name="l00709"></a>00709                         no_second_element = -1;
<a name="l00710"></a>00710                         i = 0;
<a name="l00711"></a>00711                         j = 0;
<a name="l00712"></a>00712                     }
<a name="l00713"></a>00713                 }
<a name="l00714"></a>00714     }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716     <span class="comment">/* fill the list */</span>
<a name="l00717"></a>00717     gsb_form_config_fill_store (account_number);
<a name="l00718"></a>00718     <a class="code" href="gsb__form_8c.html#afb1d295baed50f6ee280c64d012b0591">gsb_form_fill_from_account</a> (account_number);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720     <a class="code" href="gsb__data__form_8c.html#a206bff690e4524f0bb5c42c1ab55b6a0">gsb_form_config_update_from_account</a> (
<a name="l00721"></a>00721                         <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox ) );
<a name="l00722"></a>00722     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l00723"></a>00723         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l00724"></a>00724     <span class="keywordflow">return</span> FALSE;
<a name="l00725"></a>00725 }
<a name="l00726"></a>00726 
<a name="l00727"></a>00727 
<a name="l00735"></a>00735 gboolean gsb_form_config_fill_store ( gint account_number )
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737     gint row;
<a name="l00738"></a>00738     GtkListStore *store;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740     store = GTK_LIST_STORE ( gtk_tree_view_get_model ( GTK_TREE_VIEW ( form_config_tree_view )));
<a name="l00741"></a>00741                                                 
<a name="l00742"></a>00742     gtk_list_store_clear ( store );
<a name="l00743"></a>00743 
<a name="l00744"></a>00744     <span class="keywordflow">for</span> ( row=0 ; row &lt; <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) ; row++ )
<a name="l00745"></a>00745     {
<a name="l00746"></a>00746         GtkTreeIter iter;
<a name="l00747"></a>00747         gint column;
<a name="l00748"></a>00748 
<a name="l00749"></a>00749         gtk_list_store_append ( GTK_LIST_STORE ( store ),
<a name="l00750"></a>00750                                 &amp;iter );
<a name="l00751"></a>00751 
<a name="l00752"></a>00752         <span class="keywordflow">for</span> ( column = 0 ; column &lt; <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number) ; column++ )
<a name="l00753"></a>00753             gtk_list_store_set ( GTK_LIST_STORE ( store ),
<a name="l00754"></a>00754                                  &amp;iter,
<a name="l00755"></a>00755                                  column, _(<a class="code" href="gsb__form__widget_8c.html#a48e129aec71bef3117effe95f85c4a12">gsb_form_widget_get_name</a> (<a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l00756"></a>00756                                                                                              column,
<a name="l00757"></a>00757                                                                                              row ))),
<a name="l00758"></a>00758                                  -1 );
<a name="l00759"></a>00759     }
<a name="l00760"></a>00760     <span class="keywordflow">return</span> FALSE;
<a name="l00761"></a>00761 }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763 
<a name="l00772"></a>00772 gboolean gsb_form_config_realized ( GtkWidget *tree_view,
<a name="l00773"></a>00773                                     gpointer null )
<a name="l00774"></a>00774 {
<a name="l00775"></a>00775     gint column;
<a name="l00776"></a>00776     gint account_number;
<a name="l00777"></a>00777     gint width;
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     <span class="keywordflow">if</span> ( !<a class="code" href="utils_8c.html#a201366e3a41e970cd3009d8b5d7afdd0">assert_account_loaded</a>())
<a name="l00780"></a>00780       <span class="keywordflow">return</span> FALSE;
<a name="l00781"></a>00781 
<a name="l00782"></a>00782     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l00783"></a>00783     width = tree_view -&gt; allocation.width;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <span class="comment">/* fill and update the form list and buttons */</span>
<a name="l00786"></a>00786     gsb_form_config_update_form_config(account_number);
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     <span class="keywordflow">for</span> ( column=0 ; column &lt; <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number) ; column++ )
<a name="l00789"></a>00789     {
<a name="l00790"></a>00790         gtk_tree_view_column_set_fixed_width ( gtk_tree_view_get_column ( GTK_TREE_VIEW ( tree_view ),
<a name="l00791"></a>00791                                                                           column ),
<a name="l00792"></a>00792                                                <a class="code" href="gsb__data__form_8c.html#a7e138cf8515b9688315d67ef12c338d9">gsb_data_form_get_width_column</a> ( account_number,
<a name="l00793"></a>00793                                                                                 column ) * width / 100 );
<a name="l00794"></a>00794     }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796     gdk_window_set_cursor ( tree_view -&gt; <a class="code" href="accueil_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>, 
<a name="l00797"></a>00797                             gdk_cursor_new ( GDK_FLEUR ) );
<a name="l00798"></a>00798 
<a name="l00799"></a>00799     <span class="keywordflow">return</span> FALSE;
<a name="l00800"></a>00800 }
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 
<a name="l00803"></a>00803 
<a name="l00813"></a>00813 gboolean gsb_form_config_change_column_size ( GtkWidget *tree_view,
<a name="l00814"></a>00814                                               GtkAllocation *allocation,
<a name="l00815"></a>00815                                               gpointer null )
<a name="l00816"></a>00816 {
<a name="l00817"></a>00817     gint column;
<a name="l00818"></a>00818     gint account_number;
<a name="l00819"></a>00819     gint i;
<a name="l00820"></a>00820 
<a name="l00821"></a>00821     <span class="keywordflow">if</span> ( !GTK_WIDGET_REALIZED (tree_view))
<a name="l00822"></a>00822         <span class="keywordflow">return</span> FALSE;
<a name="l00823"></a>00823 
<a name="l00824"></a>00824     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l00825"></a>00825 
<a name="l00826"></a>00826     <span class="keywordflow">for</span> (i=0 ; i&lt;<a class="code" href="gsb__data__account_8c.html#a56c9a589563db8c15800e41378908b27">gsb_data_account_get_accounts_amount</a> () ; i++)
<a name="l00827"></a>00827     {
<a name="l00828"></a>00828             <span class="keywordflow">for</span> ( column=0 ; column &lt; <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (i) ; column++ )
<a name="l00829"></a>00829             {
<a name="l00830"></a>00830                 gint size_column;
<a name="l00831"></a>00831 
<a name="l00832"></a>00832                 size_column = gtk_tree_view_column_get_width ( gtk_tree_view_get_column ( GTK_TREE_VIEW ( tree_view ),
<a name="l00833"></a>00833                                                                                           column ));
<a name="l00834"></a>00834                 <a class="code" href="gsb__data__form_8c.html#a18aec71c64bac7bd9c7da37e05254d3e">gsb_data_form_set_width_column</a> ( i,
<a name="l00835"></a>00835                                                  column,
<a name="l00836"></a>00836                                                  size_column * 100 / allocation -&gt; width );
<a name="l00837"></a>00837             }
<a name="l00838"></a>00838     }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l00841"></a>00841         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l00842"></a>00842 
<a name="l00843"></a>00843     <span class="comment">/* update the form if needed */</span>
<a name="l00844"></a>00844         <a class="code" href="gsb__form_8c.html#ae4729003de616a56e4a3f22732d2061f">saved_allocation_size</a> = 0;
<a name="l00845"></a>00845         <a class="code" href="gsb__form_8c.html#a2614075bf7a6653112864bfb189f2ef4">gsb_form_allocate_size</a> ( NULL, &amp;(<a class="code" href="accueil_8c.html#afb5de72ed97c05cc117b44cf61adfb86">form_transaction_part</a> -&gt; allocation), NULL );
<a name="l00846"></a>00846 
<a name="l00847"></a>00847     <span class="keywordflow">return</span> FALSE;
<a name="l00848"></a>00848 }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850 
<a name="l00858"></a>00858 gboolean gsb_form_config_add_line ( <span class="keywordtype">void</span> )
<a name="l00859"></a>00859 {
<a name="l00860"></a>00860     gint account_number;
<a name="l00861"></a>00861 
<a name="l00862"></a>00862     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) == <a class="code" href="gsb__data__form_8h.html#a9059fa76eb5e8e86f870405d63e72c4c">MAX_HEIGHT</a> )
<a name="l00865"></a>00865         <span class="keywordflow">return</span> FALSE;
<a name="l00866"></a>00866 
<a name="l00867"></a>00867     <a class="code" href="gsb__data__form_8c.html#aab897602de98433bb719ac14c3181479">gsb_data_form_set_nb_rows</a> ( account_number,
<a name="l00868"></a>00868                                 <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) + 1 );
<a name="l00869"></a>00869 
<a name="l00870"></a>00870     <span class="comment">/* update the form */</span>
<a name="l00871"></a>00871     gsb_form_config_fill_store (account_number);
<a name="l00872"></a>00872     <a class="code" href="gsb__form_8c.html#ab1073bc2ba950634cd4625a815b6f110">gsb_form_create_widgets</a> ();
<a name="l00873"></a>00873 
<a name="l00874"></a>00874     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l00875"></a>00875         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l00876"></a>00876     <span class="keywordflow">return</span> FALSE;
<a name="l00877"></a>00877 }
<a name="l00878"></a>00878 
<a name="l00879"></a>00879 
<a name="l00887"></a>00887 gboolean gsb_form_config_remove_line ( <span class="keywordtype">void</span> )
<a name="l00888"></a>00888 {
<a name="l00889"></a>00889     gint column;
<a name="l00890"></a>00890     gint account_number;
<a name="l00891"></a>00891     gint nb_rows;
<a name="l00892"></a>00892     gint nb_columns;
<a name="l00893"></a>00893 
<a name="l00894"></a>00894     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l00895"></a>00895     nb_rows = <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number);
<a name="l00896"></a>00896 
<a name="l00897"></a>00897     <span class="keywordflow">if</span> ( nb_rows == 1 )
<a name="l00898"></a>00898         <span class="keywordflow">return</span> FALSE;
<a name="l00899"></a>00899 
<a name="l00900"></a>00900     <span class="comment">/* check if it&#39;s possible */</span>
<a name="l00901"></a>00901     <span class="keywordflow">if</span> ( !gsb_form_config_check_for_removing ( account_number,
<a name="l00902"></a>00902                                                1 ))
<a name="l00903"></a>00903         <span class="keywordflow">return</span> FALSE;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905     nb_columns = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l00906"></a>00906 
<a name="l00907"></a>00907     <span class="comment">/* remove the row */</span>
<a name="l00908"></a>00908     nb_rows--;
<a name="l00909"></a>00909     <a class="code" href="gsb__data__form_8c.html#aab897602de98433bb719ac14c3181479">gsb_data_form_set_nb_rows</a> ( account_number,
<a name="l00910"></a>00910                                 nb_rows );
<a name="l00911"></a>00911 
<a name="l00912"></a>00912     <span class="comment">/* move automatickly the values inside the new tinier form */</span>
<a name="l00913"></a>00913     <span class="keywordflow">for</span> ( column=0 ; column&lt; nb_columns ; column++ )
<a name="l00914"></a>00914     {
<a name="l00915"></a>00915         <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l00916"></a>00916                                        column,
<a name="l00917"></a>00917                                        nb_rows))
<a name="l00918"></a>00918         {
<a name="l00919"></a>00919             <span class="comment">/* there is something inside the part wich will be removed, so look for the first</span>
<a name="l00920"></a>00920 <span class="comment">             * place possible to move it */</span>
<a name="l00921"></a>00921 
<a name="l00922"></a>00922             gint tmp_row, tmp_column;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924             <span class="keywordflow">for</span> ( tmp_row=0 ; tmp_row &lt; nb_rows ; tmp_row++ )
<a name="l00925"></a>00925                 <span class="keywordflow">for</span> ( tmp_column=0 ; tmp_column &lt; nb_columns ; tmp_column++ )
<a name="l00926"></a>00926                     <span class="keywordflow">if</span> ( !<a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l00927"></a>00927                                                     tmp_column,
<a name="l00928"></a>00928                                                     tmp_row ))
<a name="l00929"></a>00929                     {
<a name="l00930"></a>00930                         <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l00931"></a>00931                                                   tmp_column,
<a name="l00932"></a>00932                                                   tmp_row,
<a name="l00933"></a>00933                                                   <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l00934"></a>00934                                                                             column,
<a name="l00935"></a>00935                                                                             nb_rows));
<a name="l00936"></a>00936                         <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l00937"></a>00937                                                   column,
<a name="l00938"></a>00938                                                   nb_rows,
<a name="l00939"></a>00939                                                   0 );
<a name="l00940"></a>00940                         tmp_row = nb_rows;
<a name="l00941"></a>00941                         tmp_column = nb_columns;
<a name="l00942"></a>00942                     }
<a name="l00943"></a>00943         }
<a name="l00944"></a>00944     }
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="comment">/* update the form */</span>
<a name="l00947"></a>00947     gsb_form_config_fill_store (account_number);
<a name="l00948"></a>00948     <a class="code" href="gsb__form_8c.html#ab1073bc2ba950634cd4625a815b6f110">gsb_form_create_widgets</a> ();
<a name="l00949"></a>00949 
<a name="l00950"></a>00950     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l00951"></a>00951         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l00952"></a>00952     <span class="keywordflow">return</span> FALSE;
<a name="l00953"></a>00953 }
<a name="l00954"></a>00954 
<a name="l00955"></a>00955 
<a name="l00963"></a>00963 gboolean gsb_form_config_add_column ( <span class="keywordtype">void</span> )
<a name="l00964"></a>00964 {
<a name="l00965"></a>00965     gint account_number;
<a name="l00966"></a>00966     gint nb_columns;
<a name="l00967"></a>00967     gint new_size;
<a name="l00968"></a>00968 
<a name="l00969"></a>00969     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l00970"></a>00970     nb_columns = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l00971"></a>00971 
<a name="l00972"></a>00972     <span class="keywordflow">if</span> ( nb_columns == MAX_WIDTH )
<a name="l00973"></a>00973         <span class="keywordflow">return</span> FALSE;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <span class="comment">/* split by 2 the size of the current last column to add the new column */</span>
<a name="l00976"></a>00976     new_size = <a class="code" href="gsb__data__form_8c.html#a7e138cf8515b9688315d67ef12c338d9">gsb_data_form_get_width_column</a> ( account_number,
<a name="l00977"></a>00977                                                 nb_columns - 1) / 2;
<a name="l00978"></a>00978     <a class="code" href="gsb__data__form_8c.html#a18aec71c64bac7bd9c7da37e05254d3e">gsb_data_form_set_width_column</a> ( account_number,
<a name="l00979"></a>00979                                      nb_columns - 1,
<a name="l00980"></a>00980                                      new_size );
<a name="l00981"></a>00981     <a class="code" href="gsb__data__form_8c.html#a18aec71c64bac7bd9c7da37e05254d3e">gsb_data_form_set_width_column</a> ( account_number,
<a name="l00982"></a>00982                                      nb_columns,
<a name="l00983"></a>00983                                      new_size );
<a name="l00984"></a>00984     <a class="code" href="gsb__data__form_8c.html#a9b4608cf8f2ffba4904a2fdd6263e8b6">gsb_data_form_set_nb_columns</a> ( account_number,
<a name="l00985"></a>00985                                    nb_columns + 1 );
<a name="l00986"></a>00986 
<a name="l00987"></a>00987     <span class="comment">/* show the result */</span>
<a name="l00988"></a>00988     gsb_form_config_realized ( form_config_tree_view, NULL );
<a name="l00989"></a>00989     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l00990"></a>00990         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l00991"></a>00991     <span class="keywordflow">return</span> FALSE;
<a name="l00992"></a>00992 }
<a name="l00993"></a>00993 
<a name="l00994"></a>00994 
<a name="l01002"></a>01002 gboolean gsb_form_config_remove_column ( <span class="keywordtype">void</span> )
<a name="l01003"></a>01003 {
<a name="l01004"></a>01004     gint row;
<a name="l01005"></a>01005     gint account_number;
<a name="l01006"></a>01006     gint nb_columns;
<a name="l01007"></a>01007     
<a name="l01008"></a>01008     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l01009"></a>01009     nb_columns = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l01010"></a>01010 
<a name="l01011"></a>01011     <span class="keywordflow">if</span> ( nb_columns == 1 )
<a name="l01012"></a>01012         <span class="keywordflow">return</span> FALSE;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014     <span class="comment">/* check if it&#39;s possible */</span>
<a name="l01015"></a>01015     <span class="keywordflow">if</span> ( !gsb_form_config_check_for_removing ( account_number,
<a name="l01016"></a>01016                                                0 ))
<a name="l01017"></a>01017         <span class="keywordflow">return</span> FALSE;
<a name="l01018"></a>01018 
<a name="l01019"></a>01019     <span class="comment">/* erase the last column */</span>
<a name="l01020"></a>01020     nb_columns--;
<a name="l01021"></a>01021     <a class="code" href="gsb__data__form_8c.html#a9b4608cf8f2ffba4904a2fdd6263e8b6">gsb_data_form_set_nb_columns</a> ( account_number,
<a name="l01022"></a>01022                                    nb_columns );
<a name="l01023"></a>01023 
<a name="l01024"></a>01024     <span class="comment">/* move the values in the last column to another place */</span>
<a name="l01025"></a>01025     <span class="keywordflow">for</span> ( row=0 ; row&lt; <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) ; row++ )
<a name="l01026"></a>01026     {
<a name="l01027"></a>01027         <span class="keywordflow">if</span> ( <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> (account_number,
<a name="l01028"></a>01028                                       nb_columns,
<a name="l01029"></a>01029                                       row ))
<a name="l01030"></a>01030         {
<a name="l01031"></a>01031             <span class="comment">/* found something, look for the first place to set it */</span>
<a name="l01032"></a>01032 
<a name="l01033"></a>01033             gint tmp_row, tmp_column;
<a name="l01034"></a>01034 
<a name="l01035"></a>01035             <span class="keywordflow">for</span> ( tmp_row=0 ; tmp_row&lt; <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number) ; tmp_row++ )
<a name="l01036"></a>01036                 <span class="keywordflow">for</span> ( tmp_column=0 ; tmp_column&lt;nb_columns ; tmp_column++ )
<a name="l01037"></a>01037                     <span class="keywordflow">if</span> ( !<a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l01038"></a>01038                                                     tmp_column,
<a name="l01039"></a>01039                                                     tmp_row ))
<a name="l01040"></a>01040                     {
<a name="l01041"></a>01041                         <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l01042"></a>01042                                                   tmp_column,
<a name="l01043"></a>01043                                                   tmp_row,
<a name="l01044"></a>01044                                                   <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l01045"></a>01045                                                                             nb_columns,
<a name="l01046"></a>01046                                                                             row ));
<a name="l01047"></a>01047                         <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l01048"></a>01048                                                   nb_columns,
<a name="l01049"></a>01049                                                   row,
<a name="l01050"></a>01050                                                   0 );
<a name="l01051"></a>01051                         tmp_row = <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number);
<a name="l01052"></a>01052                         tmp_column = nb_columns;
<a name="l01053"></a>01053                     }
<a name="l01054"></a>01054         }
<a name="l01055"></a>01055     }
<a name="l01056"></a>01056 
<a name="l01057"></a>01057     <span class="comment">/* change the size of the last column */</span>
<a name="l01058"></a>01058     <a class="code" href="gsb__data__form_8c.html#a18aec71c64bac7bd9c7da37e05254d3e">gsb_data_form_set_width_column</a> ( account_number,
<a name="l01059"></a>01059                                      nb_columns - 1,
<a name="l01060"></a>01060                                      <a class="code" href="gsb__data__form_8c.html#a7e138cf8515b9688315d67ef12c338d9">gsb_data_form_get_width_column</a> ( account_number,
<a name="l01061"></a>01061                                                                       nb_columns )
<a name="l01062"></a>01062                                      +
<a name="l01063"></a>01063                                      <a class="code" href="gsb__data__form_8c.html#a7e138cf8515b9688315d67ef12c338d9">gsb_data_form_get_width_column</a> ( account_number,
<a name="l01064"></a>01064                                                                       nb_columns ));
<a name="l01065"></a>01065     <a class="code" href="gsb__data__form_8c.html#a18aec71c64bac7bd9c7da37e05254d3e">gsb_data_form_set_width_column</a> ( account_number,
<a name="l01066"></a>01066                                      nb_columns,
<a name="l01067"></a>01067                                      0 );
<a name="l01068"></a>01068 
<a name="l01069"></a>01069     <span class="comment">/* fill the list */</span>
<a name="l01070"></a>01070     gsb_form_config_realized ( form_config_tree_view, NULL );
<a name="l01071"></a>01071     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l01072"></a>01072         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l01073"></a>01073     <span class="keywordflow">return</span> FALSE;
<a name="l01074"></a>01074 }
<a name="l01075"></a>01075 
<a name="l01076"></a>01076 
<a name="l01077"></a>01077 
<a name="l01089"></a>01089 gboolean gsb_form_config_check_for_removing ( gint account_number,
<a name="l01090"></a>01090                                               gint removing_row )
<a name="l01091"></a>01091 {
<a name="l01092"></a>01092     gint values;
<a name="l01093"></a>01093     gint rows;
<a name="l01094"></a>01094     gint columns;
<a name="l01095"></a>01095 
<a name="l01096"></a>01096     rows = <a class="code" href="gsb__data__form_8c.html#af5613a656e573f2e9a95d1c89c495c1c">gsb_data_form_get_nb_rows</a> (account_number);
<a name="l01097"></a>01097     columns = <a class="code" href="gsb__data__form_8c.html#a4bc1dd95bb028e836ef638b937e28116">gsb_data_form_get_nb_columns</a> (account_number);
<a name="l01098"></a>01098 
<a name="l01099"></a>01099     <span class="keywordflow">if</span> ( !rows
<a name="l01100"></a>01100          ||
<a name="l01101"></a>01101          !columns )
<a name="l01102"></a>01102         <span class="keywordflow">return</span> FALSE;
<a name="l01103"></a>01103 
<a name="l01104"></a>01104     <span class="keywordflow">if</span> ( removing_row )
<a name="l01105"></a>01105         rows--;
<a name="l01106"></a>01106     <span class="keywordflow">else</span>
<a name="l01107"></a>01107         columns--;
<a name="l01108"></a>01108 
<a name="l01109"></a>01109     <span class="comment">/* the minimum of values is 3 : date, debit, credit*/</span>
<a name="l01110"></a>01110 
<a name="l01111"></a>01111     <span class="keywordflow">if</span> ( rows * columns &lt; 3 )
<a name="l01112"></a>01112         <span class="keywordflow">return</span> FALSE;
<a name="l01113"></a>01113 
<a name="l01114"></a>01114     values = <a class="code" href="gsb__data__form_8c.html#af78c7a67288bda5ba85257a29317fc0a">gsb_data_form_get_values_total</a> (account_number);
<a name="l01115"></a>01115 
<a name="l01116"></a>01116      <span class="keywordflow">if</span> ( values &lt;= rows*columns )
<a name="l01117"></a>01117         <span class="keywordflow">return</span> TRUE;
<a name="l01118"></a>01118     <span class="keywordflow">else</span>
<a name="l01119"></a>01119         <span class="keywordflow">return</span> FALSE;
<a name="l01120"></a>01120 }
<a name="l01121"></a>01121 
<a name="l01122"></a>01122 
<a name="l01133"></a>01133 gboolean gsb_form_config_drag_begin ( GtkWidget *tree_view,
<a name="l01134"></a>01134                                       GdkDragContext *drag_context,
<a name="l01135"></a>01135                                       gpointer null )
<a name="l01136"></a>01136 {
<a name="l01137"></a>01137     gint x, y;
<a name="l01138"></a>01138     GtkTreePath *path;
<a name="l01139"></a>01139     GtkTreeViewColumn *tree_column;
<a name="l01140"></a>01140     GdkWindow *drawable;
<a name="l01141"></a>01141     GdkRectangle rectangle;
<a name="l01142"></a>01142     GdkPixbuf *pixbuf_cursor;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144     <span class="comment">/* get the cell coord */</span>
<a name="l01145"></a>01145     gdk_window_get_pointer ( gtk_tree_view_get_bin_window ( GTK_TREE_VIEW ( tree_view )),
<a name="l01146"></a>01146                              &amp;x,
<a name="l01147"></a>01147                              &amp;y,
<a name="l01148"></a>01148                              FALSE );
<a name="l01149"></a>01149     gtk_tree_view_get_path_at_pos ( GTK_TREE_VIEW ( tree_view ),
<a name="l01150"></a>01150                                     x,
<a name="l01151"></a>01151                                     y,
<a name="l01152"></a>01152                                     &amp;path,
<a name="l01153"></a>01153                                     &amp;tree_column,
<a name="l01154"></a>01154                                     NULL, NULL );
<a name="l01155"></a>01155 
<a name="l01156"></a>01156     <span class="keywordflow">if</span> ( !path
<a name="l01157"></a>01157          ||
<a name="l01158"></a>01158          !tree_column )
<a name="l01159"></a>01159         <span class="keywordflow">return</span> FALSE;
<a name="l01160"></a>01160 
<a name="l01161"></a>01161     start_drag_column = g_list_index ( gtk_tree_view_get_columns ( GTK_TREE_VIEW ( tree_view )),
<a name="l01162"></a>01162                                        tree_column );
<a name="l01163"></a>01163     start_drag_row = <a class="code" href="utils__str_8c.html#a5653e4c704f0c344ca9d1549561f9cd3" title="Secured version of atoi.">utils_str_atoi</a> ( gtk_tree_path_to_string ( path ));
<a name="l01164"></a>01164 
<a name="l01165"></a>01165     <span class="comment">/* draw the new cursor */</span>
<a name="l01166"></a>01166     drawable = gtk_tree_view_get_bin_window (GTK_TREE_VIEW ( tree_view ));
<a name="l01167"></a>01167     gtk_tree_view_get_cell_area ( GTK_TREE_VIEW ( tree_view ),
<a name="l01168"></a>01168                                   path,
<a name="l01169"></a>01169                                   tree_column,
<a name="l01170"></a>01170                                   &amp;rectangle );
<a name="l01171"></a>01171     pixbuf_cursor = gdk_pixbuf_get_from_drawable ( NULL,
<a name="l01172"></a>01172                                                    GDK_DRAWABLE (drawable),
<a name="l01173"></a>01173                                                    gdk_colormap_get_system (),
<a name="l01174"></a>01174                                                    rectangle.x, rectangle.y,
<a name="l01175"></a>01175                                                    0, 0,
<a name="l01176"></a>01176                                                    rectangle.width, rectangle.height );
<a name="l01177"></a>01177     gtk_drag_source_set_icon_pixbuf ( tree_view,
<a name="l01178"></a>01178                                       pixbuf_cursor );
<a name="l01179"></a>01179     g_object_unref (pixbuf_cursor);
<a name="l01180"></a>01180 
<a name="l01181"></a>01181     <span class="keywordflow">return</span> FALSE;
<a name="l01182"></a>01182 }
<a name="l01183"></a>01183                                         
<a name="l01184"></a>01184 
<a name="l01195"></a>01195 gboolean gsb_form_config_drag_end ( GtkWidget *tree_view,
<a name="l01196"></a>01196                                     GdkDragContext *drag_context,
<a name="l01197"></a>01197                                     gpointer null )
<a name="l01198"></a>01198 {
<a name="l01199"></a>01199     gint x, y;
<a name="l01200"></a>01200     GtkTreePath *path;
<a name="l01201"></a>01201     GtkTreeViewColumn *tree_column;
<a name="l01202"></a>01202     gint end_drag_row;
<a name="l01203"></a>01203     gint end_drag_column;
<a name="l01204"></a>01204     gint buffer;
<a name="l01205"></a>01205     gint account_number;
<a name="l01206"></a>01206 
<a name="l01207"></a>01207     <span class="comment">/* get the cell position */</span>
<a name="l01208"></a>01208     gdk_window_get_pointer ( gtk_tree_view_get_bin_window ( GTK_TREE_VIEW ( tree_view )),
<a name="l01209"></a>01209                              &amp;x,
<a name="l01210"></a>01210                              &amp;y,
<a name="l01211"></a>01211                              FALSE );
<a name="l01212"></a>01212     gtk_tree_view_get_path_at_pos ( GTK_TREE_VIEW ( tree_view ),
<a name="l01213"></a>01213                                     x,
<a name="l01214"></a>01214                                     y,
<a name="l01215"></a>01215                                     &amp;path,
<a name="l01216"></a>01216                                     &amp;tree_column,
<a name="l01217"></a>01217                                     NULL,
<a name="l01218"></a>01218                                     NULL );
<a name="l01219"></a>01219 
<a name="l01220"></a>01220     <span class="keywordflow">if</span> ( !path
<a name="l01221"></a>01221          ||
<a name="l01222"></a>01222          !tree_column )
<a name="l01223"></a>01223         <span class="keywordflow">return</span> FALSE;
<a name="l01224"></a>01224 
<a name="l01225"></a>01225     end_drag_column = g_list_index ( gtk_tree_view_get_columns ( GTK_TREE_VIEW ( tree_view )),
<a name="l01226"></a>01226                                      tree_column );
<a name="l01227"></a>01227     end_drag_row = <a class="code" href="utils__str_8c.html#a5653e4c704f0c344ca9d1549561f9cd3" title="Secured version of atoi.">utils_str_atoi</a> ( gtk_tree_path_to_string ( path ));
<a name="l01228"></a>01228 
<a name="l01229"></a>01229     <span class="comment">/* if we are on the same cell, go away */</span>
<a name="l01230"></a>01230     <span class="keywordflow">if</span> ( start_drag_row == end_drag_row
<a name="l01231"></a>01231          &amp;&amp;
<a name="l01232"></a>01232          start_drag_column == end_drag_column )
<a name="l01233"></a>01233         <span class="keywordflow">return</span> ( FALSE );
<a name="l01234"></a>01234 
<a name="l01235"></a>01235     <span class="comment">/* swap the cells in the tab */</span>
<a name="l01236"></a>01236     account_number = <a class="code" href="gsb__account_8c.html#a8c27c31186134dfd2a9ee5a1ca0b4d2d">gsb_account_get_combo_account_number</a> ( accounts_combobox );
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     buffer = <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l01239"></a>01239                                        start_drag_column,
<a name="l01240"></a>01240                                        start_drag_row );
<a name="l01241"></a>01241     <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l01242"></a>01242                               start_drag_column,
<a name="l01243"></a>01243                               start_drag_row,
<a name="l01244"></a>01244                               <a class="code" href="gsb__data__form_8c.html#a1f2dc075c964a00b50da003f969bb517">gsb_data_form_get_value</a> ( account_number,
<a name="l01245"></a>01245                                                         end_drag_column,
<a name="l01246"></a>01246                                                         end_drag_row ));
<a name="l01247"></a>01247     <a class="code" href="gsb__data__form_8c.html#a3451cf009bc77b47ab207415c06f5039">gsb_data_form_set_value</a> ( account_number,
<a name="l01248"></a>01248                               end_drag_column,
<a name="l01249"></a>01249                               end_drag_row,
<a name="l01250"></a>01250                               buffer );
<a name="l01251"></a>01251 
<a name="l01252"></a>01252     <span class="comment">/* fill the list */</span>
<a name="l01253"></a>01253     gsb_form_config_fill_store (account_number);
<a name="l01254"></a>01254     <a class="code" href="gsb__form_8c.html#afb1d295baed50f6ee280c64d012b0591">gsb_form_fill_from_account</a> (account_number);
<a name="l01255"></a>01255 
<a name="l01256"></a>01256     <span class="keywordflow">if</span> ( <a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a9d0fa9057da603e64a601d69d7bf2b51">modification_fichier</a> == 0 )
<a name="l01257"></a>01257         <a class="code" href="traitement__variables_8c.html#aa4084b9e508b1d1fea1d09c6b6208021">modification_fichier</a> ( TRUE );
<a name="l01258"></a>01258     <span class="keywordflow">return</span> (FALSE);
<a name="l01259"></a>01259 }
<a name="l01260"></a>01260 
<a name="l01261"></a>01261 
<a name="l01262"></a>01262 
<a name="l01263"></a>01263 <span class="comment">/* Local Variables: */</span>
<a name="l01264"></a>01264 <span class="comment">/* c-basic-offset: 4 */</span>
<a name="l01265"></a>01265 <span class="comment">/* End: */</span>
<a name="l01266"></a>01266 
<a name="l01267"></a>01267 
<a name="l01268"></a>01268 
<a name="l01269"></a>01269 
<a name="l01270"></a>01270 
<a name="l01271"></a>01271 
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Généré le Sat Aug 7 22:12:02 2010 pour Grisbi par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
