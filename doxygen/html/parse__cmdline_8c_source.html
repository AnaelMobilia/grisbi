<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Grisbi:  Fichier source de parse_cmdline.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&nbsp;associées</span></a></li>
      <li><a href="annotated.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
    </ul>
  </div>
<h1>parse_cmdline.c</h1><a href="parse__cmdline_8c.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* *******************************************************************************/</span>
<a name="l00002"></a>00002 <span class="comment">/*                                                                               */</span>
<a name="l00003"></a>00003 <span class="comment">/*     This program is free software; you can redistribute it and/or modify      */</span>
<a name="l00004"></a>00004 <span class="comment">/*     it under the terms of the GNU General Public License as published by      */</span>
<a name="l00005"></a>00005 <span class="comment">/*     the Free Software Foundation; either version 2 of the License, or         */</span>
<a name="l00006"></a>00006 <span class="comment">/*     (at your option) any later version.                                       */</span>
<a name="l00007"></a>00007 <span class="comment">/*                                                                               */</span>
<a name="l00008"></a>00008 <span class="comment">/*     This program is distributed in the hope that it will be useful,           */</span>
<a name="l00009"></a>00009 <span class="comment">/*     but WITHOUT ANY WARRANTY; without even the implied warranty of            */</span>
<a name="l00010"></a>00010 <span class="comment">/*     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             */</span>
<a name="l00011"></a>00011 <span class="comment">/*     GNU General Public License for more details.                              */</span>
<a name="l00012"></a>00012 <span class="comment">/*                                                                               */</span>
<a name="l00013"></a>00013 <span class="comment">/*     You should have received a copy of the GNU General Public License         */</span>
<a name="l00014"></a>00014 <span class="comment">/*     along with this program; if not, write to the Free Software               */</span>
<a name="l00015"></a>00015 <span class="comment">/*     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */</span>
<a name="l00016"></a>00016 <span class="comment">/*                                                                               */</span>
<a name="l00017"></a>00017 <span class="comment">/* *******************************************************************************/</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;getopt.h&gt;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="comment">/*START_INCLUDE*/</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="parse__cmdline_8h.html">parse_cmdline.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="gsb__plugins_8h.html">gsb_plugins.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="main_8h.html">main.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="utils__str_8h.html">utils_str.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="comment">/*END_INCLUDE*/</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*START_STATIC*/</span>
<a name="l00032"></a>00032 <span class="keyword">static</span> gboolean is_valid_window_number(gint w);
<a name="l00033"></a>00033 <span class="keyword">static</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8">CMDLINE_ERRNO</a> parse_tab_parameters(<span class="keywordtype">char</span> *tab_parameters, <a class="code" href="struct__cmdline__options.html">cmdline_options</a>* pOpt);
<a name="l00034"></a>00034 <span class="keyword">static</span> <span class="keywordtype">void</span> show_errstr(gint errval, gchar* extra);
<a name="l00035"></a>00035 <span class="keyword">static</span> <span class="keywordtype">void</span> show_help(<span class="keywordtype">void</span>);
<a name="l00036"></a>00036 <span class="keyword">static</span> <span class="keywordtype">void</span> show_usage ( gint errval, gchar* extra );
<a name="l00037"></a>00037 <span class="keyword">static</span> <span class="keywordtype">void</span> show_version(<span class="keywordtype">void</span>);
<a name="l00038"></a>00038 <span class="comment">/*END_STATIC*/</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="keyword">static</span> <span class="keywordtype">char</span>*         short_options  = <span class="stringliteral">&quot;t:vh&quot;</span>; 
<a name="l00042"></a>00042 <span class="keyword">static</span> <span class="keyword">struct </span>option long_options[] =           
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044     {<span class="stringliteral">&quot;version&quot;</span>, no_argument,       0, <span class="charliteral">&#39;V&#39;</span>},     
<a name="l00045"></a>00045     {<span class="stringliteral">&quot;help&quot;</span>   , no_argument,       0, <span class="charliteral">&#39;H&#39;</span>},     
<a name="l00046"></a>00046     {0, 0, 0, 0} <span class="comment">/* end of long arg list DO NOT REMOVE */</span>
<a name="l00047"></a>00047 };
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="comment">/* Please make sure to keep consistency between short_options/long_options and USAGE_STRING/HELP_STRING definition */</span>
<a name="l00050"></a><a class="code" href="parse__cmdline_8c.html#adaf976c6dc58f7e99f48c052f3d75966">00050</a> <span class="preprocessor">#define   GET_DETAIL N_(&quot;Try grisbi --help for details\n\n&quot;)</span>
<a name="l00051"></a><a class="code" href="parse__cmdline_8c.html#a6bd2376a5785c748b0ab78659aa5f70d">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define   USAGE_STRING N_(&quot;Usage: gribi [--version | -v] | [--help | -?]\n&quot;)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="parse__cmdline_8c.html#aafab6ebaf6f1a928f8b54482dffc489e">00053</a> <span class="preprocessor">#define   HELP_STRING                                                          \</span>
<a name="l00054"></a>00054 <span class="preprocessor"> N_(&quot;grisbi [options] [file]\n&quot;                                                 \</span>
<a name="l00055"></a>00055 <span class="preprocessor">    &quot;  --help                    Show this help message and exit\n&quot;        \</span>
<a name="l00056"></a>00056 <span class="preprocessor">    &quot;  -v, --version             Show version number and exit\n&quot;           \</span>
<a name="l00057"></a>00057 <span class="preprocessor">   )</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00072"></a><a class="code" href="parse__cmdline_8h.html#ac87b7fb7cbd26b718fdfdc0000848ce1">00072</a> gboolean  <a class="code" href="parse__cmdline_8c.html#ac87b7fb7cbd26b718fdfdc0000848ce1">parse_options</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv, <a class="code" href="struct__cmdline__options.html">cmdline_options</a> *pOpt, gint* pErrval)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074     gboolean still_args_to_treat = TRUE; 
<a name="l00075"></a>00075     <span class="keywordtype">int</span>      option_index        = 0;    
<a name="l00076"></a>00076     gboolean app_must_stop       = FALSE;
<a name="l00077"></a>00077         
<a name="l00078"></a>00078     *pErrval = <a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a4e164121d67b9eb5ea18adb3af48e97d">CMDLINE_SYNTAX_OK</a>);
<a name="l00079"></a>00079         <span class="comment">/* init param de retour */</span>
<a name="l00080"></a>00080         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a4328407a3f2753ee2ade2e1d86586b6a">demande_page</a>         = 0;
<a name="l00081"></a>00081         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a071d435b696334ddd4ac55cb1c22a4bd">fichier</a>              = NULL;
<a name="l00082"></a>00082         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a17f73c4dfdcd6e8b3132a7b7b8bbc30a">report_no</a>            = -1;
<a name="l00083"></a>00083         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#ae4d0b95438eee9ae52740d9e1a7b2774">customization_tab_no</a> = -1;
<a name="l00084"></a>00084         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#ab8fc8de9dacd72114e96abb6efe0ab19">subcustom_tab_no</a>     = -1;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="keywordflow">while</span> ((<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a4e164121d67b9eb5ea18adb3af48e97d">CMDLINE_SYNTAX_OK</a>==<a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(*pErrval)) &amp;&amp; (still_args_to_treat) &amp;&amp; (!app_must_stop))
<a name="l00087"></a>00087         {
<a name="l00088"></a>00088         <span class="keywordtype">int</span> c;
<a name="l00089"></a>00089         <span class="keywordflow">switch</span> (c = getopt_long(argc, argv, short_options,long_options, &amp;option_index))
<a name="l00090"></a>00090                 {
<a name="l00091"></a>00091             <span class="comment">/* special getopt return values */</span>
<a name="l00092"></a>00092             <span class="keywordflow">case</span> <span class="charliteral">&#39;:&#39;</span>:<span class="comment">/* missing parameter for one of the  options */</span>
<a name="l00093"></a>00093                 *pErrval = <a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a19e02f72690914b1a9528060b62cc245">CMDLINE_MISSING_PARAMETER</a>);
<a name="l00094"></a>00094                 show_usage( (gint)(*pErrval), argv[option_index]);
<a name="l00095"></a>00095                 <span class="keywordflow">break</span>;
<a name="l00096"></a>00096             <span class="keywordflow">default</span>: <span class="comment">/* unmanaged options */</span>
<a name="l00097"></a>00097                 *pErrval = <a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8ad6d175fc632325bd1adc3e5b7bf09566">CMDLINE_SYNTAX_ERROR</a>);
<a name="l00098"></a>00098                 show_usage( (gint)(*pErrval), argv[option_index]);
<a name="l00099"></a>00099                 <span class="keywordflow">break</span>;
<a name="l00100"></a>00100             <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:<span class="comment">/* unknown option character */</span>
<a name="l00101"></a>00101                 *pErrval = <a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a8bb992a49477bca4ec50ac6753636fed">CMDLINE_UNKNOWN_OPTION</a>);
<a name="l00102"></a>00102                 show_usage( (gint)(*pErrval), argv[option_index]);
<a name="l00103"></a>00103                 <span class="keywordflow">break</span>;
<a name="l00104"></a>00104             <span class="keywordflow">case</span> EOF:<span class="comment">/* all options parsed */</span>
<a name="l00105"></a>00105                 still_args_to_treat = FALSE;
<a name="l00106"></a>00106                 <span class="keywordflow">break</span>;
<a name="l00107"></a>00107             
<a name="l00108"></a>00108             <span class="comment">/* configured returned values */</span>
<a name="l00109"></a>00109             <span class="comment">/* -h : short help = usage */</span>
<a name="l00110"></a>00110             <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span> : <span class="comment">/* -v */</span>
<a name="l00111"></a>00111             <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span> : <span class="comment">/* --version */</span>
<a name="l00112"></a>00112                 app_must_stop       = TRUE; <span class="comment">/* stopping here! */</span>
<a name="l00113"></a>00113                 show_version();    
<a name="l00114"></a>00114                 <span class="keywordflow">break</span>;
<a name="l00115"></a>00115             <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:  <span class="comment">/* -h */</span>
<a name="l00116"></a>00116             <span class="keywordflow">case</span> <span class="charliteral">&#39;H&#39;</span>:  <span class="comment">/* --help */</span>
<a name="l00117"></a>00117                 app_must_stop       = TRUE; <span class="comment">/* stopping here! */</span>
<a name="l00118"></a>00118                 show_help();
<a name="l00119"></a>00119                 <span class="keywordflow">break</span>; 
<a name="l00120"></a>00120             <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>: <span class="comment">/* -t &lt;str&gt; */</span>
<a name="l00121"></a>00121             <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>: <span class="comment">/* --tab[=]&lt;optarg&gt; */</span>
<a name="l00122"></a>00122                 <span class="keywordflow">if</span> (!optarg)
<a name="l00123"></a>00123                 {
<a name="l00124"></a>00124                     <span class="comment">/* Denote a getopt configuration error, arg is required should never happend, but ... */</span>
<a name="l00125"></a>00125                     *pErrval = <a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8ad3e5ca703a57c2f14328b0a6ade016d0">CMDLINE_GETOPT_CONFIGURATION_ERROR</a>);
<a name="l00126"></a>00126                     show_usage((gint)(*pErrval),<span class="stringliteral">&quot;&quot;</span>);
<a name="l00127"></a>00127                         } 
<a name="l00128"></a>00128                 <span class="keywordflow">else</span>
<a name="l00129"></a>00129                         {
<a name="l00130"></a>00130                     <span class="comment">/* optarg contains argument parameter */</span>
<a name="l00131"></a>00131                     <span class="keywordflow">if</span> (<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a4e164121d67b9eb5ea18adb3af48e97d">CMDLINE_SYNTAX_OK</a> != (*pErrval = parse_tab_parameters(optarg, pOpt)))
<a name="l00132"></a>00132                         show_usage((gint)(*pErrval),<span class="stringliteral">&quot;&quot;</span>);
<a name="l00133"></a>00133                         } 
<a name="l00134"></a>00134                 <span class="keywordflow">break</span>; 
<a name="l00135"></a>00135                                 }
<a name="l00136"></a>00136                         }
<a name="l00137"></a>00137     <span class="comment">/* Manual management of command line arguments */</span>
<a name="l00138"></a>00138     <span class="keywordflow">if</span>(optind &gt;= argc) <span class="comment">/* no more arguments */</span>
<a name="l00139"></a>00139                         {
<a name="l00140"></a>00140                         }
<a name="l00141"></a>00141     <span class="keywordflow">else</span> <span class="keywordflow">while</span> (optind &lt; argc)
<a name="l00142"></a>00142                 {
<a name="l00143"></a>00143         <span class="comment">/* first found arg should be a gsb file */</span>
<a name="l00144"></a>00144         <span class="comment">/* so if Opt-&gt;fichier is not NULL, we have more than one extra arg! */</span>
<a name="l00145"></a>00145         <span class="keywordflow">if</span> (pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a071d435b696334ddd4ac55cb1c22a4bd">fichier</a> != NULL)
<a name="l00146"></a>00146                         {
<a name="l00147"></a>00147             show_usage(<a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(<a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8aa0c079361f27bb7ae4e031065437fd30">CMDLINE_TOO_MANY_PARAMETERS</a>),argv[optind]);
<a name="l00148"></a>00148             <span class="keywordflow">break</span>;
<a name="l00149"></a>00149                         }
<a name="l00150"></a>00150         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a071d435b696334ddd4ac55cb1c22a4bd">fichier</a> = g_strdup(argv[optind]);
<a name="l00151"></a>00151         optind++;
<a name="l00152"></a>00152                 }
<a name="l00153"></a>00153                 
<a name="l00154"></a>00154     <span class="keywordflow">return</span> ((gboolean)((*pErrval)==0)&amp;&amp;(!app_must_stop));
<a name="l00155"></a>00155         
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00166"></a>00166 <span class="keywordtype">void</span> show_version(<span class="keywordtype">void</span>)
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168 <span class="preprocessor">#ifdef HAVE_PLUGINS</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>    <a class="code" href="gsb__plugins_8c.html#a63124d64ba3d44f175f5c30ee608c1b0">gsb_plugins_scan_dir</a> ( PLUGINS_DIR );
<a name="l00170"></a>00170 <span class="preprocessor">#endif</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span>
<a name="l00172"></a>00172     g_print(N_(<span class="stringliteral">&quot;Grisbi version %s, %s\n&quot;</span>), VERSION, <a class="code" href="gsb__plugins_8c.html#a9f59967389b32ce61da777570db3bd70">gsb_plugin_get_list</a>());
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00182"></a>00182 <span class="keywordtype">void</span> show_help(<span class="keywordtype">void</span>)
<a name="l00183"></a>00183 {
<a name="l00184"></a>00184     show_usage(0,NULL);
<a name="l00185"></a>00185     g_print(<a class="code" href="parse__cmdline_8c.html#aafab6ebaf6f1a928f8b54482dffc489e">HELP_STRING</a>);
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 
<a name="l00198"></a>00198 <span class="keywordtype">void</span> show_usage ( gint errval, gchar* extra )
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200     show_errstr(errval,extra);
<a name="l00201"></a>00201     g_printerr(<a class="code" href="parse__cmdline_8c.html#a6bd2376a5785c748b0ab78659aa5f70d">USAGE_STRING</a>);
<a name="l00202"></a>00202 }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 
<a name="l00214"></a>00214 <span class="keywordtype">void</span> show_errstr(gint errval, gchar* extra)
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216     <span class="keywordflow">switch</span> (<a class="code" href="parse__cmdline_8h.html#af31dfbab816122e327305dced3588e23">CMDLINE_ERROR</a>(errval))
<a name="l00217"></a>00217     {
<a name="l00218"></a>00218         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a4e164121d67b9eb5ea18adb3af48e97d">CMDLINE_SYNTAX_OK</a>:<span class="comment">/* do nothing!*/</span>
<a name="l00219"></a>00219             <span class="keywordflow">break</span>;
<a name="l00220"></a>00220         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a19e02f72690914b1a9528060b62cc245">CMDLINE_MISSING_PARAMETER</a>:
<a name="l00221"></a>00221             g_printerr(_(<span class="stringliteral">&quot;Missing parameter for option %s\n\n&quot;</span>),extra);
<a name="l00222"></a>00222             <span class="keywordflow">break</span>;
<a name="l00223"></a>00223         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8ad6d175fc632325bd1adc3e5b7bf09566">CMDLINE_SYNTAX_ERROR</a>:
<a name="l00224"></a>00224             g_printerr(_(<span class="stringliteral">&quot;Syntax error (%s)\n\n&quot;</span>),extra);
<a name="l00225"></a>00225             <span class="keywordflow">break</span>;
<a name="l00226"></a>00226         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a8bb992a49477bca4ec50ac6753636fed">CMDLINE_UNKNOWN_OPTION</a>:
<a name="l00227"></a>00227              g_printerr(_(<span class="stringliteral">&quot;Unknown option (%s)\n\n&quot;</span>),extra);
<a name="l00228"></a>00228             <span class="keywordflow">break</span>;
<a name="l00229"></a>00229         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8aa0c079361f27bb7ae4e031065437fd30">CMDLINE_TOO_MANY_PARAMETERS</a>:
<a name="l00230"></a>00230             g_printerr(_(<span class="stringliteral">&quot;Too many parameters (%s)\n\n&quot;</span>),extra);
<a name="l00231"></a>00231             <span class="keywordflow">break</span>;
<a name="l00232"></a>00232         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8ad9e3873d4d37e84f7e48a100a72f59c0">CMDLINE_TAB_ID_OUT_OF_RANGE</a>:
<a name="l00233"></a>00233             g_printerr(_(<span class="stringliteral">&quot;Tab is is out of range (%s)\n\n&quot;</span>),extra);
<a name="l00234"></a>00234             <span class="keywordflow">break</span>;
<a name="l00235"></a>00235         <span class="keywordflow">case</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8ad3e5ca703a57c2f14328b0a6ade016d0">CMDLINE_GETOPT_CONFIGURATION_ERROR</a>:
<a name="l00236"></a>00236             g_printerr(_(<span class="stringliteral">&quot;Something strange happend (%s)\n\n&quot;</span>),extra);
<a name="l00237"></a>00237             <span class="keywordflow">break</span>;            
<a name="l00238"></a>00238         <span class="keywordflow">default</span>:
<a name="l00239"></a>00239             g_printerr(_(<span class="stringliteral">&quot;Syntax error!\n\n&quot;</span>));
<a name="l00240"></a>00240             <span class="keywordflow">break</span>;
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 
<a name="l00257"></a>00257 <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8">CMDLINE_ERRNO</a> parse_tab_parameters(<span class="keywordtype">char</span> *tab_parameters, <a class="code" href="struct__cmdline__options.html">cmdline_options</a>* pOpt)
<a name="l00258"></a>00258 {
<a name="l00259"></a>00259         gchar **split_chiffres;
<a name="l00260"></a>00260         gint    w, x, y, z;
<a name="l00261"></a>00261         
<a name="l00262"></a>00262         w = x = y = z = -1;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     split_chiffres = g_strsplit ( tab_parameters, <span class="stringliteral">&quot;,&quot;</span>, 0 );
<a name="l00265"></a>00265         
<a name="l00266"></a>00266         <span class="keywordflow">if</span> (split_chiffres[0] == NULL)
<a name="l00267"></a>00267         {
<a name="l00268"></a>00268                 <span class="comment">/* on s&#39;attend à avoir au moins un numero d&#39;onglet */</span>
<a name="l00269"></a>00269         <span class="keywordflow">return</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a19e02f72690914b1a9528060b62cc245">CMDLINE_MISSING_PARAMETER</a>;
<a name="l00270"></a>00270         }
<a name="l00271"></a>00271         
<a name="l00272"></a>00272         w = <a class="code" href="utils__str_8c.html#a5653e4c704f0c344ca9d1549561f9cd3" title="Secured version of atoi.">utils_str_atoi</a>(split_chiffres[0]); 
<a name="l00273"></a>00273         <span class="keywordflow">if</span> ( !is_valid_window_number(w) )
<a name="l00274"></a>00274         {
<a name="l00275"></a>00275         <span class="keywordflow">return</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8ad9e3873d4d37e84f7e48a100a72f59c0">CMDLINE_TAB_ID_OUT_OF_RANGE</a>;
<a name="l00276"></a>00276         }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278         <span class="keywordflow">if</span> (w == 7)
<a name="l00279"></a>00279         {
<a name="l00280"></a>00280                 <span class="comment">/* Fenetre des etats. Lit parametres restant si il y en a. */</span>
<a name="l00281"></a>00281                 <span class="keywordflow">if</span> (split_chiffres[1]) 
<a name="l00282"></a>00282                 {
<a name="l00283"></a>00283                         x = <a class="code" href="utils__str_8c.html#a5653e4c704f0c344ca9d1549561f9cd3" title="Secured version of atoi.">utils_str_atoi</a>(split_chiffres[1]);
<a name="l00284"></a>00284                 
<a name="l00285"></a>00285                         <span class="keywordflow">if</span> (split_chiffres[2]) 
<a name="l00286"></a>00286                         {
<a name="l00287"></a>00287                                 y = <a class="code" href="utils__str_8c.html#a5653e4c704f0c344ca9d1549561f9cd3" title="Secured version of atoi.">utils_str_atoi</a>(split_chiffres[2]);
<a name="l00288"></a>00288                                 <span class="keywordflow">if</span> (split_chiffres[3]) 
<a name="l00289"></a>00289                                 {
<a name="l00290"></a>00290                                         z = <a class="code" href="utils__str_8c.html#a5653e4c704f0c344ca9d1549561f9cd3" title="Secured version of atoi.">utils_str_atoi</a>(split_chiffres[3]);
<a name="l00291"></a>00291                                 }
<a name="l00292"></a>00292                         }
<a name="l00293"></a>00293                 }
<a name="l00294"></a>00294         }
<a name="l00295"></a>00295         
<a name="l00296"></a>00296 
<a name="l00297"></a>00297         <span class="comment">/* Tout c&#39;est bien passé, on peut ranger les valeurs dans la var. de retour */</span>
<a name="l00298"></a>00298         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a4328407a3f2753ee2ade2e1d86586b6a">demande_page</a>         = 1;
<a name="l00299"></a>00299         
<a name="l00300"></a>00300         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a98c0ca7473a483639e4ff71453f508cc">page_w</a>               = w;
<a name="l00301"></a>00301         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#a17f73c4dfdcd6e8b3132a7b7b8bbc30a">report_no</a>            = x;
<a name="l00302"></a>00302         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#ae4d0b95438eee9ae52740d9e1a7b2774">customization_tab_no</a> = y;
<a name="l00303"></a>00303         pOpt-&gt;<a class="code" href="struct__cmdline__options.html#ab8fc8de9dacd72114e96abb6efe0ab19">subcustom_tab_no</a>     = z;
<a name="l00304"></a>00304         
<a name="l00305"></a>00305     <span class="keywordflow">return</span> <a class="code" href="parse__cmdline_8h.html#a693cd18c8525f58d567c1bfadb5172a8a4e164121d67b9eb5ea18adb3af48e97d">CMDLINE_SYNTAX_OK</a>;
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 }
<a name="l00308"></a>00308 
<a name="l00309"></a>00309         
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="parse__cmdline_8c.html#ab0263fa09c96c836fbaf59de060094d0">00312</a> <span class="preprocessor">#define  NB_MAX_ONGLET    8 </span>
<a name="l00313"></a>00313 <span class="preprocessor"></span>
<a name="l00323"></a>00323 gboolean is_valid_window_number(gint w)
<a name="l00324"></a>00324 {
<a name="l00325"></a>00325         <span class="comment">/* Valeurs valides:</span>
<a name="l00326"></a>00326 <span class="comment">         * 1)  -1: fenêtre de configuration</span>
<a name="l00327"></a>00327 <span class="comment">         * 2)  0..NB_MAX_ONGLET-1: onglet</span>
<a name="l00328"></a>00328 <span class="comment">         */</span>
<a name="l00329"></a>00329         <span class="keywordflow">return</span> ((w &gt;= -1) &amp;&amp; (w &lt; <a class="code" href="parse__cmdline_8c.html#ab0263fa09c96c836fbaf59de060094d0">NB_MAX_ONGLET</a>));
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 
<a name="l00333"></a>00333 <span class="comment">/* Local Variables: */</span>
<a name="l00334"></a>00334 <span class="comment">/* c-basic-offset: 4 */</span>
<a name="l00335"></a>00335 <span class="comment">/* End: */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Généré le Sat Aug 7 22:12:03 2010 pour Grisbi par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
