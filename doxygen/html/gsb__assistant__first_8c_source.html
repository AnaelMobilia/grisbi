<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Grisbi:  Fichier source de gsb_assistant_first.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Page&nbsp;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&nbsp;associées</span></a></li>
      <li><a href="annotated.html"><span>Structures&nbsp;de&nbsp;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Liste&nbsp;des&nbsp;fichiers</span></a></li>
      <li><a href="globals.html"><span>Portée&nbsp;globale</span></a></li>
    </ul>
  </div>
<h1>gsb_assistant_first.c</h1><a href="gsb__assistant__first_8c.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ************************************************************************** */</span>
<a name="l00002"></a>00002 <span class="comment">/*                                                                            */</span>
<a name="l00003"></a>00003 <span class="comment">/*     Copyright (C)    2000-2008 Cédric Auger (cedric@grisbi.org)            */</span>
<a name="l00004"></a>00004 <span class="comment">/*          2003-2009 Benjamin Drieu (bdrieu@april.org)                       */</span>
<a name="l00005"></a>00005 <span class="comment">/*          http://www.grisbi.org                                             */</span>
<a name="l00006"></a>00006 <span class="comment">/*                                                                            */</span>
<a name="l00007"></a>00007 <span class="comment">/*  This program is free software; you can redistribute it and/or modify      */</span>
<a name="l00008"></a>00008 <span class="comment">/*  it under the terms of the GNU General Public License as published by      */</span>
<a name="l00009"></a>00009 <span class="comment">/*  the Free Software Foundation; either version 2 of the License, or         */</span>
<a name="l00010"></a>00010 <span class="comment">/*  (at your option) any later version.                                       */</span>
<a name="l00011"></a>00011 <span class="comment">/*                                                                            */</span>
<a name="l00012"></a>00012 <span class="comment">/*  This program is distributed in the hope that it will be useful,           */</span>
<a name="l00013"></a>00013 <span class="comment">/*  but WITHOUT ANY WARRANTY; without even the implied warranty of            */</span>
<a name="l00014"></a>00014 <span class="comment">/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the             */</span>
<a name="l00015"></a>00015 <span class="comment">/*  GNU General Public License for more details.                              */</span>
<a name="l00016"></a>00016 <span class="comment">/*                                                                            */</span>
<a name="l00017"></a>00017 <span class="comment">/*  You should have received a copy of the GNU General Public License         */</span>
<a name="l00018"></a>00018 <span class="comment">/*  along with this program; if not, write to the Free Software               */</span>
<a name="l00019"></a>00019 <span class="comment">/*  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA */</span>
<a name="l00020"></a>00020 <span class="comment">/*                                                                            */</span>
<a name="l00021"></a>00021 <span class="comment">/* ************************************************************************** */</span>
<a name="l00022"></a>00022 
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*START_INCLUDE*/</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="gsb__assistant__first_8h.html">gsb_assistant_first.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="gsb__assistant_8h.html">gsb_assistant.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="gsb__assistant__file_8h.html">gsb_assistant_file.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="gsb__automem_8h.html">gsb_automem.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="parametres_8h.html">parametres.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="gsb__file_8h.html">gsb_file.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="traitement__variables_8h.html">traitement_variables.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="dialog_8h.html">dialog.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="utils__files_8h.html">utils_files.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="utils_8h.html">utils.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="structures_8h.html">structures.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="include_8h.html">include.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="comment">/*END_INCLUDE*/</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">/*START_STATIC*/</span>
<a name="l00047"></a>00047 <span class="keyword">static</span> gboolean gsb_assistant_first_enter_page_2 ( GtkWidget *assistant,
<a name="l00048"></a>00048                         gint new_page );
<a name="l00049"></a>00049 <span class="keyword">static</span> gboolean gsb_assistant_first_enter_page_3 ( GtkWidget *assistant,
<a name="l00050"></a>00050                         gint new_page );
<a name="l00051"></a>00051 <span class="keyword">static</span> GtkWidget *gsb_assistant_first_page_2 ( GtkWidget *assistant );
<a name="l00052"></a>00052 <span class="keyword">static</span> GtkWidget *gsb_assistant_first_page_3 ( GtkWidget *assistant );
<a name="l00053"></a>00053 <span class="comment">/*END_STATIC*/</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">/*START_EXTERN*/</span>
<a name="l00056"></a>00056 <span class="keyword">extern</span> gboolean <a class="code" href="gsb__assistant__first_8c.html#ac165dc8e950fecfeea085204f948425e">result_reconcile</a>;
<a name="l00057"></a>00057 <span class="keyword">extern</span> GtkWidget *<a class="code" href="accueil_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>;
<a name="l00058"></a>00058 <span class="comment">/*END_EXTERN*/</span>
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2eca">00060</a> <span class="keyword">enum</span> <a class="code" href="gsb__assistant__account_8c.html#a534a709ba3c1b8b898f949336c2d2eca">first_assistant_page</a>
<a name="l00061"></a>00061 {
<a name="l00062"></a><a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa9df2c40e561c1a5b46974460edea492e">00062</a>     <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa9df2c40e561c1a5b46974460edea492e">FIRST_ASSISTANT_INTRO</a>= 0,
<a name="l00063"></a><a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa3efe228569181d03e959a1fefced13aa">00063</a>     <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa3efe228569181d03e959a1fefced13aa">FIRST_ASSISTANT_PAGE_2</a>,
<a name="l00064"></a><a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaacb4356954bb745ecbd6f1ba73e40e6d3">00064</a>     <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaacb4356954bb745ecbd6f1ba73e40e6d3">FIRST_ASSISTANT_PAGE_3</a>,
<a name="l00065"></a><a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa6fd91e61faa9e79f0c0ee14ead65d72f">00065</a>     <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa6fd91e61faa9e79f0c0ee14ead65d72f">FIRST_ASSISTANT_PAGE_FINISH</a>,
<a name="l00066"></a>00066 };
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 
<a name="l00076"></a><a class="code" href="gsb__assistant__first_8h.html#a690d09449b23b2197933c554f5089a1b">00076</a> GtkResponseType <a class="code" href="gsb__assistant__first_8c.html#a690d09449b23b2197933c554f5089a1b">gsb_assistant_first_run</a> ( <span class="keywordtype">void</span> )
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078     GtkResponseType return_value;
<a name="l00079"></a>00079     GtkWidget *assistant;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <span class="comment">/* create the assistant */</span>
<a name="l00082"></a>00082     assistant = <a class="code" href="gsb__assistant_8c.html#a8502128771d8c3f3e8c83d877e1f20ea">gsb_assistant_new</a> ( _(<span class="stringliteral">&quot;Welcome to Grisbi!&quot;</span>),
<a name="l00083"></a>00083                                     _(<span class="stringliteral">&quot;This is the first time you use Grisbi, this assistant will guide you through the configuration process. &quot;</span>
<a name="l00084"></a>00084                                       <span class="stringliteral">&quot;You can change any option later in the configuration window, &quot;</span>
<a name="l00085"></a>00085                                       <span class="stringliteral">&quot;where many other options are available.\n\n&quot;</span>
<a name="l00086"></a>00086                                       <span class="stringliteral">&quot;Thanks for using Grisbi, enjoy!&quot;</span> ),
<a name="l00087"></a>00087                                     <span class="stringliteral">&quot;grisbi-logo.png&quot;</span>,
<a name="l00088"></a>00088                                     NULL );
<a name="l00089"></a>00089     <a class="code" href="gsb__assistant_8c.html#a6972bde2415e07b7afb35a062456f129">gsb_assistant_add_page</a> ( assistant,
<a name="l00090"></a>00090                              gsb_assistant_first_page_2 (assistant),
<a name="l00091"></a>00091                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa3efe228569181d03e959a1fefced13aa">FIRST_ASSISTANT_PAGE_2</a>,
<a name="l00092"></a>00092                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa9df2c40e561c1a5b46974460edea492e">FIRST_ASSISTANT_INTRO</a>,
<a name="l00093"></a>00093                              0,
<a name="l00094"></a>00094                              G_CALLBACK (gsb_assistant_first_enter_page_2) );
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="comment">/* set up all the default variables */</span>
<a name="l00097"></a>00097     <a class="code" href="traitement__variables_8c.html#a2977fbd2f72d5a8a5da608f804bd2a6f">init_variables</a> ();
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     <span class="comment">/* set up the XDG Environment variables for linux*/</span>
<a name="l00100"></a>00100 <span class="preprocessor">    #ifndef _WIN32</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>        <a class="code" href="utils__files_8c.html#a2bf4ade67ac3b60272da8b85baaff59b" title="create the config and the data directories using the mechanisms described in the...">utils_files_create_XDG_dir</a> ( );
<a name="l00102"></a>00102 <span class="preprocessor">    #endif</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a>00104     <span class="comment">/* now we launch the assistant */</span>
<a name="l00105"></a>00105     return_value = <a class="code" href="gsb__assistant_8c.html#a886a6fa8c458d71d7cfae7b54bd3187f">gsb_assistant_run</a> (assistant);
<a name="l00106"></a>00106     gtk_widget_destroy (assistant);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108     <span class="keywordflow">if</span> (return_value == GTK_RESPONSE_CANCEL)
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110         <span class="comment">/* the user stopped the assistant, we delete all the configured data */</span>
<a name="l00111"></a>00111         <a class="code" href="traitement__variables_8c.html#a2977fbd2f72d5a8a5da608f804bd2a6f">init_variables</a> ();
<a name="l00112"></a>00112         <span class="keywordflow">return</span> return_value;
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* the assistant is finish, we launch the new file assistant */</span>
<a name="l00116"></a>00116     return_value = <a class="code" href="gsb__assistant__file_8c.html#aae9dc6c606124740c2518604c2b77685">gsb_assistant_file_run</a> (TRUE, FALSE);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118     <span class="keywordflow">return</span> return_value;
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00131"></a><a class="code" href="gsb__assistant__first_8h.html#a8b17583fe61c7e9a9eb87a9d02857dce">00131</a> GtkResponseType <a class="code" href="gsb__assistant__first_8c.html#a8b17583fe61c7e9a9eb87a9d02857dce">gsb_assistant_first_come_to_0_6</a> ( <span class="keywordtype">void</span> )
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133     GtkResponseType return_value;
<a name="l00134"></a>00134     GtkWidget *assistant;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136     <span class="comment">/* create the assistant */</span>
<a name="l00137"></a>00137     assistant = <a class="code" href="gsb__assistant_8c.html#a8502128771d8c3f3e8c83d877e1f20ea">gsb_assistant_new</a> ( _(<span class="stringliteral">&quot;Welcome to Grisbi 0.6!&quot;</span>),
<a name="l00138"></a>00138                                     _(<span class="stringliteral">&quot;You are using Grisbi 0.6 for the first time.  While most of the &quot;</span> 
<a name="l00139"></a>00139                                       <span class="stringliteral">&quot;interface has not changed, you will notice a lot of improvements. &quot;</span>
<a name="l00140"></a>00140                                       <span class="stringliteral">&quot;Do not hesitate to read some tips of the day to learn more on the new &quot;</span>
<a name="l00141"></a>00141                                       <span class="stringliteral">&quot;features.\n\n&quot;</span> 
<a name="l00142"></a>00142                                       <span class="stringliteral">&quot;Of the most notable enhancements to Grisbi, we redesigned the &quot;</span>
<a name="l00143"></a>00143                                       <span class="stringliteral">&quot;backup function. &quot;</span>
<a name="l00144"></a>00144                                       <span class="stringliteral">&quot;Grisbi will now automatically put backup files in a directory &quot;</span>
<a name="l00145"></a>00145                                       <span class="stringliteral">&quot;that you will be able to set manually in next screen.\n\n&quot;</span>
<a name="l00146"></a>00146                                       <span class="stringliteral">&quot;Also, we advise you to configure your web browser &quot;</span>
<a name="l00147"></a>00147                                       <span class="stringliteral">&quot;to your system configuration and to configure various settings &quot;</span>
<a name="l00148"></a>00148                                       <span class="stringliteral">&quot;in next screen.\n\n&quot;</span> 
<a name="l00149"></a>00149                                       <span class="stringliteral">&quot;If you want to make backups of your Grisbi file in case you want to revert &quot;</span>
<a name="l00150"></a>00150                                       <span class="stringliteral">&quot;to old version of Grisbi, we would advise you to do that right now.\n\n&quot;</span>
<a name="l00151"></a>00151                                       <span class="stringliteral">&quot;You can find out other improvements on http://www.grisbi.org/.&quot;</span>),
<a name="l00152"></a>00152                                     <span class="stringliteral">&quot;grisbi-logo.png&quot;</span>,
<a name="l00153"></a>00153                                     NULL );
<a name="l00154"></a>00154     <a class="code" href="gsb__assistant_8c.html#a6972bde2415e07b7afb35a062456f129">gsb_assistant_add_page</a> ( assistant,
<a name="l00155"></a>00155                              gsb_assistant_first_page_2 (assistant),
<a name="l00156"></a>00156                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa3efe228569181d03e959a1fefced13aa">FIRST_ASSISTANT_PAGE_2</a>,
<a name="l00157"></a>00157                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa9df2c40e561c1a5b46974460edea492e">FIRST_ASSISTANT_INTRO</a>,
<a name="l00158"></a>00158                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaacb4356954bb745ecbd6f1ba73e40e6d3">FIRST_ASSISTANT_PAGE_3</a>,
<a name="l00159"></a>00159                              G_CALLBACK (gsb_assistant_first_enter_page_2) );
<a name="l00160"></a>00160     <a class="code" href="gsb__assistant_8c.html#a6972bde2415e07b7afb35a062456f129">gsb_assistant_add_page</a> ( assistant,
<a name="l00161"></a>00161                              gsb_assistant_first_page_3 (assistant),
<a name="l00162"></a>00162                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaacb4356954bb745ecbd6f1ba73e40e6d3">FIRST_ASSISTANT_PAGE_3</a>,
<a name="l00163"></a>00163                              <a class="code" href="gsb__assistant__first_8c.html#a534a709ba3c1b8b898f949336c2d2ecaa3efe228569181d03e959a1fefced13aa">FIRST_ASSISTANT_PAGE_2</a>,
<a name="l00164"></a>00164                              0,
<a name="l00165"></a>00165                              G_CALLBACK (gsb_assistant_first_enter_page_3) );
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     <span class="comment">/* now we launch the assistant */</span>
<a name="l00168"></a>00168     return_value = <a class="code" href="gsb__assistant_8c.html#a886a6fa8c458d71d7cfae7b54bd3187f">gsb_assistant_run</a> (assistant);
<a name="l00169"></a>00169     gtk_widget_destroy (assistant);
<a name="l00170"></a>00170     <span class="keywordflow">return</span> return_value;
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 
<a name="l00182"></a>00182 <span class="keyword">static</span> GtkWidget *gsb_assistant_first_page_2 ( GtkWidget *assistant )
<a name="l00183"></a>00183 {
<a name="l00184"></a>00184     GtkWidget *page;
<a name="l00185"></a>00185     GtkWidget *vbox;
<a name="l00186"></a>00186     GtkWidget *label;
<a name="l00187"></a>00187     GtkWidget *entry;
<a name="l00188"></a>00188     GtkWidget *button;
<a name="l00189"></a>00189     GtkWidget *paddingbox;
<a name="l00190"></a>00190     GtkWidget *table;
<a name="l00191"></a>00191     GtkSizeGroup *size_group;
<a name="l00192"></a>00192     gchar *text;
<a name="l00193"></a>00193     GtkWidget *hbox;
<a name="l00194"></a>00194     GtkWidget *dialog;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     page = gtk_hbox_new (FALSE, 15);
<a name="l00197"></a>00197     gtk_container_set_border_width ( GTK_CONTAINER (page),
<a name="l00198"></a>00198                                      10 );
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     size_group = gtk_size_group_new (GTK_SIZE_GROUP_HORIZONTAL);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     vbox = <a class="code" href="utils_8c.html#a3baab3fba6974f2ebf35757198ac8911">new_vbox_with_title_and_icon</a> ( _(<span class="stringliteral">&quot;General configuration of Grisbi&quot;</span>),
<a name="l00203"></a>00203                                           <span class="stringliteral">&quot;generalities.png&quot;</span> );
<a name="l00204"></a>00204     gtk_box_pack_start ( GTK_BOX (page),
<a name="l00205"></a>00205                          vbox,
<a name="l00206"></a>00206                          TRUE, TRUE, 0 );
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="comment">/* configure the browser */</span>
<a name="l00209"></a>00209     paddingbox = <a class="code" href="utils_8c.html#a22ba81fcf046b5bec6cf6d55d440abc5">new_paddingbox_with_title</a> (vbox, FALSE, _(<span class="stringliteral">&quot;Web&quot;</span>));
<a name="l00210"></a>00210 
<a name="l00211"></a>00211     table = gtk_table_new ( 0, 3, FALSE );
<a name="l00212"></a>00212     gtk_box_pack_start ( GTK_BOX ( paddingbox ), table, FALSE, FALSE, 0 );
<a name="l00213"></a>00213     gtk_table_set_col_spacings ( GTK_TABLE(table), 6 );
<a name="l00214"></a>00214     gtk_table_set_row_spacings ( GTK_TABLE(table), 6 );
<a name="l00215"></a>00215 
<a name="l00216"></a>00216     label = gtk_label_new ( <a class="code" href="structures_8h.html#aaad3270d56994a956f6956f142c1c103">COLON</a>(_(<span class="stringliteral">&quot;Web browser command&quot;</span>)));
<a name="l00217"></a>00217     gtk_size_group_add_widget ( size_group, label );
<a name="l00218"></a>00218     gtk_misc_set_alignment ( GTK_MISC ( label ), 0.0, 0.5 );
<a name="l00219"></a>00219     gtk_table_attach ( GTK_TABLE(table), label, 0, 1, 1, 2,
<a name="l00220"></a>00220                        GTK_SHRINK | GTK_FILL, GTK_SHRINK | GTK_FILL, 0, 0 );
<a name="l00221"></a>00221     entry = <a class="code" href="gsb__automem_8c.html#afe5c31e5709a71264b93ee912fed12f4">gsb_automem_entry_new</a> ( &amp;<a class="code" href="gsb__file__config_8c.html#ac390e947e97cef2bec2f5d59d6ec1071">conf</a>.<a class="code" href="structgsb__conf__t.html#a1f1c81c5d78cee38e3c4905e2a6f975f">browser_command</a>, NULL, NULL );
<a name="l00222"></a>00222     gtk_table_attach ( GTK_TABLE(table), entry, 1, 2, 1, 2, GTK_EXPAND|GTK_FILL, 0, 0, 0 );
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     text = <a class="code" href="dialog_8c.html#a5927e30f6f690b1ea7391d140f8efa7d">make_blue</a> ( _(<span class="stringliteral">&quot;You may use %s to expand the URL - I.e: &#39;firefox -remote %s&#39; &quot;</span>) );
<a name="l00225"></a>00225     label = gtk_label_new ( text );
<a name="l00226"></a>00226     gtk_label_set_use_markup ( GTK_LABEL(label), TRUE );
<a name="l00227"></a>00227     gtk_misc_set_alignment ( GTK_MISC ( label ), 0.0, 0.5 );
<a name="l00228"></a>00228     gtk_table_attach ( GTK_TABLE(table), label, 1, 2, 2, 3,
<a name="l00229"></a>00229                         GTK_SHRINK | GTK_FILL, GTK_SHRINK | GTK_FILL, 0, 0 );
<a name="l00230"></a>00230     g_free ( text );
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     <span class="comment">/* Account file handling */</span>
<a name="l00233"></a>00233     paddingbox = <a class="code" href="utils_8c.html#a22ba81fcf046b5bec6cf6d55d440abc5">new_paddingbox_with_title</a> (vbox, FALSE,
<a name="l00234"></a>00234                                             _(<span class="stringliteral">&quot;Account files handling&quot;</span>));
<a name="l00235"></a>00235 
<a name="l00236"></a>00236     <span class="comment">/* Automatically load last file on startup? */</span>
<a name="l00237"></a>00237     button = <a class="code" href="gsb__automem_8c.html#ad32c3b7a4ae54cbe312fe4e1ee22e10f">gsb_automem_checkbutton_new</a> (_(<span class="stringliteral">&quot;Automatically load last file on startup&quot;</span>),
<a name="l00238"></a>00238                                           &amp;<a class="code" href="gsb__file__config_8c.html#ac390e947e97cef2bec2f5d59d6ec1071">conf</a>.<a class="code" href="structgsb__conf__t.html#a20363216fde07ae08492945768fe7d6a">dernier_fichier_auto</a>, NULL, NULL );
<a name="l00239"></a>00239     gtk_box_pack_start ( GTK_BOX ( paddingbox ), button, 
<a name="l00240"></a>00240                          FALSE, FALSE, 0 );
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <span class="comment">/* automatically save file at closing */</span>
<a name="l00243"></a>00243     button = <a class="code" href="gsb__automem_8c.html#ad32c3b7a4ae54cbe312fe4e1ee22e10f">gsb_automem_checkbutton_new</a> (_(<span class="stringliteral">&quot;Automatically save on exit&quot;</span>),
<a name="l00244"></a>00244                                           &amp;<a class="code" href="gsb__file__config_8c.html#ac390e947e97cef2bec2f5d59d6ec1071">conf</a>.<a class="code" href="structgsb__conf__t.html#a673c71a1aaa248541d9366eea400972a">sauvegarde_auto</a>, NULL, NULL);
<a name="l00245"></a>00245     gtk_box_pack_start ( GTK_BOX ( paddingbox ), button, 
<a name="l00246"></a>00246                          FALSE, FALSE, 0 );
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="comment">/* crypt the grisbi file */</span>
<a name="l00249"></a>00249     button = <a class="code" href="gsb__automem_8c.html#ad32c3b7a4ae54cbe312fe4e1ee22e10f">gsb_automem_checkbutton_new</a> ( _(<span class="stringliteral">&quot;Encrypt Grisbi file&quot;</span>),
<a name="l00250"></a>00250                                            &amp;(<a class="code" href="parametres_8c.html#ab2a744f5d2124688473d13979420e911">etat</a>.<a class="code" href="structgsb__etat__t.html#a5d00886877a537e1acf2ca7eb8d247f6">crypt_file</a>), G_CALLBACK (<a class="code" href="parametres_8c.html#aeda2d150b221e3ecad4af85050194e3f">gsb_gui_encryption_toggled</a>), NULL);
<a name="l00251"></a>00251     gtk_box_pack_start ( GTK_BOX ( paddingbox ), button,
<a name="l00252"></a>00252                          FALSE, FALSE, 0 );
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <span class="comment">/* Automatic backup ? */</span>
<a name="l00255"></a>00255     button = <a class="code" href="gsb__automem_8c.html#ad32c3b7a4ae54cbe312fe4e1ee22e10f">gsb_automem_checkbutton_new</a> (_(<span class="stringliteral">&quot;Make a backup copy before saving files&quot;</span>),
<a name="l00256"></a>00256                                           &amp;<a class="code" href="gsb__file__config_8c.html#ac390e947e97cef2bec2f5d59d6ec1071">conf</a>.<a class="code" href="structgsb__conf__t.html#affba80c08847721573312df63317f9c4">make_backup</a>, NULL, NULL);
<a name="l00257"></a>00257     gtk_box_pack_start ( GTK_BOX ( paddingbox ), button,
<a name="l00258"></a>00258                          FALSE, FALSE, 0 );
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="comment">/* Automatic backup every x minutes */</span>
<a name="l00261"></a>00261     hbox = gtk_hbox_new ( FALSE, 6);
<a name="l00262"></a>00262     gtk_box_pack_start ( GTK_BOX ( paddingbox ), hbox,
<a name="l00263"></a>00263                          FALSE, FALSE, 0);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     button = <a class="code" href="gsb__automem_8c.html#ad32c3b7a4ae54cbe312fe4e1ee22e10f">gsb_automem_checkbutton_new</a> (_(<span class="stringliteral">&quot;Make a backup copy every &quot;</span>),
<a name="l00266"></a>00266                                           &amp;<a class="code" href="gsb__file__config_8c.html#ac390e947e97cef2bec2f5d59d6ec1071">conf</a>.<a class="code" href="structgsb__conf__t.html#a01bf44cc2178d2085b1c726e061caee1">make_backup_every_minutes</a>,
<a name="l00267"></a>00267                                           G_CALLBACK (<a class="code" href="gsb__file_8c.html#a9e956c0079c7eba15147e2ae85c76442">gsb_file_automatic_backup_start</a>), NULL);
<a name="l00268"></a>00268     gtk_box_pack_start ( GTK_BOX (hbox), button,
<a name="l00269"></a>00269                          FALSE, FALSE, 0 );
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     button = <a class="code" href="gsb__automem_8c.html#a1618f5cf86220d6e15f84ac3f94e5382">gsb_automem_spin_button_new</a> ( &amp;<a class="code" href="gsb__file__config_8c.html#ac390e947e97cef2bec2f5d59d6ec1071">conf</a>.<a class="code" href="structgsb__conf__t.html#a5a6be9e1da1968dc1667dffbcbd0b48e">make_backup_nb_minutes</a>,
<a name="l00272"></a>00272                                            G_CALLBACK (<a class="code" href="gsb__file_8c.html#acad35e7f7cc1f9be4d8de4a0c391e25d">gsb_file_automatic_backup_change_time</a>), NULL );
<a name="l00273"></a>00273     gtk_box_pack_start ( GTK_BOX (hbox), button,
<a name="l00274"></a>00274                          FALSE, FALSE, 0 );
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     label = gtk_label_new (_(<span class="stringliteral">&quot; minutes&quot;</span>));
<a name="l00277"></a>00277     gtk_box_pack_start ( GTK_BOX (hbox), label,
<a name="l00278"></a>00278                          FALSE, FALSE, 0 );
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <span class="comment">/* if automatic backup, choose a dir */</span>
<a name="l00281"></a>00281     hbox = gtk_hbox_new ( FALSE, 6 );
<a name="l00282"></a>00282     gtk_box_pack_start ( GTK_BOX ( paddingbox ), hbox,
<a name="l00283"></a>00283                          FALSE, FALSE, 0);
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     label = gtk_label_new ( <a class="code" href="structures_8h.html#aaad3270d56994a956f6956f142c1c103">COLON</a>(_(<span class="stringliteral">&quot;Backup directory&quot;</span>)) );
<a name="l00286"></a>00286     gtk_box_pack_start ( GTK_BOX ( hbox ), label,
<a name="l00287"></a>00287                          FALSE, FALSE, 0);
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     dialog = <a class="code" href="utils__files_8c.html#ad52941b893b0fcc21576cebdaa93fe96" title="pallie à un bug du gtk_file_chooser_button_new">utils_files_create_file_chooser</a> ( <a class="code" href="accueil_8c.html#a3d346c08cf2d67c388caabffb412b293">window</a>,
<a name="l00290"></a>00290                         _(<span class="stringliteral">&quot;Select/Create backup directory&quot;</span>) );
<a name="l00291"></a>00291     button = gtk_file_chooser_button_new_with_dialog (dialog);
<a name="l00292"></a>00292     gtk_file_chooser_set_current_folder ( GTK_FILE_CHOOSER (button),
<a name="l00293"></a>00293                         <a class="code" href="utils__files_8c.html#a73d323b60da65cb56316d1a057fcd312">my_get_XDG_grisbi_data_dir</a> () );
<a name="l00294"></a>00294     g_signal_connect ( G_OBJECT (button),
<a name="l00295"></a>00295                         <span class="stringliteral">&quot;selection-changed&quot;</span>,
<a name="l00296"></a>00296                         G_CALLBACK (<a class="code" href="parametres_8c.html#a6d6ce89725f0f6ea7443041a44d96e41">gsb_config_backup_dir_chosen</a>),
<a name="l00297"></a>00297                         dialog );
<a name="l00298"></a>00298     gtk_box_pack_start ( GTK_BOX ( hbox ), button,
<a name="l00299"></a>00299                          FALSE, TRUE, 0);
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     gtk_widget_show_all (page);
<a name="l00302"></a>00302     <span class="keywordflow">return</span> page;
<a name="l00303"></a>00303 }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 
<a name="l00314"></a>00314 <span class="keyword">static</span> GtkWidget *gsb_assistant_first_page_3 ( GtkWidget *assistant )
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316     GtkWidget *page;
<a name="l00317"></a>00317     GtkWidget *vbox;
<a name="l00318"></a>00318     GtkWidget *label;
<a name="l00319"></a>00319     GtkWidget *paddingbox;
<a name="l00320"></a>00320     GtkSizeGroup *size_group;
<a name="l00321"></a>00321     GtkWidget *hbox;
<a name="l00322"></a>00322     GtkWidget *image;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     page = gtk_hbox_new (FALSE, 15);
<a name="l00325"></a>00325     gtk_container_set_border_width ( GTK_CONTAINER (page), 10 );
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     size_group = gtk_size_group_new (GTK_SIZE_GROUP_HORIZONTAL);
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     vbox = <a class="code" href="utils_8c.html#a3baab3fba6974f2ebf35757198ac8911">new_vbox_with_title_and_icon</a> ( _(<span class="stringliteral">&quot;Reconciliation&quot;</span>), <span class="stringliteral">&quot;reconciliationlg.png&quot;</span> );
<a name="l00330"></a>00330     gtk_box_pack_start ( GTK_BOX (page), vbox, TRUE, TRUE, 0 );
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     paddingbox = <a class="code" href="utils_8c.html#a22ba81fcf046b5bec6cf6d55d440abc5">new_paddingbox_with_title</a> (vbox, FALSE,
<a name="l00333"></a>00333                                             _(<span class="stringliteral">&quot;Error getting reconciliations&quot;</span>));
<a name="l00334"></a>00334 
<a name="l00335"></a>00335     hbox = gtk_hbox_new ( FALSE, 15 );
<a name="l00336"></a>00336     gtk_box_pack_start ( GTK_BOX ( paddingbox ), hbox, FALSE, FALSE, 15 );
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     image = gtk_image_new_from_stock ( GTK_STOCK_DIALOG_ERROR, GTK_ICON_SIZE_DIALOG );
<a name="l00339"></a>00339     gtk_box_pack_start ( GTK_BOX ( hbox ), image, FALSE, FALSE, 0);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341     label = gtk_label_new ( _(<span class="stringliteral">&quot;When importing the file from the previous version, &quot;</span>
<a name="l00342"></a>00342                               <span class="stringliteral">&quot;Grisbi has found inconsistencies\n&quot;</span>
<a name="l00343"></a>00343                               <span class="stringliteral">&quot;and could not restore all the reconciliatoins of one or &quot;</span>
<a name="l00344"></a>00344                               <span class="stringliteral">&quot;more accounts.\n\n&quot;</span>
<a name="l00345"></a>00345                               <span class="stringliteral">&quot;Although this has no impact on the integrity of data, &quot;</span>
<a name="l00346"></a>00346                               <span class="stringliteral">&quot;wrong values can be found.\n\n&quot;</span>
<a name="l00347"></a>00347                               <span class="stringliteral">&quot;Check in the \&quot;Preferences\&quot; for more information.&quot;</span>) );
<a name="l00348"></a>00348     gtk_box_pack_start ( GTK_BOX ( hbox ), label, FALSE, FALSE, 0);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     gtk_widget_show_all (page);
<a name="l00351"></a>00351     <span class="keywordflow">return</span> page;
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 
<a name="l00364"></a>00364 <span class="keyword">static</span> gboolean gsb_assistant_first_enter_page_2 ( GtkWidget *assistant,
<a name="l00365"></a>00365                         gint new_page )
<a name="l00366"></a>00366 {
<a name="l00367"></a>00367     <span class="keywordflow">if</span> ( <a class="code" href="gsb__assistant__first_8c.html#ac165dc8e950fecfeea085204f948425e">result_reconcile</a> == TRUE )
<a name="l00368"></a>00368         <a class="code" href="gsb__assistant_8c.html#af9667499ec49ad50593c8662801d4a9c">gsb_assistant_change_button_next</a> ( assistant, GTK_STOCK_GO_FORWARD, 
<a name="l00369"></a>00369                                        GTK_RESPONSE_APPLY );
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="keywordflow">return</span> FALSE;
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
<a name="l00383"></a>00383 <span class="keyword">static</span> gboolean gsb_assistant_first_enter_page_3 ( GtkWidget *assistant,
<a name="l00384"></a>00384                         gint new_page )
<a name="l00385"></a>00385 {
<a name="l00386"></a>00386     <a class="code" href="gsb__assistant_8c.html#af9667499ec49ad50593c8662801d4a9c">gsb_assistant_change_button_next</a> ( assistant, GTK_STOCK_GO_FORWARD, 
<a name="l00387"></a>00387                                        GTK_RESPONSE_APPLY );
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <span class="keywordflow">return</span> FALSE;
<a name="l00390"></a>00390 }
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Généré le Sat Aug 7 22:12:01 2010 pour Grisbi par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
