AC_INIT(src/main.c)
AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(grisbi,0.5.0)
AM_ACLOCAL_INCLUDE(macros)
AM_MAINTAINER_MODE

PACKAGE=grisbi
VERSION=0.5.0
dnl MKINSTALLDIRS
dnl AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE")
dnl AC_DEFINE_UNQUOTED(VERSION, "$VERSION")
AC_SUBST(PACKAGE)
AC_SUBST(VERSION)

AC_ISC_POSIX
AC_PROG_CC
AC_STDC_HEADERS
AC_PROG_RANLIB

dnl Check for NLS support.                                                      
ALL_LINGUAS="fr it"
AM_GNU_GETTEXT
AC_CHECK_LIB(intl,main)

dnl Check for libofx
AC_CHECK_HEADER(libofx/libofx.h,LDFLAGS="${LDFLAGS} -lofx",CFLAGS="${CFLAGS} -DNOOFX";noofx=true)
AM_CONDITIONAL(NOOFX, test x$noofx = xtrue)


AC_SUBST(prefix)

PKG_CHECK_MODULES(GRISBI, gtk+-2.0 glib-2.0 libxml-2.0)
LDFLAGS="${LDFLAGS} ${GRISBI_LIBS}"
CFLAGS="${CFLAGS} ${GRISBI_CFLAGS}"


AC_SUBST(CFLAGS)
AC_SUBST(LDFLAGS)

dnl ******************************
dnl Makefiles
dnl ******************************

AC_OUTPUT([
Makefile
help/Makefile
help/C/Makefile
help/fr/Makefile
intl/Makefile
macros/Makefile
pixmaps/Makefile
po/Makefile.in
src/Makefile
])
